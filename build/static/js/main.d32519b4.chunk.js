(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,n){e.exports=n.p+"static/media/add.229427fe.svg"},143:function(e,t,n){e.exports=n.p+"static/media/calendarExpand.57f20ba4.svg"},144:function(e,t,n){e.exports=n.p+"static/media/calendarCollapse.fbdd1604.svg"},229:function(e,t,n){},23:function(e,t,n){n(410).config();var a={BASE_URL:"https://heyagenda.com/",API_URL:"http://localhost:3001/v1",STRIPE_CONNECT_CALLBACK_URL:"https://app.heyagenda.com/settings",SENTRY_DSN:"https://69570983298040b2ace658559035bace@sentry.io/1796095"};a.STRIPE_CLIENT_PUBLIC_KEY=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_BASE_URL:"https://heyagenda.com/",REACT_APP_API_URL:"http://localhost:3001/v1",REACT_APP_STRIPE_CONNECT_CALLBACK_URL:"https://app.heyagenda.com/settings",REACT_APP_SENTRY_DSN:"https://69570983298040b2ace658559035bace@sentry.io/1796095"}).STRIPE_CLIENT_PUBLIC_KEY||"pk_test_WzBWalkASwZyPFaA0dJhOZ1p00bXlkON04",e.exports=a},30:function(e,t,n){e.exports=n.p+"static/media/remove.41cc548e.svg"},323:function(e,t,n){e.exports=n.p+"static/media/close.df0b9fea.svg"},328:function(e,t,n){e.exports=n.p+"static/media/menu.f3d1aaae.svg"},329:function(e,t,n){e.exports=n.p+"static/media/iconSearch.44a00011.svg"},331:function(e,t,n){e.exports=n.p+"static/media/dragHandle.0ad22be9.svg"},351:function(e,t,n){e.exports=n.p+"static/media/arrowRight.02d767b8.svg"},352:function(e,t,n){e.exports=n.p+"static/media/arrowLeft.3b1b9fff.svg"},357:function(e,t,n){e.exports=n.p+"static/media/calendar.5349ae14.svg"},358:function(e,t,n){e.exports=n.p+"static/media/bookings.643c26df.svg"},359:function(e,t,n){e.exports=n.p+"static/media/invoices.5d19e5ea.svg"},360:function(e,t,n){e.exports=n.p+"static/media/customers.447022b2.svg"},361:function(e,t,n){e.exports=n.p+"static/media/settings.a9024419.svg"},362:function(e,t,n){e.exports=n.p+"static/media/logout.a2bbcb83.svg"},363:function(e,t,n){e.exports=n.p+"static/media/login.bdc66b5c.svg"},364:function(e,t,n){e.exports=n.p+"static/media/register.942bbc12.svg"},367:function(e,t,n){e.exports=n(745)},372:function(e,t,n){},404:function(e,t,n){},413:function(e,t,n){},506:function(e,t,n){},56:function(e,t,n){e.exports=n.p+"static/media/view.df717228.svg"},637:function(e,t,n){},651:function(e,t){},653:function(e,t){},688:function(e,t){},689:function(e,t){},71:function(e,t,n){e.exports=n.p+"static/media/arrowDown.19bfcf60.svg"},745:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(18),i=n.n(o),c=(n(372),n(3)),l=n.n(c),s=n(7),u=n(45),d=n(58),m=n(8),p=n.n(m),g=n(366),f=n(11),b=n(1),v=["Jamie","Francesco","Fabrizio"],y=n(16),h=n.n(y);function k(e,t,n){var a=new Date(e);return a.setHours(t),a.setMinutes(n),a.setSeconds(0),a.setMilliseconds(0),a}function E(e,t){var n=new Date(e);return n.setDate(n.getDate()+t),n}function O(e,t,n){var a=!0,r=!1,o=void 0;try{for(var i,c=e.slots[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var l=i.value;switch(l.kind){case"multi-day":var s=!0,u=!1,d=void 0;try{for(var m,p=l.dateRange[Symbol.iterator]();!(s=(m=p.next()).done);s=!0){var g=m.value,f=new Date(g).getTime();if(0!==f&&t.getTime()<f&&f<n.getTime())return!0}}catch(v){u=!0,d=v}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}break;case"single-day":var b=new Date(l.date).getTime();if(0!==b&&t.getTime()<b&&b<n.getTime())return!0;break;default:throw new Error}}}catch(v){r=!0,o=v}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return!1}function x(){return{id:-1,received:new Date,source:"Email",eventName:"",venueId:null,spaceId:null,status:"Enquiry",customerId:null,ownerId:null,slots:[],invoices:[],quotes:[],currency:"GBP",discount:0,total:0}}function w(e){var t=e.vatRate;return{name:"",description:"",quantity:0,unitPrice:0,vatRate:t||0,vatRateText:t&&"".concat(t)||"0"}}E(new Date,-60),new Date,E(new Date,1),new E(Date(),-20),E(new Date,-1),new E(Date(),-10),E(new Date,-1),E(new Date,-10),E(new Date,-1),new Date,E(new Date,-1),new E(Date(),-3),E(new Date,-1),E(new Date,-10),E(new Date,-1);function j(e,t){var n=e&&e.reduce(function(e,n){return e+n.quantity*n.unitPrice*(1-t/100)},0),a=e&&e.reduce(function(e,n){return e+n.quantity*n.unitPrice*(1-t/100)*n.vatRate/100},0);return[n,a,n+a]}var _="Request get venue",S="Get venue success",C="Get venue error",D="Request create venue",I="Get add venue success",N="Get add venue error",R="Request delete venue",A="Get delete venue success",T="Get delete venue error",M="Request edit venue",B="Get edit venue success",L="Get edit venue error",F="Request get spaces of venue",P="Get spaces of venue success",q="Get spaces of venue error",V="Request add space of venue",z="Get add space of venue success",G="Get add space of venue error",U="Request edit space of venue",H="Get edit space of venue success",J="Get edit space of venue error",K="Request delete space of venue",Y="Get delete space of venue success",W="Get delete space of venue error",$="Request get company info",Q="Get company info success",Z="Get company info error",X="Request get booking status",ee="Get booking status success",te="Get booking status error",ne="Request add booking status",ae="Get add booking status success",re="Get add booking status error",oe="Request update booking status",ie="Get update booking status success",ce="Get update booking status error",le="Request delete booking status",se="Get delete booking status success",ue="Get delete booking status error",de="Append new booking status",me="Remove appended new booking status",pe="Set booking status page status",ge="Update all booking status",fe="Request get customers",be="Get customers success",ve="Get customers error",ye="Request add customer",he="Get add customer success",ke="Get add customer error",Ee="Request update customer",Oe="Get update customer success",xe="Get update customer error",we="Request delete customer",je="Get delete customer success",_e="Get delete customer error",Se="Request get bookings",Ce="Get bookings success",De="Get bookings error",Ie="Request add booking",Ne="Get add booking success",Re="Get add booking error",Ae="Request update booking",Te="Get update booking success",Me="Get update booking error",Be="Request delete booking",Le="Request delete booking success",Fe="Request delete booking error",Pe="Request get customer for booking",qe="Success get customer for booking",Ve="Error get customer for booking",ze="Request get venue for booking",Ge="Success get venue for booking",Ue="Error get venue for booking",He="Request get booking spaces",Je="Success get booking spaces",Ke="Error get booking spaces",Ye="Request get booking booking status",We="Get booking booking status success",$e="Get booking booking status error",Qe="Change add booking form validate",Ze="Request get booking quote",Xe="Get booking quote success",et="Get booking quote error",tt="Request create booking quote",nt="Get create booking quote success",at="Get create booking quote error",rt="Request update booking quote",ot="Update booking quote success",it="Update booking quote error",ct="Request delete bookig quote",lt="Delete booking quote success",st="Delete booking quote error",ut="Request get booking invoice",dt="Get booking invoice success",mt="Get booking invoice error",pt="Request create booking invoice",gt="Get create booking invoice success",ft="Get create booking invoice error",bt="Request update booking invoice",vt="Update booking invoice success",yt="Update booking invoice error",ht="Request delete bookig invoice",kt="Delete booking invoice success",Et="Delete booking invoice error",Ot="CLEAR BOOKING DATA",xt="Request save user payment information",wt="Save user payment information success",jt="Save user payment information error",_t="Set User Stripe connection status",St="Request get custom booking color settings",Ct="Get custom booking color setting success",Dt="Get custom booking color setting error",It="Request get calendar custom views",Nt="Get calendar custom views success",Rt="Get calendar custom views error",At="Request create calendar custom view",Tt="Create calendar custom view success",Mt="Create calendar custom view error",Bt="Request update calendar custom view success",Lt="Update calendar custom view success",Ft="Update calendar custom view error",Pt="Request get all spaces of logged in user",qt="Get all spaces of login user success",Vt="Get all spaces of login user error",zt="Set current calendar view",Gt="Get calendar setting success",Ut="Get calendar setting error",Ht="Request save calendar setting",Jt="Save calendar setting error",Kt="Create calendar setting success",Yt="Create calendar setting error",Wt="Update calendar setting success",$t="Set calendar Setting",Qt="Set Dashboard Recent Bookings Period",Zt="Set Upcoming booking period";var Xt=function(e,t){switch(t.type){case Se:return Object(b.a)({},e,{loadBooking:!0});case Ot:return Object(b.a)({},e,{quotes:"",invoices:""});case Ce:var n=t.payload.map(function(e){return e.slots&&(e.slots=JSON.parse(e.slots)),e});return Object(b.a)({},e,{loadBooking:!1,bookings:Object(f.a)(n)});case De:return Object(b.a)({},e,{loadBooking:!1});case Ie:return Object(b.a)({},e,{loadBookingAction:!0});case Ne:var a=t.payload;return a.slots&&(a.slots=JSON.parse(a.slots)),Object(b.a)({},e,{loadBookingAction:!1,bookings:[].concat(Object(f.a)(e.bookings),[a])});case Re:return Object(b.a)({},e,{loadBookingAction:!1,bookings:[]});case Ae:return Object(b.a)({},e,{loadBookingAction:!0});case Te:return Object(b.a)({},e,{loadBookingAction:!1,bookings:e.bookings.map(function(e){return e.id===t.payload.id?Object(b.a)({},t.payload,{slots:JSON.parse(t.payload.slots)}):e})});case Me:return Object(b.a)({},e,{loadBookingAction:!1});case Be:return Object(b.a)({},e,{loadBookingAction:!0});case Le:return Object(b.a)({},e,{loadBookingAction:!1,bookings:e.bookings.filter(function(e){return e.id!==t.payload})});case Fe:return Object(b.a)({},e,{loadBookingAction:!1});case Ye:return Object(b.a)({},e,{loadBooking:!0});case We:return Object(b.a)({},e,{bookingStatus:Object(f.a)(t.payload)});case $e:return Object(b.a)({},e,{loadBooking:!1});case"upsert_booking":var r=Array.from(e),o=e.findIndex(function(e){return e.id===t.booking.id});return-1!==o?r[o]=t.booking:r.push(t.booking),r;case"update_booking_status":var i=Array.from(e);return i[e.findIndex(function(e){return e.id===t.id})].status=t.status,i;case"delete_booking":var c=Array.from(e);return c.splice(t.index,1),c;case Ze:return Object(b.a)({},e,{loadingQuotes:!0});case Xe:return Object(b.a)({},e,{loadingQuotes:!1,quotes:t.payload.map(function(e){return e.slots=JSON.parse(e.slots),e.costItems=JSON.parse(e.costItems),e})});case et:return Object(b.a)({},e,{loadingQuotes:!1});case tt:return Object(b.a)({},e,{loadingQuotes:!0});case nt:return Object(b.a)({},e,{loadingQuotes:!1,quotes:[].concat(Object(f.a)(e.quotes),[Object(b.a)({},t.payload,{slots:JSON.parse(t.payload.slots),costItems:JSON.parse(t.payload.costItems)})])});case at:return Object(b.a)({},e,{loadingQuotes:!1});case rt:return Object(b.a)({},e,{loadingQuotes:!0});case ot:return Object(b.a)({},e,{loadingQuotes:!1,quotes:Object(f.a)(e.quotes.map(function(e){return e.id===t.payload.id?Object(b.a)({},t.payload,{slots:JSON.parse(t.payload.slots),costItems:JSON.parse(t.payload.costItems)}):e}))});case it:return Object(b.a)({},e,{loadingQuotes:!1});case ct:return Object(b.a)({},e,{loadingQuotes:!0});case lt:return Object(b.a)({},e,{quotes:e.quotes.filter(function(e){return e.id!==t.payload}),loadingQuotes:!1});case st:return Object(b.a)({},e,{loadingQuotes:!1});case"convert_quote_to_invoice":var l=Array.from(e),s=l.find(function(e){return e.id===t.booking}),u=function(e,t,n){return{number:t,status:"Unpaid",created:new Date,slots:e.slots,costItems:e.costItems,discount:e.discount,booking:n,amount:e.value}}(s.quotes[t.quote],e.reduce(function(e,t){return e+t.invoices.length},0)+1,s);return s.invoices.push(u),l;case"quote_update_total":return e.quotes[t.quote]?Object(b.a)({},e,{quotes:e.quotes.map(function(e,n){return n===t.quote&&(e.value=j(e.costItems,e.discount)[2]),e})}):Object(b.a)({},e);case"update_invoice_status":return Object(b.a)({},e,{invoices:e.invoices.map(function(e,n){return n===t.index&&(e.status=t.status),e})});case"delete_invoice":return Object(b.a)({},e,{invoices:e.invoices.filter(function(e,n){return n!==t.index})});case"update_invoice":return Array.from(e);case"append_invoice":var d=e.invoices;return d.push(t.invoice),Object(b.a)({},e,{invoices:d});case ut:return Object(b.a)({},e,{loadingInvoice:!0});case dt:return Object(b.a)({},e,{loadingInvoice:!1,invoices:t.payload.map(function(e){return e.slots=e.slots&&JSON.parse(e.slots),e.costItems=e.cost_items&&JSON.parse(e.cost_items),e})});case mt:return Object(b.a)({},e,{loadingInvoice:!1});case pt:return Object(b.a)({},e,{loadingInvoice:!0});case gt:var m=e.invoices,p=t.payload;return p.BookingId=parseInt(p.BookingId),p.slots=p.slots&&JSON.parse(p.slots),p.costItems=p.cost_items&&JSON.parse(p.cost_items),m.push(p),Object(b.a)({},e,{loadingInvoice:!1,invoices:Object(f.a)(m)});case ft:return Object(b.a)({},e,{loadingInvoice:!1});case bt:return Object(b.a)({},e,{loadingInvoice:!0});case vt:return Object(b.a)({},e,{loadingInvoice:!1,invoices:e.invoices.map(function(e){return e.id===t.payload.id&&((e=t.payload).slots=t.payload.slots?JSON.parse(t.payload.slots):[],e.costItems=t.payload.cost_items?JSON.parse(t.payload.cost_items):[]),e})});case yt:return Object(b.a)({},e,{loadingInvoice:!1});case ht:return Object(b.a)({},e,{loadingInvoice:!0});case kt:return Object(b.a)({},e,{invoices:e.invoices.filter(function(e){return e.id!==t.payload}),loadingInvoice:!1});case Et:return Object(b.a)({},e,{loadingInvoice:!1});default:return e}};var en=function(e,t,n){var a=Array.from(e),r=a.splice(t,1),o=Object(s.a)(r,1)[0];return a.splice(n,0,o),a};var tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:var n=Array.from(e.bookingStatuses);return n.push({id:-1,name:"",type:"custom",active:!0}),Object(b.a)({},e,{bookingStatuses:n});case"reorder_status":var a=en(e.bookingStatuses,t.from,t.to);return Object(b.a)({},e,{bookingStatuses:a});case ge:return Object(b.a)({},e,{bookingStatusActionLoading:!1,bookingStatuses:Object(f.a)(t.payload)});case _:return Object(b.a)({},e,{loading:!0});case S:return Object(b.a)({},e,{loading:!1,venues:Object(f.a)(t.payload)});case C:return Object(b.a)({},e,{loading:!1,venues:[]});case D:return Object(b.a)({},e,{venueActionLoading:!0});case I:return Object(b.a)({},e,{venueActionLoading:!1,venues:[].concat(Object(f.a)(e.venues),[t.payload])});case N:return Object(b.a)({},e,{venueActionLoading:!1});case R:return Object(b.a)({},e,{venueActionLoading:!0});case A:return Object(b.a)({},e,{venueActionLoading:!1,venues:Object(f.a)(e.venues.filter(function(e){return e.id!==t.payload}))});case T:return Object(b.a)({},e,{venueActionLoading:!1});case M:return Object(b.a)({},e,{venueActionLoading:!0});case B:return Object(b.a)({},e,{venueActionLoading:!1,venues:Object(f.a)(e.venues.map(function(e){return e.id===t.payload.id&&(e.name=t.payload.name),e}))});case L:return Object(b.a)({},e,{venueActionLoading:!1});case F:return Object(b.a)({},e,{spacesLoading:!0});case P:return Object(b.a)({},e,{spacesLoading:!1,selectedVenueSpaces:Object(f.a)(t.payload)});case q:return Object(b.a)({},e,{spacesLoading:!1,selectedVenueSpaces:[]});case V:return Object(b.a)({},e,{spaceActionLoading:!0});case z:return Object(b.a)({},e,{spaceActionLoading:!1,selectedVenueSpaces:[].concat(Object(f.a)(e.selectedVenueSpaces),[t.payload])});case G:return Object(b.a)({},e,{spaceActionLoading:!1});case U:return Object(b.a)({},e,{spaceActionLoading:!0});case H:return Object(b.a)({},e,{spaceActionLoading:!1,selectedVenueSpaces:Object(f.a)(e.selectedVenueSpaces.map(function(e){return e.id===t.payload.id&&(e.name=t.payload.name),e}))});case J:return Object(b.a)({},e,{spaceActionLoading:!1});case K:return Object(b.a)({},e,{spaceActionLoading:!0});case Y:return Object(b.a)({},e,{spaceActionLoading:!1,selectedVenueSpaces:e.selectedVenueSpaces.filter(function(e){return e.id!==t.payload})});case W:return Object(b.a)({},e,{spaceActionLoading:!1});case X:return Object(b.a)({},e,{bookingStatusesLoading:!0});case ee:return Object(b.a)({},e,{bookingStatusesLoading:!1,bookingStatuses:Object(f.a)(t.payload)});case te:return Object(b.a)({},e,{bookingStatusesLoading:!1,bookingStatuses:[]});case pe:return Object(b.a)({},e,{enableBookingSection:t.payload});case ne:return Object(b.a)({},e,{bookingStatusActionLoading:!0});case ae:return Object(b.a)({},e,{bookingStatusActionLoading:!1,bookingStatuses:Object(f.a)(e.bookingStatuses.map(function(e){return-1===e.id?t.payload:e}))});case re:return Object(b.a)({},e,{bookingStatusActionLoading:!1});case oe:return Object(b.a)({},e,{bookingStatusActionLoading:!0});case ie:return Object(b.a)({},e,{bookingStatusActionLoading:!1,bookingStatuses:Object(f.a)(e.bookingStatuses.map(function(e){return e.id===t.payload.id?t.payload:e}))});case ce:return Object(b.a)({},e,{bookingStatusActionLoading:!1});case le:return Object(b.a)({},e,{bookingStatusActionLoading:!0});case se:return Object(b.a)({},e,{bookingStatusActionLoading:!1,bookingStatuses:Object(f.a)(e.bookingStatuses.filter(function(e){return e.id!==t.payload}))});case ue:return Object(b.a)({},e,{bookingStatusActionLoading:!1});case me:return Object(b.a)({},e,{bookingStatuses:Object(f.a)(e.bookingStatuses.filter(function(e){return-1!==e.id})),enableBookingSection:!0});case $:return Object(b.a)({},e,{companyLoading:!0});case Q:return Object(b.a)({},e,{companyLoading:!1,companyInfo:Object(b.a)({},t.payload)});case Z:return Object(b.a)({},e,{companyLoading:!1});default:return e}};var nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"delete_customer":var n=Array.from(e),a=n.findIndex(function(e){return e.id===t.id});return-1!==a&&n.splice(a,1),n;case"append_customer":var r=Array.from(e);return r.push(t.customer),r;case fe:return Object(b.a)({},e,{loadingCustomers:!0});case be:return Object(b.a)({},e,{loadingCustomers:!1,customers:Object(f.a)(t.payload)});case ve:return Object(b.a)({},e,{loadingCustomers:!1,customers:[]});case ye:return Object(b.a)({},e,{loadingCustomers:!0});case he:return Object(b.a)({},e,{loadingCustomers:!1,customers:[].concat(Object(f.a)(e.customers),[t.payload])});case ke:case Ee:return Object(b.a)({},e,{loadingCustomers:!1});case Oe:var o=e.customers.map(function(e){return e.id===t.payload.id?t.payload:e});return Object(b.a)({},e,{loadingCustomers:!1,customers:Object(f.a)(o)});case xe:return Object(b.a)({},e,{loadingCustomers:!1});case we:return Object(b.a)({},e,{loadingCustomers:!0});case je:return Object(b.a)({},e,{loadingCustomers:!1,customers:e.customers.filter(function(e){return e.id!==t.payload})});case _e:return Object(b.a)({},e,{loadingCustomers:!1});default:return e}},an=function(e){e?p.a.defaults.headers.common.Authorization=e:delete p.a.defaults.headers.common.Authorization};var rn=function(e,t){switch(t.type){case"get_login_success":return localStorage.setItem("token",t.payload.token),an(localStorage.token),Object(b.a)({},e,{loading:!1,isAuthenticated:!0,user:Object(b.a)({},t.payload.user),token:t.payload.token});case"get_login_error":return Object(b.a)({},e,{loading:!1,isAuthenticated:!1,user:Object(b.a)({},t.payload)});case"user_load_success":return Object(b.a)({},e,{loading:!1,isAuthenticated:!0,user:Object(b.a)({},t.payload.user),token:localStorage.token});case"auth_error":return Object(b.a)({},e,{loading:!1,isAuthenticated:!1,user:{email:"",password:""}});case"set_logout":return localStorage.removeItem("token"),an(localStorage.token),Object(b.a)({},e,{loading:!1,isAuthenticated:!1,user:{email:"",password:""}});case xt:return Object(b.a)({},e,{loadingPayment:!0});case wt:return Object(b.a)({},e,{loadingPayment:!1,user:Object(b.a)({},e.user,{stripe_public_key:t.public_key})});case jt:return Object(b.a)({},e,{loadingPayment:!1});case _t:return Object(b.a)({},e,{user:Object(b.a)({},e.user,{stripe_status:t.payload})});default:return e}};var on=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case St:return Object(b.a)({},e,{loading:!0});case Ct:return Object(b.a)({},e,{loading:!1,bookingColors:Object(f.a)(t.payload)});case Dt:return Object(b.a)({},e,{loading:!1});default:return e}};var cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case It:return Object(b.a)({},e,{loading:!0});case Nt:var n={id:t.payload.id?t.payload.id:-1,views:t.payload.views?Object(f.a)(JSON.parse(t.payload.views)):[]};return Object(b.a)({},e,{loading:!1,calendarViewData:Object(b.a)({},n)});case Rt:return Object(b.a)({},e,{loading:!1});case At:return Object(b.a)({},e,{loading:!0});case Tt:return Object(b.a)({},e,{loading:!1,calendarViewData:{id:t.payload.id,views:JSON.parse(t.payload.views)}});case Mt:return Object(b.a)({},e,{loading:!1});case Bt:return Object(b.a)({},e,{loading:!0});case Lt:return Object(b.a)({},e,{loading:!1,calendarViewData:{id:t.payload.id,views:JSON.parse(t.payload.views)}});case Ft:return Object(b.a)({},e,{loading:!1});case Pt:return Object(b.a)({},e,{loading:!0});case qt:return Object(b.a)({},e,{loading:!1,allSpaces:Object(f.a)(t.payload)});case Vt:return Object(b.a)({},e,{loading:!1});case zt:return Object(b.a)({},e,{curView:t.payload});default:return e}};var ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ht:return Object(b.a)({},e,{loading:!0});case Jt:return Object(b.a)({},e,{loading:!1});case Gt:return t.payload?Object(b.a)({},e,{},t.payload):Object(b.a)({},e);case Kt:case Wt:return Object(b.a)({},e,{},t.payload);case Ut:case Yt:return Object(b.a)({},e);case $t:return Object(b.a)({},e,{},t.payload);default:return Object(b.a)({},e)}};var sn,un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Qt:return Object(b.a)({},e,{recentBookingsPeriod:t.payload});case Zt:return Object(b.a)({},e,{upcomingBookingPeriod:t.payload});default:return e}},dn=-10,mn=[{condition_key:{value:"payment_status",label:"The Payment Status"},condition_types:[{value:"equal",label:"Is Equal To"},{value:"not_equal",label:"Is Not Equal"}],condition_values:[{value:"enquiry",label:"Enquiry"},{value:"proposal",label:"Proposal"},{value:"accepted",label:"Accepted"},{value:"paid",label:"Paid"}]},{condition_key:{value:"title",label:"Title"},condition_types:[{value:"contains",label:"Contains"},{value:"not_contains",label:"Does Not Contains"}]}],pn=["#6389ea","#4a9454","#F2D600","#FF9317","#EB5A46","#C377E0","#FF80CE","#00C2E0","#4E8EF0","#51E898","#4d4d4d","#a9a9a9"],gn=function(){var e=window.location.href;return e.substring(e.indexOf("://")+3,e.indexOf("."))},fn=r.a.createContext(null),bn={bookings:{bookings:[],bookingStatus:[],loadBooking:!1,loadBookingAction:!1,quotes:[],loadingQuotes:!1,loadingInvoice:!1,invoices:[],owners:[]},settings:{companyLoading:!1,companyInfo:{name:"",vatId:"",street:"",city:"",postCode:"",phone:"",currency:"",vatRate:"",logoImg:""},bookingStatuses:[],enableBookingSection:!0,bookingStatusLoading:!1,bookingStatusActionLoading:!1,venues:[],loading:!1,selectedVenueSpaces:[],venuesLoading:!1,venueActionLoading:!1,spacesLoading:!1,spaceActionLoading:!1,payment:{public_key:""}},customers:{customers:[],loadingCustomers:!1},auth:{isAuthenticated:!1,loading:!0,user:{email:"",password:""},token:localStorage.getItem("token"),loadingPayment:!1},customBookingColor:{loading:!0,bookingColors:[]},calendarViews:{loading:!0,calendarViewData:{},allSpaces:[],curView:"spaces"},calendarSettings:{loading:!1,selectedDate:new Date,viewMode:"week",viewExpand:!0},dashboard:{recentBookingsPeriod:"Last 7 days",upcomingBookingPeriod:"Next 7 days"}},vn=(sn={settings:tn,bookings:Xt,customers:nn,auth:rn,customBookingColor:on,calendarViews:cn,calendarSettings:ln,dashboard:un},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object.keys(sn).reduce(function(n,a){return n[a]=sn[a](e[a],t),n},{})});var yn=function(e){return"Enquiry"===e?"#EECB2D":"Proposal"===e?"#F68F56":"Accepted"===e?"#E92579":"Paid"===e?"#52DDC2":"grey"},hn=function(e){var t=e.component,n=Object(g.a)(e,["component"]),o=Object(a.useContext)(fn).state.auth,i=o.isAuthenticated,c=o.loading;return r.a.createElement(d.b,Object.assign({},n,{render:function(e){return i||c||"calendar"===n.computedMatch.path?r.a.createElement(t,e):r.a.createElement(d.a,{to:"/login"})}}))},kn=n(130),En=n.n(kn),On=n(2),xn=n(13);function wn(){var e=Object(On.a)(["\n            width: ","px;\n            height: ","px;\n            background: url(",");\n            background-size: 100% 100%;\n            cursor: pointer;\n\n            :active {\n              opacity: 0.5;\n            }\n          "]);return wn=function(){return e},e}var jn=function(e){var t=e.width,n=e.height,a=e.size,o=e.svg,i=e.onClick,c=e.style,l=t||a,s=n||a;return r.a.createElement("div",Object.assign({onClick:i,style:c},e,{className:Object(xn.b)(e.className,Object(xn.a)(wn(),l,s,o))}))},_n=n(323),Sn=n.n(_n),Cn={accent_green:"#52DDC2",accent_yellow:"#EECB2D",accent_pink:"#E92579",status_pending:"#F68F56",white:"#FFFFFF",black:"#000000",transparent:"rgba(255,255,255,.6)",ultra_dark:"#1B1D20",darker:"#24272C",dark:"#3F4548",grey:"#93989F",light_grey:"#C2C4C7",light:"#E6E8E9",lighter:"#F2F5F7",lightest:"#F6F7F9"},Dn=function(e){var t=e.width,n=void 0===t?null:t,a=e.onClose,o=e.children,i={overlay:{backgroundColor:Cn.ultra_dark+"60",zIndex:1e3},content:{left:0,right:0,padding:0,overflow:"visible",top:"3em",width:n||"56em",maxWidth:"90%",bottom:"3em",margin:"0 auto",border:"none",background:"transparent"}};return r.a.createElement(En.a,Object.assign({style:i},e),r.a.createElement(jn,{svg:Sn.a,width:22,height:22,style:{position:"absolute",right:-11,top:-11,zIndex:999},onClick:a}),o)},In=n(4);function Nn(){var e=Object(On.a)(["\n  font-size: 1.3em;\n  text-align: ",";\n  color: ",";\n  margin: 0.1em 0 0.6em;\n  font-weight: 500;\n  line-height: 1.55;\n  @media (max-width: 640px) {\n    font-size: 1.6em;\n  }\n"]);return Nn=function(){return e},e}var Rn=In.a.h3(Nn(),function(e){return e.center?"center":"left"},function(e){return e.color?Cn[e.color]:Cn.dark});function An(){var e=Object(On.a)(["\n  font-size: 1em;\n  text-align: ",";\n  color: ",";\n  margin: 0.3em 0 0.8em;\n  font-weight: ",";\n  line-height: 1.8;\n  ","\n  @media (max-width: 640px) {\n    font-size: 1.3em;\n  }\n  ","\n"]);return An=function(){return e},e}var Tn=In.a.p(An(),function(e){return e.center?"center":"left"},function(e){return e.color?Cn[e.color]:Cn.grey},function(e){return e.strong?500:400},function(e){return e.ellipses?"\n    overflow: hidden;\n    text-overflow: ellipsis;\n  ":""},function(e){return e.serif&&'\n    font-family: Lora, "Palatino Linotype", "Book Antiqua", Palatino, Georgia,\n      serif;\n    color: '.concat(Cn.ultra_dark,";\n    margin: 0.3em 0 0.8em;\n    font-weight: 400;\n    line-height: 1.8;\n    font-size: 1.2em;\n  ")});function Mn(){var e=Object(On.a)(["\n    border-bottom: 1px solid ",";\n    p {\n      display: inline-block;\n      margin: 0 1em 0 0;\n      cursor: pointer;\n      padding: 0 0 0.5em;\n      :first-child {\n        margin-left: ","px;\n      }\n      :last-child {\n        margin-right: ","px;\n      }\n    }\n    .selected {\n      color: ",";\n      font-weight: 500;\n      border-bottom: 2px solid ",";\n    }\n  "]);return Mn=function(){return e},e}var Bn=function(e){var t=e.items,n=e.selectedItem,a=e.onOptionSelected,o=e.itemsSideMargin,i=void 0===o?0:o,c=In.a.div(Mn(),Cn.light,i,i,Cn.accent_pink,Cn.accent_pink);return r.a.createElement(c,null,t.map(function(e){return r.a.createElement(Tn,{key:e,className:n===e?"selected":"",onClick:function(){return a(e)}},e)}))};function Ln(){var e=Object(On.a)(["\n  font-size: 0.9em;\n  text-align: ",";\n  color: ",";\n  margin: 0.1em 0 0.6em;\n  font-weight: ",";\n  line-height: 1.7;\n"]);return Ln=function(){return e},e}var Fn=In.a.p(Ln(),function(e){return e.center?"center":"left"},function(e){return e.color?Cn[e.color]:Cn.dark},function(e){return e.strong?500:400});function Pn(){var e=Object(On.a)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-size: ",";\n  text-align: center;\n  border: 1px solid ",";\n  border-radius: 0.25em;\n  height: 34px;\n  padding: 0 0.7em;\n  width: ",";\n  flex: 0 0 auto;\n\n  background: #ffffff;\n  color: ",";\n  box-shadow: 0px 1.5px 1px rgba(0, 0, 0, 0.05);\n\n  p {\n    margin: 0;\n    line-height: 1.5;\n  }\n\n  ","\n\n  ","\n\n  ","\n\n  ","\n\n\n  cursor: pointer;\n  outline: none;\n  user-select: none;\n\n  animation: "," 1s 0.3s linear infinite;\n  animation-timing-function: ease-in-out;\n\n  &:active {\n    opacity: 0.8;\n  }\n\n  ","\n"]);return Pn=function(){return e},e}function qn(){var e=Object(On.a)(["\n  50% {\n    opacity: .35;\n  }\n"]);return qn=function(){return e},e}var Vn=Object(In.b)(qn()),zn=In.a.div(Pn(),function(e){return e.big?"1.2em":"1em"},Cn.light,function(e){return e.wide?"100%":"auto"},Cn.grey,function(e){return(e.selected||e.primary)&&"border-color: ".concat(Cn.accent_pink,";")},function(e){return e.softSelected&&"\n    p {color: ".concat(Cn.darker,"}\n  ")},function(e){return e.primary&&"\n    background: ".concat(Cn.accent_pink,";\n    p {color: white;}\n    box-shadow: 0px 2px 2px rgba(202, 97, 142, 0.3);\n  ")},function(e){return e.oulined&&"\n    background: transparent;\n    border: 1px solid ".concat(Cn.light,";\n    box-shadow: none;\n  ")},function(e){return e.loading&&Vn},function(e){return e.disabled&&"\n    opacity: 0.7;\n    cursor: not-allowed;\n  "}),Gn=function(e){var t=e.onClick,n=e.icon,a=e.iconComponent;return r.a.createElement(r.a.Fragment,null,r.a.createElement(zn,Object.assign({onClick:t},e,{type:e.type}),a&&a()," ",n&&r.a.createElement("img",{src:n,alt:""})," ",r.a.createElement(Fn,{color:"grey"},e.children)))},Un=n(71),Hn=n.n(Un);function Jn(){var e=Object(On.a)(["\n  width: 8px;\n  height: 8px;\n  border-radius: 4px;\n  display: inline-block;\n  background-color: ",";\n"]);return Jn=function(){return e},e}var Kn=In.a.span(Jn(),function(e){return e.color});function Yn(){var e=Object(On.a)(["\n  display: ",";\n  position: absolute;\n  background-color: #f9f9f9;\n  min-width: 160px;\n  width: 100%;\n  max-height: 250px;\n  overflow-y: scroll;\n  z-index: 1;\n  background: #ffffff;\n  color: ",";\n  box-shadow: 0px 1.5px 1px rgba(0, 0, 0, 0.05);\n  padding: 5px 10px;\n  border: 1px solid ",";\n  border-radius: 0.25em;\n\n  p {\n    cursor: pointer;\n    :hover {\n      opacity: 0.7;\n    }\n    :last-child {\n      margin-bottom: 0;\n    }\n  }\n"]);return Yn=function(){return e},e}function Wn(){var e=Object(On.a)(["\n  position: relative;\n  display: inline-block;\n\n  input {\n    width: 80%;\n    font-size: 0.9em;\n    border: none;\n\n    :focus {\n      outline-style: none;\n      box-shadow: none;\n      border-color: transparent;\n    }\n  }\n"]);return Wn=function(){return e},e}function $n(){var e=Object(On.a)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: ",";  \n  border: 1px solid ",";\n  border-radius: 0.25em;\n  height: 34px;\n  padding: 0 0.7em;\n  width: ",";\n  background: #ffffff;\n  color: ",";\n  box-shadow: 0px 1.5px 1px rgba(0, 0, 0, 0.05);  \n  p {\n    margin: 0;\n    line-height: 1.5;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    overflow: hidden;\n  }\n\n  ","\n\n  ","\n\n  ","\n\n\n  cursor: pointer;\n  outline: none;\n  user-select: none;\n\n  animation: "," 1s 0.3s linear infinite;\n  animation-timing-function: ease-in-out;\n\n  &:active {\n    opacity: 0.8;\n  }\n\n  ","\n"]);return $n=function(){return e},e}function Qn(){var e=Object(On.a)(["\n  50% {\n    opacity: .35;\n  }\n"]);return Qn=function(){return e},e}var Zn=Object(In.b)(Qn()),Xn=In.a.div($n(),function(e){return e.big?"1.2em":"1em"},function(e){return e.isValidate?Cn.light:"#E92579"},function(e){return e.wide?"100%":"auto"},Cn.grey,function(e){return e.selected&&"\n    border-color: ".concat(Cn.accent_pink,";\n  ")},function(e){return e.primary&&"\n    background: ".concat(Cn.accent_pink,";\n    p {color: white;}\n    box-shadow: 0px 2px 2px rgba(202, 97, 142, 0.3);\n  ")},function(e){return e.oulined&&"\n    background: transparent;\n    border: 1px solid ".concat(Cn.light,";\n    box-shadow: none;\n  ")},function(e){return e.loading&&Zn},function(e){return e.disabled&&"\n    opacity: 0.7;\n    cursor: not-allowed;\n  "}),ea=In.a.div(Wn()),ta=In.a.div(Yn(),function(e){return e.show?"aboslute":"none"},Cn.grey,Cn.light),na=function(e){var t=e.options,n=void 0===t?[]:t,o=e.colors,c=void 0===o?null:o,l=e.selectedOption,u=e.displayTransformer,d=void 0===u?null:u,m=e.onOptionSelected,p=e.noSelectionText,g=void 0===p?"None":p,f=e.searchEnabled,b=void 0!==f&&f,v=e.offersToCreateIfNotFound,y=void 0!==v&&v,h=e.optionsForSearch,k=void 0===h?[]:h,E=Object(a.useState)(!1),O=Object(s.a)(E,2),x=O[0],w=O[1],j=Object(a.useState)(""),_=Object(s.a)(j,2),S=_[0],C=_[1],D=Object(a.useRef)(null);Object(a.useEffect)(function(){var e=function(e){D.current&&(i.a.findDOMNode(D.current).contains(e.target)||x&&w(!1))};return document.addEventListener("click",e,!1),function(){document.removeEventListener("click",e,!1)}},[D,x]);var I=b?n&&n.filter(function(e){var t=k.filter(function(t){return t.value===e});return t.length>0&&-1!==t[0].label.toString().toLowerCase().indexOf(S.toLowerCase())}):n;var N=d&&l?d(l):l,R=function(){return r.a.createElement("input",{placeholder:"Search",value:S,onChange:function(e){return C(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&void(I.length>=0&&(m(I[0]),C(""),w(!1)))},ref:function(e){return e&&e.focus()}})},A=function(e){var t=n.indexOf(e),a=c&&c[t];return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement(Fn,{color:e===l?"dark":"grey",style:{marginRight:10},onClick:function(){w(!x),x&&C(""),m(e)}},a&&r.a.createElement(Kn,{color:a,style:{marginRight:8}}),d?d(e):e))};return r.a.createElement(ea,{ref:D},r.a.createElement(Xn,{onClick:function(){n&&n.length&&(w(!x),x&&C(""))},style:e.style,isValidate:e.isValidate},function(){if(x&&b)return R();if(!l)return r.a.createElement(Fn,{color:"grey"},g);if(c){var e=n.indexOf(l),t=c[e];return r.a.createElement(r.a.Fragment,null,r.a.createElement(Kn,{color:t}),r.a.createElement(Fn,{style:{marginLeft:5}},N))}return r.a.createElement(Fn,null,N)}(),r.a.createElement("img",{src:Hn.a,alt:"Show options",style:{transform:x?"scaleY(-1)":"",marginLeft:5}})),r.a.createElement(ta,{className:"tablepicker-dropdown-menu",show:x},b?I?I.length?I.map(A):y?r.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){m(S),C(""),w(!1)}},"Click to create ",r.a.createElement("strong",null,'"',S,'"')):"None found":void 0:n&&n.map(A)))};na.defaultProps={isValidate:!0};var aa=na,ra=n(34),oa=n(32);function ia(){var e=Object(On.a)(["\n  display: grid;\n  min-height: ",";\n  grid-template-columns: ",";\n  grid-template-rows: ",";\n  grid-gap: ",";\n  @media (max-width: ",") {\n    grid-template-columns: 1fr;\n  }\n  @media (max-width: ",") {\n    grid-template-columns: 1fr 1fr;\n  }\n  overflow: visible;\n  > * {\n    min-width: 0;\n  }\n  &:empty {\n    display: block;\n  }\n"]);return ia=function(){return e},e}var ca=In.a.div(ia(),function(e){return e.fullheight?"100%":"auto"},function(e){return e.columns||"1fr"},function(e){return e.rows},function(e){return e.gap||"1.4em"},function(e){return e.break},function(e){return e.split}),la=function(e){return r.a.createElement(ca,e,e.children)};function sa(){var e=Object(On.a)(["\n  font-size: 0.82em;\n  font-weight: 500;\n  line-height: 1.55;\n  margin: 0.3em 0 0.6em;\n  text-align: ",";\n  color: ",";\n"]);return sa=function(){return e},e}var ua=In.a.h5(sa(),function(e){return e.center?"center":"left"},function(e){return e.color?Cn[e.color]:Cn.dark});function da(){var e=Object(On.a)(["\n  font-size: 1.125em;\n  text-align: ",";\n  color: ",";\n  margin: 0.3em 0 0.8em;\n  font-weight: 500;\n  line-height: 1.55;\n"]);return da=function(){return e},e}var ma=In.a.h4(da(),function(e){return e.center?"center":"left"},function(e){return e.color?Cn[e.color]:Cn.dark});n(229);function pa(){var e=Object(On.a)(["\n        font-size: 0.95em;\n        display: inline-flex;\n        align-items: center;\n        justify-content: flex-start;\n        text-align: left;\n        border: 1px solid #e6e8e9;\n        border-radius: 0.25em;\n        color: ",";\n        height: 34px;\n        padding: 0 0.6em;\n        flex: 0 0 auto;\n      "]);return pa=function(){return e},e}var ga=function(e){return r.a.createElement("input",Object.assign({},e,{className:Object(xn.b)(e.className,Object(xn.a)(pa(),Cn.dark))}))};function fa(){var e=Object(On.a)(["\n  font-size: 0.82em;\n  font-weight: 500;\n  line-height: 1.55;\n  color: ",";\n  margin-bottom: 0.3em;\n"]);return fa=function(){return e},e}var ba=In.a.label(fa(),Cn.grey),va=function(e){return r.a.createElement(ba,e)};function ya(){var e=Object(On.a)(["\n  font-size: 0.95em;\n  display: inline-flex;\n  align-items: flex-start;\n  justify-content: flex-start;\n  text-align: left;\n  border: 1px solid #e6e8e9;\n  border-radius: 0.25em;\n  color: ",";\n  min-height: 34px;\n  padding: 0.5em 0.6em;\n  flex: 0 0 auto;\n  resize: none;\n"]);return ya=function(){return e},e}var ha=In.a.textarea(ya(),Cn.dark),ka=function(e){return r.a.createElement(ha,e)};function Ea(){var e=Object(On.a)(["\n    border-bottom: 1px solid ",";\n    padding-top: 1.4em;\n    margin-bottom: 1.4em;\n    width: 100%;\n  "]);return Ea=function(){return e},e}function Oa(){var e=Object(On.a)(["\n    border-bottom: 1px solid ",";\n    margin: 1.6em 0 0.5em;\n    width: 100%;\n  "]);return Oa=function(){return e},e}function xa(){var e=Object(On.a)([""]);return xa=function(){return e},e}var wa=function(e){var t=e.color,n=void 0===t?"grey":t,a=e.tall,o=e.right;return r.a.createElement(ua,Object.assign({style:{margin:0,lineHeight:a&&"2.6",textAlign:o&&"right"},color:n},e))},ja=function(e){var t=e.color,n=void 0===t?"dark":t,a=e.centered,o=void 0!==a&&a;return r.a.createElement(Tn,Object.assign({style:{margin:0,textAlign:o?"center":"left"},color:n},e,{ellipses:!0}))},_a=function(e){var t=e.style,n=e.label,a=e.placeholder,o=e.value,i=e.defaultValue,c=e.longText,l=e.type,s=void 0===l?"text":l,u=e.onChange,d=e.autoFocus,m=e.tabIndex,p=e.longTextHeight,g=void 0===p?"120px":p,f=Object(b.a)({display:"flex",flexDirection:"column"},t);return r.a.createElement("div",{style:f},n&&r.a.createElement(va,{htmlFor:n},n),c?r.a.createElement(ka,{id:n,value:o,placeholder:a,defaultValue:i,onChange:function(e){return u&&u(e.target.value)},tabIndex:m,rows:6,style:{maxHeight:g}}):r.a.createElement(ga,{id:n,type:s,value:o,placeholder:a,defaultValue:i,tabIndex:m,onChange:function(e){return u&&u(e.target.value)},autoFocus:d,className:e.className}))},Sa=function(e){var t=e.label,n=e.style,a=Object(b.a)({display:"flex",flexDirection:"column"},n);return r.a.createElement("div",{style:a},t&&r.a.createElement(va,{htmlFor:t},t),r.a.createElement(aa,e))},Ca=function(e){var t=e.label,n=e.value,a=e.labelColor,o=void 0===a?"grey":a,i=e.valueColor,c=void 0===i?"dark":i,l=In.a.div(xa());return r.a.createElement(l,{style:e.style},r.a.createElement(wa,{color:o},t),r.a.createElement(ja,{color:c},n))},Da=function(e){var t=e.title,n=e.style,a=In.a.div(Oa(),Cn.light);return r.a.createElement(a,{style:n},r.a.createElement(ma,{style:{marginBottom:3}},t))},Ia=function(e){var t=In.a.div(Ea(),Cn.light);return r.a.createElement(t,null)},Na=function(e){var t=e.rows,n=e.columns,a=e.columnTitles,o=void 0===a?[]:a,i=e.style,c=e.children;return r.a.createElement(la,{rows:t,columns:n,gap:"0.8em",style:Object(b.a)({minWidth:"100%"},i)},o.map(function(e,t){return r.a.createElement(wa,{style:{margin:0},key:t},e)}),c)},Ra=function(e){var t=e.side,n=void 0===t?24:t,a=e.fill,o=void 0===a?"#E92579":a;return r.a.createElement("svg",{width:n.toString(),height:n.toString(),viewBox:"0 0 ".concat(n," ").concat(n),fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M12 6L12 18",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.a.createElement("path",{d:"M6 12L18 12",stroke:o,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},Aa=n(30),Ta=n.n(Aa);function Ma(){var e=Object(On.a)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-size: ",";\n  text-align: center;\n  border: 1px solid ",";\n  border-radius: 0.25em;\n  height: 34px;\n  padding: 0 0.7em;\n  width: ",";\n  flex: 0 0 auto;\n\n  background: transparent;\n\n  img {\n    display: inline;\n    /* border: 1px solid red; */\n    margin: 0;\n  }\n\n  p {\n    margin: 0;\n    line-height: 1.3;\n    margin-left: 5px;\n  }\n\n  ","\n\n  cursor: pointer;\n  outline: none;\n  user-select: none;\n\n  animation: "," 1s 0.3s linear infinite;\n  animation-timing-function: ease-in-out;\n\n  &:active {\n    opacity: 0.8;\n  }\n\n  ","\n"]);return Ma=function(){return e},e}function Ba(){var e=Object(On.a)(["\n  50% {\n    opacity: .35;\n  }\n"]);return Ba=function(){return e},e}var La=Object(In.b)(Ba()),Fa=In.a.div(Ma(),function(e){return e.big?"1.2em":"1em"},Cn.light,function(e){return e.wide?"100%":"auto"},function(e){return e.primary&&"border-color: ".concat(Cn.accent_pink,";")},function(e){return e.loading&&La},function(e){return e.disabled&&"\n    opacity: 0.7;\n    cursor: not-allowed;\n  "}),Pa=function(e){var t=e.onClick,n=e.icon,a=e.iconComponent;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fa,Object.assign({onClick:t},e),a&&a(),n&&r.a.createElement("img",{src:n,alt:""}),r.a.createElement(Fn,{color:e.primary?"accent_pink":"grey"},e.children)))},qa=n(21),Va=n.n(qa);n(230),n(404);function za(){var e=Object(On.a)(["\n  width: 100%;\n  flex: 1 1 auto;\n  padding: 20px 20px 15px;\n  overflow: scroll;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  > * {\n  }\n"]);return za=function(){return e},e}function Ga(){var e=Object(On.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0 20px 15px;\n  padding-top: 20px;\n"]);return Ga=function(){return e},e}function Ua(){var e=Object(On.a)(["\n  background-color: white;\n  position: sticky;\n  top: 0;\n  border-radius: 0.25em 0.25em 0 0;\n  z-index: 1;\n  border-bottom: 1px solid ",";\n"]);return Ua=function(){return e},e}function Ha(){var e=Object(On.a)(["\n  display: flex;\n  flex-direction: column;\n  background-color: ",";\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n  border-radius: 0.5em;\n  box-shadow: 0px 13px 32px rgba(0, 0, 0, 0.22);\n"]);return Ha=function(){return e},e}var Ja=In.a.div(Ha(),Cn.lightest),Ka=In.a.div(Ua(),Cn.light),Ya=In.a.div(Ga()),Wa=In.a.div(za());function $a(){var e=Object(On.a)(["\n  flex: 1 0 1.5em;\n"]);return $a=function(){return e},e}var Qa=In.a.div($a());function Za(){var e=Object(On.a)(["\n  display: ",";\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n  flex-direction: row;\n  justify-content: center;\n  pointer-events: none;\n  z-index: 999;\n\n  .lds-ring {\n    display: inline-block;\n    position: relative;\n    width: 64px;\n    height: 64px;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n  .lds-ring div {\n    box-sizing: border-box;\n    display: block;\n    position: absolute;\n    width: 51px;\n    height: 51px;\n    margin: 6px;\n    border: 6px solid #E92579;\n    border-radius: 50%;\n    animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n    border-color: #E92579 transparent transparent transparent;\n  }\n  .lds-ring div:nth-child(1) {\n    animation-delay: -0.45s;\n  }\n  .lds-ring div:nth-child(2) {\n    animation-delay: -0.3s;\n  }\n  .lds-ring div:nth-child(3) {\n    animation-delay: -0.15s;\n  }\n  @keyframes lds-ring {\n    0% {\n      transform: rotate(0deg);\n    }\n    100% {\n      transform: rotate(360deg);\n    }\n  }\n\n"]);return Za=function(){return e},e}var Xa=In.a.div(Za(),function(e){return"true"===e.loading?"flex":"none"}),er=function(e){return r.a.createElement(Xa,{loading:e.loading},r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))};function tr(){var e=Object(On.a)(["\n\t\t\t\t\tcolor: #E92579;            \n\t\t\t\t\tmargin: 0.2em 0 0 0;\n\t\t\t\t\tpadding: 0 0.6em;\n\t\t\t\t\tfont-size: 0.8em;\n\t\t\t\t"]);return tr=function(){return e},e}var nr=function(e){var t=e.customerData,n=e.dispatch;return r.a.createElement(r.a.Fragment,null,r.a.createElement(_a,{label:"Name",value:t.name.value,onChange:function(e){return function(e){n({type:"select_customer_data",key:"name",value:{value:e,validate:0!==e.length}})}(e)},style:{width:"100%",marginTop:"1.4rem"},className:t.name.validate?"":"error"}),!t.name.validate&&r.a.createElement("p",{className:Object(xn.a)(tr())},"Company Name is required."),r.a.createElement(la,{columns:"1fr 1fr",style:{width:"100%",marginTop:"1.4rem"}},r.a.createElement(_a,{label:"Phone Number",value:t.phone.value,onChange:function(e){return n({type:"select_customer_data",key:"phone",value:{value:e}})}}),r.a.createElement(_a,{label:"Email",value:t.email.value,onChange:function(e){return n({type:"select_customer_data",key:"email",value:{value:e}})}})))},ar=n(37),rr=n(74),or=n(75),ir=n(79),cr=n(76),lr=n(78);function sr(e,t){var n,a=e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,");return"".concat((n=t,{CAD:"C$",USD:"$",EUR:"\u20ac",CRC:"\u20a1",GBP:"\xa3",ILS:"\u20aa",INR:"\u20b9",JPY:"\xa5",KRW:"\u20a9",NGN:"\u20a6",PHP:"\u20b1",PLN:"z\u0142",PYG:"\u20b2",THB:"\u0e3f",UAH:"\u20b4",VND:"\u20ab"}[n]||n)).concat(a)}function ur(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number(e).toLocaleString(void 0,{style:"percent",minimumFractionDigits:t})}function dr(){var e=Object(On.a)(["\n  background-color: #fff;\n  width: 75%;\n  margin: 0.5em auto;\n  padding: 4em 2em 2em;\n  position: relative;\n"]);return dr=function(){return e},e}function mr(){var e=Object(On.a)(["\n\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);    \n  text-align: center;\n  opacity: ",";\n  \n  .icon {\n    .border {\n      stroke: #87bbfd;\n      stroke-dasharray: 0;\n    }\n    .checkmark {\n      stroke: #87bbfd;\n      stroke-dasharray: 60;\n      stroke-dashoffset: ",";\n      transition: stroke-dashoffset 0.35s cubic-bezier(0.165, 0.84, 0.44, 1) 0.35s;\n    }\n  }\n\n  .title {\n    color: #87bbfd;\n  }\n\n  .message {\n    color: #87bbfd;\n  }\n\n  .reset {\n    path {\n      fill: #fff;\n    }\n  }\n  \n  &.submitting {\n    .icon {\n      .border {\n        stroke-dasharray: 251;\n        stroke-dashoffset: 62.75;\n        transform-origin: 50% 50%;\n        transition: stroke-dashoffset 0.35s cubic-bezier(0.165, 0.84, 0.44, 1);\n        animation: spin 1s linear infinite;\n      }\n    }\n  }\n"]);return mr=function(){return e},e}function pr(){var e=Object(On.a)(["\n  display: flex;    \n  justify-content: center;\n  width: 100%;\n  top: 100%;\n  margin-top: 20px;\n  left: 0;\n  padding: 0 15px;\n  font-size: 13px !important;\n  opacity: 0;\n  transform: translateY(10px);\n  transition-property: opacity, transform;\n  transition-duration: 0.35s;\n  transition-timing-function: cubic-bezier(0.165, 0.84, 0.44, 1);\n\n  &.visible {\n    opacity: 1;\n    transform: none;\n  }\n\n  svg {\n    margin-right: 10px;\n    .base {\n      fill: #7a98f5;\n    }\n    .glyph {\n      fill: white;\n    }\n  } \n\n  .message {\n    color: #7a98f5;\n  }\n"]);return pr=function(){return e},e}function gr(){var e=Object(On.a)(["\n  display: flex;\n  align-items: center;\n  margin-left: 15px;\n  border-top-color:rgb(129, 158, 252);\n  border-top-style:solid;\n  border-top-width:1px;\n  &:first-child {\n    border: none;\n  }\n\n  label {\n    font-size: 0.95em;\n    color: #95adf7;\n    min-width: 60px;\n    padding: 11px 0;    \n  }\n\n  input {\n    font-size: 0.95em;\n    background: transparent;\n    border: none;\n    outline: none;\n    color: white;\n    padding: 11px 0;    \n    width: 100%;\n    border: none !important;\n    &::placeholder {\n      color: #88bafa;\n    }\n\n    &:-webkit-autofill,\n    &:-webkit-autofill:hover,\n    &:-webkit-autofill:focus,\n    &:-webkit-autofill:active {\n      border: inherit;\n      -webkit-text-fill-color: white;      \n      transition: background-color 5000s ease-in-out 0s;\n      font-size: 0.95em;\n    }\n\n  }\n"]);return gr=function(){return e},e}function fr(){var e=Object(On.a)(["\n  background-color: #fff;\n  width: 100%;\n  transition-property: opacity, transform;\n  transition-duration: 0.35s;\n  transition-timing-function: cubic-bezier(0.165, 0.84, 0.44, 1);\n\n  &.success {\n    opacity: 0;\n    transform: scale(0.9);\n    pointer-events: none;\n  }\n\n  .StripeElement {\n    width: 100%;\n    padding: 11px 15px;\n    background-color: #7a98f5;\n    border-radius: 0.2em;  \n  }\n\n  .info-div {\n    padding: 0;\n    border-style: none;\n    background-color: #7795f8;\n    box-shadow: 0 6px 9px rgba(50, 50, 93, 0.06), 0 2px 5px rgba(0, 0, 0, 0.08), inset 0 1px 0 #829fff;\n    border-radius: 0.2em;\n    margin-bottom: 1.25em;    \n  }\n\n  .submit-button {\n    width: 100%;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 1em;\n    text-align: center;\n    border: 1px solid #E6E8E9;\n    border-radius: 0.25em;\n    height: 34px;\n    padding: 0 0.7em;\n    flex: 0 0 auto;\n    background: #ffffff;\n    color: #93989F;\n    box-shadow: 0px 1.5px 1px rgba(0,0,0,0.05);\n    border-color: #E92579;\n    background: #E92579;\n    box-shadow: 0px 2px 2px rgba(202,97,142,0.3);\n    cursor: pointer;\n    outline: none;\n    user-select: none;\n    animation: 1s 0.3s linear infinite;\n    animation-timing-function: ease-in-out;\n    color: white;\n    font-size: 0.9em;\n    font-weight: 400;\n    margin-top: 2.5em;\n    &:active {\n      opacity: 0.8;\n    }\n  }\n"]);return fr=function(){return e},e}var br=In.a.form(fr()),vr=In.a.div(gr()),yr=In.a.div(pr()),hr=In.a.div(mr(),function(e){return e.isSuccess?1:0},function(e){return e.isSuccess?"0 !important":"60"}),kr=function(e){function t(e){var n;return Object(rr.a)(this,t),(n=Object(ir.a)(this,Object(cr.a)(t).call(this,e))).changeCardElement=function(){n.setState({isValidate:!0,errMsg:""})},n.handleSubmit=function(e){e.preventDefault(),p.a.post("/bookings/createPaymentIntent",{payment_method_types:["card"],amount:100*n.props.chargeData.amount,currency:n.props.chargeData.currency,metadata:{name:e.target[0].value,email:e.target[1].value,tel:e.target[2].value}}).then(function(e){n.props.stripe.handleCardPayment(e.data.client_secret).then(function(e){e.error?n.setState({isValidate:!1,processing:!1,errMsg:e.error.message}):n.setState({isValidate:!0,processing:!1,errMsg:"",success:!0})})})},n.state={isValidate:!0,errMsg:"",success:!1},n}return Object(lr.a)(t,e),Object(or.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(br,{onSubmit:this.handleSubmit,isSuccss:this.state.success,className:this.state.success?"success":""},r.a.createElement("div",{className:"info-div"},r.a.createElement(vr,null,r.a.createElement("label",null,"Name"),r.a.createElement("input",{type:"text",placeholder:"Jane Doe",required:!0,autocomplete:"name",name:"name"})),r.a.createElement(vr,null,r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",placeholder:"janedoe@gmail.com",required:!0,autocomplete:"email",name:"email"})),r.a.createElement(vr,null,r.a.createElement("label",null,"Phone"),r.a.createElement("input",{type:"tel",placeholder:"(941) 555-0123",required:!0,autocomplete:"tel",name:"tel"}))),r.a.createElement(ar.CardElement,{hidePostalCode:!0,iconStyle:"solid",onChange:this.changeCardElement,style:{base:{iconColor:"#c4f0ff",color:"#fff",fontWeight:500,fontFamily:"Roboto, Open Sans, Segoe UI, sans-serif",fontSize:"16px",fontSmoothing:"antialiased",":-webkit-autofill":{color:"#fce883"},"::placeholder":{color:"#87BBFD"}},invalid:{iconColor:"#FFC7EE",color:"#FFC7EE"}}}),r.a.createElement("button",{className:"submit-button"},"Pay "+sr(this.props.chargeData.amount,this.props.chargeData.currency)),r.a.createElement(yr,{className:this.state.isValidate?"":"visible"},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"17",viewBox:"0 0 17 17"},r.a.createElement("path",{className:"base",fill:"#000",d:"M8.5,17 C3.80557963,17 0,13.1944204 0,8.5 C0,3.80557963 3.80557963,0 8.5,0 C13.1944204,0 17,3.80557963 17,8.5 C17,13.1944204 13.1944204,17 8.5,17 Z"}),r.a.createElement("path",{className:"glyph",fill:"#FFF",d:"M8.5,7.29791847 L6.12604076,4.92395924 C5.79409512,4.59201359 5.25590488,4.59201359 4.92395924,4.92395924 C4.59201359,5.25590488 4.59201359,5.79409512 4.92395924,6.12604076 L7.29791847,8.5 L4.92395924,10.8739592 C4.59201359,11.2059049 4.59201359,11.7440951 4.92395924,12.0760408 C5.25590488,12.4079864 5.79409512,12.4079864 6.12604076,12.0760408 L8.5,9.70208153 L10.8739592,12.0760408 C11.2059049,12.4079864 11.7440951,12.4079864 12.0760408,12.0760408 C12.4079864,11.7440951 12.4079864,11.2059049 12.0760408,10.8739592 L9.70208153,8.5 L12.0760408,6.12604076 C12.4079864,5.79409512 12.4079864,5.25590488 12.0760408,4.92395924 C11.7440951,4.59201359 11.2059049,4.59201359 10.8739592,4.92395924 L8.5,7.29791847 L8.5,7.29791847 Z"})),r.a.createElement("span",{className:"message"},this.state.errMsg))),r.a.createElement(hr,{isSuccess:this.state.success},r.a.createElement("div",{className:"icon"},r.a.createElement("svg",{width:"84px",height:"84px",viewBox:"0 0 84 84",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("circle",{className:"border",cx:"42",cy:"42",r:"40",strokeLinecap:"round",strokeWidth:"4",stroke:"#000",fill:"none"}),r.a.createElement("path",{className:"checkmark",strokeLinecap:"round",strokeLinejoin:"round",d:"M23.375 42.5488281 36.8840688 56.0578969 64.891932 28.0500338",strokeWidth:"4",stroke:"#000",fill:"none"}))),r.a.createElement("h3",{className:"title"},"Payment successful")))}}]),t}(r.a.Component),Er=Object(ar.injectStripe)(kr),Or=In.a.div(dr()),xr=(r.a.Component,n(23)),wr=n.n(xr);n(413);function jr(){var e=Object(On.a)(["\n                  color: #E92579;\n                  margin: 0.2em 0 0 0;\n                  padding: 0 0.6em;\n                  font-size: 0.8em;\n                "]);return jr=function(){return e},e}function _r(){var e=Object(On.a)(["\n                  color: #E92579;\n                  margin: 0.2em 0 0 0;\n                  padding: 0 0.6em;\n                  font-size: 0.8em;\n                "]);return _r=function(){return e},e}function Sr(){var e=Object(On.a)(["\n                  color: #E92579;\n                  margin: 0.2em 0 0 0;\n                  padding: 0 0.6em;\n                  font-size: 0.8em;\n                "]);return Sr=function(){return e},e}function Cr(){var e=Object(On.a)(["\n                  color: #E92579;\n                  margin: 0.2em 0 0 0;\n                  padding: 0 0.6em;\n                  font-size: 0.8em;\n                "]);return Cr=function(){return e},e}function Dr(){var e=Object(On.a)(["\n              color: #E92579;\n              margin: 0.2em 0 0 0;\n              padding: 0 0.6em;\n              font-size: 0.8em;\n            "]);return Dr=function(){return e},e}function Ir(){var e=Object(On.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return Ir=function(){return e},e}var Nr=In.a.div(Ir()),Rr=function(e){var t=e.booking,n=e.dispatch,o=Object(a.useContext)(fn).state,i=[{value:dn,label:"Create a new user"}].concat(Object(f.a)(t.customers.map(function(e){return{value:e.id,label:e.name}})));return null===t.ownerId&&n({type:"select_owner",value:o.auth.user.id}),Object(a.useEffect)(function(){if(null!==t.venueId){!function(){var e;l.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:He}),a.next=4,l.a.awrap(p.a.get("/spaces/venue/".concat(t.venueId)));case 4:e=a.sent,n({type:Je,payload:e.data.spaces}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),n({type:Ke});case 11:case"end":return a.stop()}},null,null,[[0,8]])}()}},[t.venueId]),r.a.createElement(r.a.Fragment,null,r.a.createElement(_a,{label:"Event Name",value:t.eventName,onChange:function(e){return n({type:"set_title",value:e})},style:{width:"100%"},className:t.validateForm.eventName?"":"error"}),!t.validateForm.eventName&&r.a.createElement("p",{className:Object(xn.a)(Dr())},"Booking Event Name is required."),r.a.createElement(la,{columns:"1fr 1fr",style:{width:"100%",marginTop:"1.4rem"}},r.a.createElement("div",null,r.a.createElement(Sa,{label:"Venue",selectedOption:t.venueId,options:t.venues.map(function(e){return e.id}),searchEnabled:!0,optionsForSearch:t.venues.map(function(e){return{value:e.id,label:e.name}}),displayTransformer:function(e){var n=t.venues.filter(function(t){return t.id===e});return n.length>0?n[0].name:null},onOptionSelected:function(e){return n({type:"select_venue",venue:e})},style:{width:"100%"},isValidate:t.validateForm.venueId}),!t.validateForm.venueId&&r.a.createElement("p",{className:Object(xn.a)(Cr())},"Venue is required.")),r.a.createElement("div",null,r.a.createElement(Sa,{label:"Space",selectedOption:t.spaceId,options:t.venueId&&t.spaces.map(function(e){return e.id}),displayTransformer:function(e){var n=t.spaces.filter(function(t){return t.id===e});return n.length>0?n[0].name:null},onOptionSelected:function(e){n({type:"select_space",space:e})},searchEnabled:!0,optionsForSearch:t.spaces.map(function(e){return{value:e.id,label:e.name}}),style:{width:"100%"},isValidate:t.validateForm.spaceId}),!t.validateForm.spaceId&&r.a.createElement("p",{className:Object(xn.a)(Sr())},"Space is required.")),r.a.createElement("div",null,r.a.createElement(Sa,{label:"Customer",options:i.map(function(e){return e.value}),optionsForSearch:i,selectedOption:t.customerId,displayTransformer:function(e){if(e===dn)return r.a.createElement("span",{className:"select-option-icon"},r.a.createElement(ra.a,{className:"fa-icons",icon:oa.h}),"Create a new user");if(-11===e)return r.a.createElement("span",{className:"select-option-icon"},r.a.createElement(ra.a,{className:"fa-icons",icon:oa.e}),"Casual User");var n=t.customers.filter(function(t){return t.id===e});return n.length>0?r.a.createElement("span",{className:"select-option-icon"},r.a.createElement(ra.a,{className:"fa-icons",icon:oa.g}),n[0].name):""},searchEnabled:!0,onOptionSelected:function(e){n({type:"select_customer",customer:e})},style:{width:"100%"},isValidate:t.validateForm.customerId}),!t.validateForm.customerId&&r.a.createElement("p",{className:Object(xn.a)(_r())},"Customer is required.")),r.a.createElement("div",null,r.a.createElement(Sa,{label:"Owner",options:[o.auth.user.id],selectedOption:t.ownerId,onOptionSelected:function(e){return n({type:"select_owner",value:e})},style:{width:"100%"},isValidate:t.validateForm.ownerId,displayTransformer:function(e){return e===o.auth.user.id?o.auth.user.lastName+" "+o.auth.user.firstName:""}}),!t.validateForm.ownerId&&r.a.createElement("p",{className:Object(xn.a)(jr())},"Owner is required."))),t.customerId===dn&&r.a.createElement(nr,{customerData:t.customerData,dispatch:n}),r.a.createElement(Da,{title:"Booking Slots"}),t.slots.length>0&&r.a.createElement(Na,{columns:"1fr 1fr 1fr auto",columnTitles:["Date","Start","End",""]},t.slots.map(function(e,t){switch(e.kind){case"multi-day":var a=new Date(e.dateRange[0]),o=new Date(e.dateRange[e.dateRange.length-1]);return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Va.a,{selected:a,startDate:a,endDate:o,selectsEnd:!0,onChange:function(e){return n({type:"update_multiday_slot_start",index:t,value:e})},dateFormat:"dd/MM/yyyy"}),r.a.createElement(Va.a,{selected:o,startDate:a,endDate:o,minDate:a,selectsEnd:!0,onChange:function(e){return n({type:"update_multiday_slot_end",index:t,value:e})},dateFormat:"dd/MM/yyyy"})),r.a.createElement(Va.a,{selected:k(new Date,e.startHour,e.startMinute),onChange:function(e){return n({type:"update_slot_start_time",index:t,key:"date",date:e})},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa"}),r.a.createElement(Va.a,{selected:k(new Date,e.endHour,e.endMinute),onChange:function(e){return n({type:"update_slot_end_time",index:t,key:"date",date:e})},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa"}),r.a.createElement(Nr,null,r.a.createElement(jn,{svg:Ta.a,width:20,height:20,onClick:function(){return n({type:"remove_slot",index:t})}})));case"single-day":return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(Va.a,{selected:new Date(e.date),onChange:function(e){return n({type:"update_slot",index:t,key:"date",value:e})},dateFormat:"dd/MM/yyyy"}),r.a.createElement(Va.a,{selected:k(new Date,e.startHour,e.startMinute),onChange:function(e){return n({type:"update_slot_start_time",index:t,key:"date",date:e})},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa"}),r.a.createElement(Va.a,{selected:k(new Date,e.endHour,e.endMinute),onChange:function(e){return n({type:"update_slot_end_time",index:t,key:"date",date:e})},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa"}),r.a.createElement(Nr,null,r.a.createElement(jn,{svg:Ta.a,width:20,height:20,onClick:function(){return n({type:"remove_slot",index:t})}})));default:throw new Error}}).flat()),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Pa,{style:{marginTop:10},onClick:function(){return n({type:"append_slot"})},iconComponent:function(){return r.a.createElement(Ra,{fill:Cn.grey})}},"Add Single Date"),r.a.createElement(Pa,{style:{marginTop:10,marginLeft:10},onClick:function(){return n({type:"append_slot_multi"})},iconComponent:function(){return r.a.createElement(Ra,{fill:Cn.grey})}},"Add Date Range")))};function Ar(e,t){switch(t.type){case Pe:return Object(b.a)({},e,{loadingBookingDetilas:!0});case qe:return Object(b.a)({},e,{loadingBookingDetilas:!1,customers:Object(f.a)(t.payload)});case Ve:return Object(b.a)({},e,{loadingBookingDetilas:!1});case ze:return Object(b.a)({},e,{loadingBookingDetilas:!0});case Ge:return Object(b.a)({},e,{loadingBookingDetilas:!1,venues:Object(f.a)(t.payload)});case Ue:return Object(b.a)({},e,{loadingBookingDetilas:!1});case He:return Object(b.a)({},e,{loadingBookingDetilas:!0});case Je:return Object(b.a)({},e,{loadingBookingDetilas:!1,spaces:Object(f.a)(t.payload)});case Ke:return Object(b.a)({},e,{loadingBookingDetilas:!1});case Qe:var n=Object(b.a)({},e.validateForm);return n[t.payload.key]=t.payload.value,Object(b.a)({},e,{validateForm:Object(b.a)({},n)});case"set_title":var a=Object(b.a)({},e.validateForm);return a.eventName=t.value.length>0,Object(b.a)({},e,{eventName:t.value,validateForm:Object(b.a)({},a)});case"update_slot":var r=e.slots[t.index];return r[t.key]=t.value,Object(b.a)({},e,{slots:[].concat(Object(f.a)(e.slots.slice(0,t.index)),[r],Object(f.a)(e.slots.slice(t.index+1)))});case"update_multiday_slot_start":var o=e.slots[t.index];return o.dateRange[0]=t.value,Object(b.a)({},e,{slots:[].concat(Object(f.a)(e.slots.slice(0,t.index)),[o],Object(f.a)(e.slots.slice(t.index+1)))});case"update_multiday_slot_end":var i=e.slots[t.index];return i.dateRange[1]=t.value,Object(b.a)({},e,{slots:[].concat(Object(f.a)(e.slots.slice(0,t.index)),[i],Object(f.a)(e.slots.slice(t.index+1)))});case"update_slot_start_time":var c=e.slots[t.index];return c.startHour=t.date.getHours(),c.startMinute=t.date.getMinutes(),Object(b.a)({},e,{slots:[].concat(Object(f.a)(e.slots.slice(0,t.index)),[c],Object(f.a)(e.slots.slice(t.index+1)))});case"update_slot_end_time":var l=e.slots[t.index];return l.endHour=t.date.getHours(),l.endMinute=t.date.getMinutes(),Object(b.a)({},e,{slots:[].concat(Object(f.a)(e.slots.slice(0,t.index)),[l],Object(f.a)(e.slots.slice(t.index+1)))});case"append_slot":return Object(b.a)({},e,{slots:[].concat(Object(f.a)(e.slots),[{kind:"single-day",date:t.date||(new Date).valueOf(),startHour:t.startDate&&t.startDate.getHours()||9,startMinute:t.startDate&&t.startDate.getMinutes()||0,endHour:t.endDate&&t.endDate.getHours()||18,endMinute:t.endDate&&t.endDate.getMinutes()||0}])});case"append_slot_multi":return Object(b.a)({},e,{slots:[].concat(Object(f.a)(e.slots),[{kind:"multi-day",dateRange:[new Date,E(new Date,1)],startHour:9,startMinute:0,endHour:18,endMinute:0}])});case"remove_slot":return Object(b.a)({},e,{slots:[].concat(Object(f.a)(e.slots.slice(0,t.index)),Object(f.a)(e.slots.slice(t.index+1)))});case"update_discount":return Object(b.a)({},e,{discount:Math.min(Math.max(t.value,0),99)});case"select_venue":var s=Object(b.a)({},e.validateForm);return s.venueId=null!==t.venue,Object(b.a)({},e,{venueId:t.venue,space:null,validateForm:Object(b.a)({},s)});case"select_space":var u=Object(b.a)({},e.validateForm);return u.spaceId=null!==t.space,Object(b.a)({},e,{spaceId:t.space,validateForm:u});case"select_customer":var d=Object(b.a)({},e.validateForm);d.customerId=null!==t.customer;var m=Object(b.a)({},e.customerData);return d.customerId>=0&&(m={name:{value:"",validate:!0},phone:{value:""},email:{value:""},address:{value:""},vatNumber:{value:""},note:{value:""}}),Object(b.a)({},e,{customerId:t.customer,validateForm:Object(b.a)({},d),customer:Object(b.a)({},m)});case"select_owner":var p=Object(b.a)({},e.validateForm);return p.ownerId=null!==t.owner,Object(b.a)({},e,{ownerId:t.value,validateForm:Object(b.a)({},p)});case"select_customer_data":var g=Object(b.a)({},e.customerData);return g[t.key]=t.value,Object(b.a)({},e,{customerData:Object(b.a)({},g)});default:throw new Error}}var Tr=function(e){var t=e.booking,n=e.onEndEditing,o=e.startDate,i=e.endDate,c=Object(a.useReducer)(Ar,Object(b.a)({},t,{loadingBookingDetilas:!1,customers:[],venues:[],spaces:[],owners:[],validateForm:{eventName:!0,venueId:!0,spaceId:!0,customerId:!0,ownerId:!0},customerData:{name:{value:"",validate:!0},phone:{value:""},email:{value:""},address:{value:""},vatNumber:{value:""},note:{value:""}}})),u=Object(s.a)(c,2),d=u[0],m=u[1];Object(a.useEffect)(function(){!function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,m({type:Pe}),t.next=4,l.a.awrap(p.a.get("/customers"));case 4:e=t.sent,m({type:qe,payload:e.data.customers}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),m({type:Ve});case 11:case"end":return t.stop()}},null,null,[[0,8]])}(),function(){var e,t;l.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,m({type:ze}),n.next=4,l.a.awrap(p.a.get("/venues"));case 4:e=n.sent,(t=e.data.venues).map(function(e){return e.spaces||(e.spaces=[]),e}),m({type:Ge,payload:t}),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),console.log("Get Venus Setting failed."),m({type:Ue});case 14:case"end":return n.stop()}},null,null,[[0,10]])}()},[]),Object(a.useEffect)(function(){o&&i&&(m({type:"remove_slot",index:0}),m({type:"append_slot",date:o,startDate:o,endDate:i}))},[o,i,m]);return r.a.createElement(Ja,null,r.a.createElement(er,{loading:d.loadingBookingDetilas.toString()}),r.a.createElement(Ka,null,r.a.createElement(Ya,null,r.a.createElement(Rn,null,d.eventName||"New Booking"),r.a.createElement("div",null,r.a.createElement(Gn,{style:{marginRight:10},onClick:function(){return n(null)}},"Cancel"),r.a.createElement(Gn,{primary:!0,style:{marginRight:10},onClick:function(){var e=!0;null!==d.validateForm.eventName&&0!==d.validateForm.eventName.length||(m({type:Qe,payload:{key:"eventName",value:!1}}),e=!1),null!==d.ownerId&&0!==d.ownerId.length||(m({type:Qe,payload:{key:"ownerId",value:!1}}),e=!1),0===d.venues.filter(function(e){return e.id===d.venueId}).length&&(m({type:Qe,payload:{key:"venueId",value:!1}}),e=!1),0===d.spaces.filter(function(e){return e.id===d.spaceId}).length&&(m({type:Qe,payload:{key:"spaceId",value:!1}}),e=!1),0===d.customers.filter(function(e){return e.id===d.customerId}).length&&d.customerId!==dn&&(m({type:Qe,payload:{key:"customerId",value:!1}}),e=!1),d.customerId===dn&&0===d.customerData.name.value.length&&(e=!1,m({type:"select_customer_data",key:"name",value:{value:"",validate:!1}})),e&&n(d)}},"Save")))),r.a.createElement(Wa,null,r.a.createElement(Rr,{booking:d,dispatch:m}),r.a.createElement(Qa,null)))};function Mr(e,t){var n=h()(e).format("LT"),a=h()(t).format("LT");return n.indexOf("AM")>-1&&a.indexOf("AM")>-1&&(n=n.replace(" AM","")),n.indexOf("PM")>-1&&a.indexOf("PM")>-1&&(n=n.replace(" PM","")),"".concat(n," - ").concat(a).toLowerCase()}function Br(e){return h()(e).format("MMMM D, YYYY")}function Lr(e,t){return Mr(k(e,t.startHour,t.startMinute),k(e,t.endHour,t.endMinute))}var Fr=function(e){var t,n=e.booking;return r.a.createElement(r.a.Fragment,null,r.a.createElement(la,{columns:"1fr 1fr"},r.a.createElement(Ca,{style:{color:"".concat((t=n,t.status&&t.status.name?yn(t.status.name):yn("")),"} !important")},label:"Venue (Space)",value:function(e){return(e.venue&&e.venue.name?e.venue.name:"")+"("+(e.space&&e.space.name?e.space.name:"")+")"}(n)}),r.a.createElement(Ca,{label:"Customer",value:n.customer&&n.customer.name?n.customer.name:""})),r.a.createElement(Da,{title:"Booking Slots"}),r.a.createElement(Na,{columns:"20% auto",columnTitles:["Date","Time"]},n.slots.map(function(e){switch(e.kind){case"multi-day":return e.dateRange.map(function(t){return r.a.createElement(r.a.Fragment,{key:n.id+t.toString()},r.a.createElement(ja,null,Br(t)),r.a.createElement(ja,null,Lr(t,e)))});case"single-day":return r.a.createElement(r.a.Fragment,{key:n.id+e.date.toString()},r.a.createElement(ja,null,Br(e.date)),r.a.createElement(ja,null,Lr(e.date,e)));default:throw new Error}}).flat()))},Pr=n(141),qr=n.n(Pr),Vr=n(328),zr=n.n(Vr);function Gr(){var e=Object(On.a)(["\n  display: ",";\n  position: absolute;\n  background-color: #f9f9f9;\n  right: 0;\n  max-height: 250px;\n  overflow-y: scroll;\n  z-index: 1;\n  background: #ffffff;\n  color: ",";\n  box-shadow: 0px 1.5px 1px rgba(0, 0, 0, 0.05);\n  padding: 5px 10px;\n  border: 1px solid ",";\n  border-radius: 0.25em;\n  user-select: none;\n\n  p {\n    cursor: pointer;\n    :hover {\n      opacity: 0.7;\n    }\n    :last-child {\n      margin-bottom: 0;\n    }\n  }\n"]);return Gr=function(){return e},e}function Ur(){var e=Object(On.a)(["\n  position: relative;\n  display: inline-block;\n\n  input {\n    width: 80%;\n    font-size: 0.9em;\n    border: none;\n\n    :focus {\n      outline-style: none;\n      box-shadow: none;\n      border-color: transparent;\n    }\n  }\n"]);return Ur=function(){return e},e}var Hr=In.a.div(Ur()),Jr=In.a.div(Gr(),function(e){return e.show?"aboslute":"none"},Cn.grey,Cn.light),Kr=function(e){var t=e.items,n=void 0===t?[]:t,o=e.colors,c=void 0===o?null:o,l=e.displayTransformer,u=void 0===l?null:l,d=e.onItemSelected,m=Object(a.useState)(!1),p=Object(s.a)(m,2),g=p[0],f=p[1],b=Object(a.useRef)(null);Object(a.useEffect)(function(){var e=function(e){b.current&&(i.a.findDOMNode(b.current).contains(e.target)||g&&f(!1))};return document.addEventListener("click",e,!1),function(){document.removeEventListener("click",e,!1)}},[b,g]);return r.a.createElement(Hr,{ref:b},r.a.createElement(jn,{size:24,svg:zr.a,onClick:function(){f(!g)}}),r.a.createElement(Jr,{show:g},n&&n.map(function(e,t){var n=c&&c[t];return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement(Fn,{style:{marginRight:10,color:n},onClick:function(){f(!g),d(e)}},u?u(e):e))})))},Yr=n(98);function Wr(){var e=Object(On.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return Wr=function(){return e},e}var $r=In.a.div(Wr()),Qr=function(e){var t=e.booking,n=e.quoteId,o=e.onEndEditing,i=Object(a.useContext)(fn),c=i.state,u=i.dispatch,d=Object(a.useState)({}),m=Object(s.a)(d,2),g=m[0],v=m[1],y=Object(a.useState)(0),h=Object(s.a)(y,2),E=h[0],O=h[1],x=Object(a.useState)(0),_=Object(s.a)(x,2),S=_[0],C=_[1],D=Object(a.useState)(0),I=Object(s.a)(D,2),N=I[0],R=I[1],A=Object(a.useState)(!0),T=Object(s.a)(A,2),M=T[0],B=T[1];Object(a.useEffect)(function(){if(-1===n)v(Object(b.a)({},function(e){return{id:-1,createdAt:new Date,slots:Array.from(e.slots)||[],costItems:[],value:0,discount:0,note:""}}(t)));else{var e=c.bookings.quotes.filter(function(e){return e.id===n});v(Object(b.a)({},e[0]))}B(!1)},[]),Object(a.useEffect)(function(){if(g.costItems&&g.discount){var e=j(g.costItems,g.discount),t=Object(s.a)(e,3),n=t[0],a=t[1],r=t[2];O(n),C(a),R(r)}},[g.costItems,g.discount]);var L=function(e){if("quote_update_slot"===e.type){var t=Object(b.a)({},g);t.slots[e.index][e.key]=e.value,v(Object(b.a)({},t))}else if("quote_update_multiday_slot_start"===e.type)v(Object(b.a)({},g,{slots:g.slots.map(function(t,n){return n===e.index&&(t.dateRange[0]=e.value),t})}));else if("quote_update_multiday_slot_end"===e.type)v(Object(b.a)({},g,{slots:g.slots.map(function(t,n){return n===e.index&&(t.dateRange[1]=e.value),t})}));else if("quote_update_slot_start_time"===e.type)v(Object(b.a)({},g,{slots:g.slots.map(function(t,n){return n===e.index&&(t.startHour=e.date.getHours(),t.startMinute=e.date.getMinutes()),t})}));else if("quote_update_slot_end_time"===e.type)v(Object(b.a)({},g,{slots:g.slots.map(function(t,n){return n===e.index&&(t.endHour=e.date.getHours(),t.endMinute=e.date.getMinutes()),t})}));else if("quote_append_slot"===e.type)v(Object(b.a)({},g,{slots:[].concat(Object(f.a)(g.slots),[{kind:"single-day",date:e.date||new Date,startHour:e.startDate&&e.startDate.getHours()||9,startMinute:e.startDate&&e.startDate.getMinutes()||0,endHour:e.endDate&&e.endDate.getHours()||18,endMinute:e.endDate&&e.endDate.getMinutes()||0}])}));else if("quote_append_slot_multi"===e.type)v(Object(b.a)({},g,{slots:[].concat(Object(f.a)(g.slots),[{kind:"multi-day",dateRange:[new Date,Object(Yr.default)(new Date,1)],startHour:9,startMinute:0,endHour:18,endMinute:0}])}));else if("quote_remove_slot"===e.type)v(Object(b.a)({},g,{slots:g.slots.filter(function(t,n){return n!==e.index})}));else if("update_cost_item"===e.type){var n=Object(f.a)(g.costItems);n[e.index][e.key]=e.value,v(Object(b.a)({},g,{costItems:Object(f.a)(n)}))}else if("remove_cost_item"===e.type)v(Object(b.a)({},g,{costItems:Object(f.a)(g.costItems.filter(function(t,n){return n!==e.index}))}));else if("append_cost_item"===e.type)v(Object(b.a)({},g,{costItems:[].concat(Object(f.a)(g.costItems),[w({vatRate:e.vatRate})])}));else if("quote_update_discount"===e.type){var a=0;try{a=parseInt(e.value)}catch(o){a=0}v(Object(b.a)({},g,{discount:a,discountText:e.value}))}else if("set_quote_value"===e.type){var r=Object(b.a)({},g);r[e.key]=e.value,v(Object(b.a)({},r))}};return r.a.createElement(Ja,null,r.a.createElement(er,{loading:M.toString()}),r.a.createElement(Ka,null,r.a.createElement(Ya,null,r.a.createElement(Rn,{style:{margin:0}},-1===n?"New Quote":"Quote "+n," \u2013 ",Br(g.createdAt)),r.a.createElement("div",null,r.a.createElement(Gn,{style:{marginRight:10},onClick:function(){return o(null)}},"Cancel"),r.a.createElement(Gn,{primary:!0,style:{marginRight:10},onClick:function(){return function(){var e,a,r;return l.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(e={headers:{"Content-Type":"application/json"}},i.prev=1,-1!==n){i.next=9;break}return i.next=5,l.a.awrap(p.a.post("/bookings/".concat(t.id,"/quotes"),{slots:JSON.stringify(g.slots),costItems:JSON.stringify(g.costItems),value:g.value,discount:g.discount,note:g.note},e));case 5:a=i.sent,u({type:nt,payload:a.data.quote}),i.next=13;break;case 9:return i.next=11,l.a.awrap(p.a.put("/bookings/".concat(t.id,"/quotes/").concat(n),{slots:JSON.stringify(g.slots),costItems:JSON.stringify(g.costItems),value:g.value,discount:g.discount,note:g.note},e));case 11:r=i.sent,u({type:ot,payload:r.data.quote});case 13:i.next=17;break;case 15:i.prev=15,i.t0=i.catch(1);case 17:o(!1);case 18:case"end":return i.stop()}},null,null,[[1,15]])}()}},"Save")))),r.a.createElement(Wa,null,r.a.createElement(Da,{title:"Booking Slots"}),g.slots&&g.slots.length>0&&r.a.createElement(Na,{columns:"1fr 1fr 1fr auto",columnTitles:["Date","Start","End",""]},g.slots.map(function(e,n){switch(e.kind){case"multi-day":var a=new Date(e.dateRange[0]),o=new Date(e.dateRange[e.dateRange.length-1]);return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Va.a,{selected:a,startDate:a,endDate:o,selectsEnd:!0,onChange:function(e){return L({type:"quote_update_multiday_slot_start",booking:t.id,index:n,value:e})},dateFormat:"dd/MM/yyyy"}),r.a.createElement(Va.a,{selected:o,startDate:a,endDate:o,minDate:a,selectsEnd:!0,onChange:function(e){return L({type:"quote_update_multiday_slot_end",booking:t.id,index:n,value:e})},dateFormat:"dd/MM/yyyy"})),r.a.createElement(Va.a,{selected:k(new Date,e.startHour,e.startMinute),onChange:function(e){return L({type:"quote_update_slot_start_time",booking:t.id,index:n,key:"date",date:e})},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa"}),r.a.createElement(Va.a,{selected:k(new Date,e.endHour,e.endMinute),onChange:function(e){return L({type:"quote_update_slot_end_time",booking:t.id,index:n,key:"date",date:e})},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa"}),r.a.createElement($r,null,r.a.createElement(jn,{svg:Ta.a,width:20,height:20,onClick:function(){return L({type:"quote_remove_slot",booking:t.id,index:n})}})));case"single-day":return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(Va.a,{selected:new Date(e.date),onChange:function(e){return L({type:"quote_update_slot",booking:t.id,index:n,key:"date",value:e})},dateFormat:"dd/MM/yyyy"}),r.a.createElement(Va.a,{selected:k(new Date,e.startHour,e.startMinute),onChange:function(e){return L({type:"quote_update_slot_start_time",booking:t.id,index:n,key:"date",date:e})},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa"}),r.a.createElement(Va.a,{selected:k(new Date,e.endHour,e.endMinute),onChange:function(e){return L({type:"quote_update_slot_end_time",booking:t.id,index:n,key:"date",date:e})},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa"}),r.a.createElement($r,null,r.a.createElement(jn,{svg:Ta.a,width:20,height:20,onClick:function(){return L({type:"quote_remove_slot",booking:t.id,index:n})}})));default:throw new Error}}).flat()),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Pa,{style:{marginTop:10},onClick:function(){return L({type:"quote_append_slot"})},iconComponent:function(){return r.a.createElement(Ra,{fill:Cn.grey})}},"Add Single Date"),r.a.createElement(Pa,{style:{marginTop:10,marginLeft:10},onClick:function(){return L({type:"quote_append_slot_multi"})},iconComponent:function(){return r.a.createElement(Ra,{fill:Cn.grey})}},"Add Date Range")),r.a.createElement(Da,{title:"Cost Items"}),g.costItems&&g.costItems.length>0&&r.a.createElement(Na,{columns:"2fr 2fr 0.5fr 0.8fr 1fr 1fr auto",columnTitles:["Name","Description","Quantity","VAT Rate (%)","Unit Price","Total",""]},g.costItems.map(function(e,n){return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(_a,{value:e.name,placeholder:"Item Name",tabIndex:"0",onChange:function(e){return L({type:"update_cost_item",key:"name",value:e,booking:t.id,index:n})}}),r.a.createElement(_a,{value:e.description,placeholder:"Description",tabIndex:"1",onChange:function(e){return L({type:"update_cost_item",key:"description",value:e,booking:t.id,index:n})}}),r.a.createElement(_a,{value:e.quantity,placeholder:"Quantity",type:"number",onChange:function(e){return L({type:"update_cost_item",key:"quantity",value:e,booking:t.id,index:n})}}),r.a.createElement(_a,{value:e.vatRateText,placeholder:"VAT",type:"number",onChange:function(e){L({type:"update_cost_item",key:"vatRate",value:e&&e.length&&parseFloat(e).toFixed(2)||0,booking:t.id,index:n}),L({type:"update_cost_item",key:"vatRateText",value:e,booking:t.id,index:n})}}),r.a.createElement(_a,{value:e.unitPrice,placeholder:"Unit Price",type:"number",onChange:function(e){return L({type:"update_cost_item",key:"unitPrice",value:e,booking:t.id,index:n})}}),r.a.createElement(ja,null,sr(e.unitPrice*e.quantity*(1+e.vatRate/100),c.settings.companyInfo.currency)),r.a.createElement($r,null,r.a.createElement(jn,{svg:Ta.a,width:20,height:20,onClick:function(){return L({type:"remove_cost_item",booking:t.id,index:n})}})))})),r.a.createElement(Pa,{style:{marginTop:10},onClick:function(){return L({type:"append_cost_item",booking:t.id,vatRate:c.settings.companyInfo.vatRate})},iconComponent:function(){return r.a.createElement(Ra,{fill:Cn.grey})}},"Add Cost Item"),g.costItems&&g.costItems.length>0&&r.a.createElement(Na,{rows:"20px 20px 20px 20px",columns:"5fr 1fr 1fr",style:{marginTop:"1em"}},r.a.createElement("span",null,"\xa0"),r.a.createElement(wa,null,"Net subtotal"),r.a.createElement(ja,null,sr(E,"GBP")),r.a.createElement("span",null,"\xa0"),r.a.createElement(wa,null,"Discount (%)"),r.a.createElement("input",{style:{fontFamily:"Circular Std",fontSize:"0.9em",width:80,padding:3},type:"number",value:t.discountText||g.discount||"",placeholder:"Discount",onChange:function(e){return L({type:"quote_update_discount",booking:t.id,value:e.target.value})}}),r.a.createElement("span",null,"\xa0"),r.a.createElement(wa,null,"Taxes"),r.a.createElement(ja,null,sr(S,"GBP")),r.a.createElement("span",null,"\xa0"),r.a.createElement(wa,null,"Grand Total"),r.a.createElement(ja,null,sr(N,"GBP"))),r.a.createElement(Da,{title:"Notes"}),r.a.createElement(_a,{placeholder:"Optionally leave a note for the customer",value:g.note?g.note:"",longText:!0,style:{width:"100%"},onChange:function(e){L({type:"set_quote_value",booking:t.id,key:"note",value:e})}})))};function Zr(){var e=Object(On.a)(["\n          height: 100%;\n        "]);return Zr=function(){return e},e}var Xr=function(e){var t=e.booking,n=e.onQuoteConverted,o=Object(a.useContext)(fn),i=o.state,c=o.dispatch,u=Object(a.useState)(null),d=Object(s.a)(u,2),m=d[0],g=d[1];return r.a.createElement(r.a.Fragment,null,null!==m&&r.a.createElement(Dn,{isOpen:!0,onClose:function(){g(null)}},r.a.createElement(Qr,{booking:t,quoteId:m,onEndEditing:function(){g(null)}})),r.a.createElement("div",{className:Object(xn.a)(Zr())},i.bookings.quotes.length>0&&r.a.createElement(Na,{columns:"50px 120px 100px 120px",columnTitles:["ID","createdAt","Value",""]},i.bookings.quotes.map(function(e,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(ja,null,a+1),r.a.createElement(ja,null,Br(e.createdAt)),r.a.createElement(ja,null,sr(e.value,i.settings.companyInfo.currency)),r.a.createElement(Kr,{items:["Edit","Export","Convert to Invoice","Delete"],colors:[Cn.grey,Cn.grey,Cn.grey,"#D13636"],onItemSelected:function(r){switch(r){case"Delete":return o=t.id,i=e.id,l.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({type:ct}),e.next=4,l.a.awrap(p.a.delete("/bookings/".concat(o,"/quotes/").concat(i)));case 4:e.sent,c({type:lt,payload:i}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),c({type:st});case 11:case"end":return e.stop()}},null,null,[[0,8]]);case"Edit":g(e.id);break;case"Convert to Invoice":n&&n(),setTimeout(function(){return c({type:"convert_quote_to_invoice",booking:t.id,quote:a})},300);break;case"Export":break;default:throw new Error}var o,i}}))})),r.a.createElement("br",null),r.a.createElement(Pa,{primary:!0,icon:qr.a,onClick:function(){g(-1)}},"New Quote")))},eo=n(55),to=n(56),no=n.n(to),ao=["Paid","Pending","Unpaid"],ro=["#52DDC2","#F68F56","#E92579"],oo=["Cash","Cheque","Online Payment"];var io=function(e,t){switch(t.type){case"update_value":return Object(b.a)({},e,Object(eo.a)({},t.key,t.value));case"update_slot":var n=Object(b.a)({},e);return e.slots[t.index][t.key]=t.value,n;case"update_multiday_slot_start":var a=Object(b.a)({},e);return e.slots[t.index].dateRange[0]=t.value,a;case"update_multiday_slot_end":var r=Object(b.a)({},e);return e.slots[t.index].dateRange[1]=t.value,r;case"update_slot_start_time":var o=Object(b.a)({},e),i=e.slots[t.index];return i.startHour=t.date.getHours(),i.startMinute=t.date.getMinutes(),o;case"update_slot_end_time":var c=Object(b.a)({},e),l=e.slots[t.index];return l.endHour=t.date.getHours(),l.endMinute=t.date.getMinutes(),c;case"append_slot":var s=Object(b.a)({},e);return s.slots.push({kind:"single-day",date:t.date||new Date,startHour:t.startDate&&t.startDate.getHours()||9,startMinute:t.startDate&&t.startDate.getMinutes()||0,endHour:t.endDate&&t.endDate.getHours()||18,endMinute:t.endDate&&t.endDate.getMinutes()||0}),s;case"append_slot_multi":var u=Object(b.a)({},e);return u.slots.push({kind:"multi-day",dateRange:[new Date,Object(Yr.default)(new Date,1)],startHour:9,startMinute:0,endHour:18,endMinute:0}),u;case"remove_slot":var d=Object(b.a)({},e);return d.slots.splice(e.index,1),d;case"append_cost_item":var m=Object(b.a)({},e);return m.costItems.push(w({vatRate:t.vatRate})),m.grand_total=j(m.costItems,m.discount)[2],m;case"remove_cost_item":var p=Object(b.a)({},e);return p.costItems.splice(t.index,1),p.grand_total=j(p.costItems,p.discount)[2],p;case"update_cost_item":var g=Object(b.a)({},e),v=e.costItems[t.index];return v[t.key]=t.value,g.costItems=Object(f.a)(g.costItems.map(function(e,n){return n===t.index?v:e})),g.grand_total=j(g.costItems,g.discount)[2],g;case"update_discount":var y=Object(b.a)({},e);if(t.value&&t.value.length)try{y.discount=parseInt(t.value)}catch(E){y.discount=0}else y.discount=0;return y.discountText=t.value,y.grand_total=j(y.costItems,y.discount)[2],y;case"update_total":var h=Object(b.a)({},e),k=j(e.costItems,e.discount)[2];return h.grand_total=k,h;default:throw new Error}};function co(){var e=Object(On.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return co=function(){return e},e}var lo=In.a.div(co()),so=function(e){var t=e.invoice,n=e.onEndEditing,o=Object(a.useContext)(fn).state,i=Object(a.useReducer)(io,t),c=Object(s.a)(i,2),l=c[0],u=c[1],d=j(l.costItems,l.discount),m=Object(s.a)(d,3),p=m[0],g=m[1],f=m[2];return r.a.createElement(Ja,null,r.a.createElement(Ka,null,r.a.createElement(Ya,null,r.a.createElement(Rn,{style:{margin:0}},"Invoice #",l.number||e.invoice.coordinates.index+1),r.a.createElement("div",null,r.a.createElement(Gn,{style:{marginRight:10},onClick:function(){return n(l,!1)}},"Cancel"),r.a.createElement(Gn,{primary:!0,style:{marginRight:10},onClick:function(){return n(l,!0)}},"Save")))),r.a.createElement(Wa,null,r.a.createElement(er,{loading:o.bookings.loadingInvoice.toString()}),r.a.createElement(la,{columns:"1fr 1fr",style:{width:"100%"}},r.a.createElement(Ca,{label:"Created",value:Br(l.created)}),r.a.createElement(Ca,{label:"Booking",value:function(e){var t=o.bookings.bookings.filter(function(t){return t.id===e});return t.length>0?t[0].eventName:""}(l.booking.id)}),r.a.createElement(Ca,{label:"Customer",value:l.booking.customer.name}),r.a.createElement(Sa,{label:"Payment Method",options:oo,selectedOption:l.payment_method,onOptionSelected:function(e){u({type:"update_value",key:"payment_method",value:e})}})),r.a.createElement(Da,{title:"Booking Slots"}),l.slots&&l.slots.length>0&&r.a.createElement(Na,{columns:"1fr 1fr 1fr auto",columnTitles:["Date","Start","End",""]},l.slots.map(function(e,t){switch(e.kind){case"multi-day":var n=e.dateRange[0],a=e.dateRange[e.dateRange.length-1];return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Va.a,{selected:new Date(n).getTime(),startDate:n,endDate:a,selectsEnd:!0,onChange:function(e){u({type:"update_multiday_slot_start",index:t,value:e})},dateFormat:"dd/MM/yyyy"}),r.a.createElement(Va.a,{selected:new Date(a).getTime(),startDate:n,endDate:a,minDate:n,selectsEnd:!0,onChange:function(e){u({type:"update_multiday_slot_end",index:t,value:e})},dateFormat:"dd/MM/yyyy"})),r.a.createElement(Va.a,{selected:k(new Date,e.startHour,e.startMinute),onChange:function(e){u({type:"update_slot_start_time",index:t,key:"date",date:e})},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa"}),r.a.createElement(Va.a,{selected:k(new Date,e.endHour,e.endMinute),onChange:function(e){u({type:"update_slot_end_time",index:t,key:"date",date:e})},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa"}),r.a.createElement(lo,null,r.a.createElement(jn,{svg:Ta.a,width:20,height:20,onClick:function(){u({type:"remove_slot",index:t})}})));case"single-day":return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(Va.a,{selected:new Date(e.date).getTime(),onChange:function(e){u({type:"update_slot",index:t,key:"date",value:e})},dateFormat:"dd/MM/yyyy"}),r.a.createElement(Va.a,{selected:k(new Date,e.startHour,e.startMinute),onChange:function(e){u({type:"update_slot_start_time",index:t,key:"date",date:e})},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa"}),r.a.createElement(Va.a,{selected:k(new Date,e.endHour,e.endMinute),onChange:function(e){u({type:"update_slot_end_time",index:t,key:"date",date:e})},showTimeSelect:!0,showTimeSelectOnly:!0,timeIntervals:15,dateFormat:"h:mm aa"}),r.a.createElement(lo,null,r.a.createElement(jn,{svg:Ta.a,width:20,height:20,onClick:function(){u({type:"remove_slot",index:t})}})));default:throw new Error}}).flat()),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Pa,{style:{marginTop:10},onClick:function(){u({type:"append_slot"})},iconComponent:function(){return r.a.createElement(Ra,{fill:Cn.grey})}},"Add Single Date"),r.a.createElement(Pa,{style:{marginTop:10,marginLeft:10},onClick:function(){u({type:"append_slot_multi"})},iconComponent:function(){return r.a.createElement(Ra,{fill:Cn.grey})}},"Add Date Range")),r.a.createElement(Da,{title:"Cost Items"}),l.costItems&&l.costItems.length>0&&r.a.createElement(Na,{columns:"2fr 2fr 0.5fr 0.8fr 1fr 1fr auto",columnTitles:["Name","Description","Quantity","VAT Rate (%)","Unit Price","Total",""]},l.costItems&&l.costItems.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(_a,{value:e.name,placeholder:"Item Name",tabIndex:"0",onChange:function(e){return u({type:"update_cost_item",key:"name",value:e,index:t})}}),r.a.createElement(_a,{value:e.description,placeholder:"Description",tabIndex:"1",onChange:function(e){return u({type:"update_cost_item",key:"description",value:e,index:t})}}),r.a.createElement(_a,{value:e.quantity,placeholder:"Quantity",type:"number",onChange:function(e){u({type:"update_cost_item",key:"quantity",value:e,index:t})}}),r.a.createElement(_a,{value:e.vatRateText,placeholder:"VAT",type:"number",onChange:function(e){u({type:"update_cost_item",key:"vatRate",value:e&&e.length&&parseFloat(e).toFixed(2)||0,index:t}),u({type:"update_cost_item",key:"vatRateText",value:e,index:t})}}),r.a.createElement(_a,{value:e.unitPrice,placeholder:"Unit Price",type:"number",onChange:function(e){u({type:"update_cost_item",key:"unitPrice",value:e,index:t})}}),r.a.createElement(ja,null,sr(e.unitPrice*e.quantity*(1+e.vatRate/100),o.settings.companyInfo.currency)),r.a.createElement(lo,null,r.a.createElement(jn,{svg:Ta.a,width:20,height:20,onClick:function(){u({type:"remove_cost_item",index:t})}})))})),r.a.createElement(Pa,{style:{marginTop:10},onClick:function(){u({type:"append_cost_item",vatRate:o.settings.companyInfo.vatRate})},iconComponent:function(){return r.a.createElement(Ra,{fill:Cn.grey})}},"Add Cost Item"),r.a.createElement(Na,{rows:"auto auto auto auto",columns:"4fr 1fr",gap:"0.8em",style:{marginTop:"2em"}},r.a.createElement(wa,{tall:!0,right:!0},"Net subtotal"),r.a.createElement(ja,null,sr(p||0,o.settings.companyInfo.currency)),r.a.createElement(wa,{tall:!0,right:!0},"Discount (%)"),r.a.createElement("input",{style:{fontFamily:"Circular Std",fontSize:"0.9em",width:80,padding:3},type:"number",value:l.discountText||l.discount||"",placeholder:"Discount",onChange:function(e){return u({type:"update_discount",value:e.target.value})}}),r.a.createElement(wa,{tall:!0,right:!0},"Taxes"),r.a.createElement(ja,null,sr(g||0,o.settings.companyInfo.currency)),r.a.createElement(wa,{tall:!0,right:!0},"Grand Total"),r.a.createElement(ja,null,sr(f||0,o.settings.companyInfo.currency)))))},uo=function(e){var t=e.invoice,n=e.handleUpdate,o=Object(a.useState)(!1),i=Object(s.a)(o,2),c=i[0],l=i[1],u=Object(a.useContext)(fn),d=u.state,m=u.dispatch;if(!t)return null;var p=d.bookings.bookings&&d.bookings.bookings.find(function(e){return e.id===t.booking}),g=Object(b.a)({},d.bookings.invoices[t.index],{coordinates:t,booking:p});if(c)return r.a.createElement(so,{invoice:g,onEndEditing:function(e,t){t&&n(e,t),l(!1)}});var f=j(g.costItems,g.discount),v=Object(s.a)(f,3),y=v[0],h=v[1],k=v[2];return r.a.createElement(Ja,null,r.a.createElement(Ka,null,r.a.createElement(Ya,null,r.a.createElement(Rn,{style:{margin:0}},"Invoice #",e.invoice.index+1),r.a.createElement("div",null,r.a.createElement(aa,{style:{minWidth:80,marginRight:10},options:ao,colors:ro,selectedOption:g.status,onOptionSelected:function(e){m(Object(b.a)({type:"update_invoice_status"},g.coordinates,{status:e})),n(g,!0,e)}}),r.a.createElement(Gn,{style:{marginRight:10}},"Export"),r.a.createElement(Gn,{primary:!0,style:{marginRight:10},onClick:function(){return l(!c)}},"Edit")))),r.a.createElement(Wa,null,r.a.createElement(la,{columns:"1fr 1fr",style:{width:"100%"}},r.a.createElement(Ca,{label:"Created",value:Br(g.created)}),r.a.createElement(Ca,{label:"Booking",value:function(e){var t=d.bookings.bookings.filter(function(t){return t.id===e});return t.length>0?t[0].eventName:""}(g.BookingId)}),r.a.createElement(Ca,{label:"Customer",value:g.customerId&&d.customers.customers&&d.customers.customers.find(function(e){return e.id===g.customerId})&&d.customers.customers.find(function(e){return e.id===g.customerId}).name||"N/A"}),r.a.createElement(Ca,{label:"Payment Method",value:g.payment_method||"N/A"})),r.a.createElement(Da,{title:"Booking Slots"}),r.a.createElement(Na,{columns:"20% auto",columnTitles:["Date","Time"]},g.slots.length>0&&g.slots.map(function(e){switch(e.kind){case"multi-day":return e.dateRange.map(function(t){return r.a.createElement(r.a.Fragment,{key:g.number+t.toString()},r.a.createElement(ja,null,Br(t)),r.a.createElement(ja,null,Lr(t,e)))});case"single-day":return r.a.createElement(r.a.Fragment,{key:g.number+e.date.toString()},r.a.createElement(ja,null,Br(e.date)),r.a.createElement(ja,null,Lr(e.date,e)));default:throw new Error}}).flat()),r.a.createElement(Da,{title:"Cost Items"}),r.a.createElement(Na,{columns:"2fr 2fr 1fr 1fr 1fr 1fr",columnTitles:["Name","Description","Quantity","Unit Price","VAT Rate","Total"]},g.costItems&&g.costItems.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(ja,null,e.name),r.a.createElement(ja,null,e.description?e.description:"No description"),r.a.createElement(ja,null,e.quantity),r.a.createElement(ja,null,e.unitPrice),r.a.createElement(ja,null,ur(e.vatRate/100)),r.a.createElement(ja,null,sr(e.unitPrice*e.quantity*(1+e.vatRate/100),d.settings.companyInfo.currency)))})),r.a.createElement(Na,{rows:"auto auto auto auto",columns:"4fr 1fr 1fr",gap:"0.8em",style:{marginTop:"2em"}},r.a.createElement("span",null,"\xa0"),r.a.createElement(wa,{tall:!0,right:!0},"Net subtotal"),r.a.createElement(ja,null,sr(y||0,d.settings.companyInfo.currency)),r.a.createElement("span",null,"\xa0"),r.a.createElement(wa,{tall:!0,right:!0},"Discount"),r.a.createElement(ja,null,ur(g.discount/100)),r.a.createElement("span",null,"\xa0"),r.a.createElement(wa,{tall:!0,right:!0},"Taxes"),r.a.createElement(ja,null,sr(h||0,d.settings.companyInfo.currency)),r.a.createElement("span",null,"\xa0"),r.a.createElement(wa,{tall:!0,right:!0},"Grand Total"),r.a.createElement(ja,null,sr(k||0,d.settings.companyInfo.currency)))))},mo=function(e){var t=e.booking,n=e.onEndEditing,a=function(e,t){return{number:e,status:"Unpaid",created:new Date,slots:t&&Array.from(t.slots)||[],costItems:[],discount:0,booking:t,grand_total:0}}(e.invoiceNumber,t);return r.a.createElement(so,{invoice:a,onEndEditing:function(e,t){n(t,e)}})},po=n(134);function go(){var e=Object(On.a)(["\n  display: -webkit-inline-box;\n  display: -webkit-inline-flex;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -webkit-align-items: center;\n  -webkit-box-align: center;\n  -ms-flex-align: center;\n  align-items: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n  -ms-flex-pack: center;\n  justify-content: center;\n  font-size: 1em;\n  text-align: center;\n  border: 1px solid #E6E8E9;\n  border-radius: 0.25em;\n  height: 34px;\n  padding: 0 0.7em;\n  width: auto;\n  -webkit-flex: 0 0 auto;\n  -ms-flex: 0 0 auto;\n  flex: 0 0 auto;\n  background: #ffffff;\n  color: #93989F;\n  box-shadow: 0px 1.5px 1px rgba(0,0,0,0.05);\n  border-color: #E92579;\n  background: #E92579;\n  box-shadow: 0px 2px 2px rgba(202,97,142,0.3);\n  cursor: pointer;\n  outline: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-animation: 1s 0.3s linear infinite;\n  animation: 1s 0.3s linear infinite;\n  -webkit-animation-timing-function: ease-in-out;\n  animation-timing-function: ease-in-out;\n  color: white;\n  margin-top: 1.4rem;\n\n  &:active {\n    opacity: 0.8;\n  }\n\n  input {\n    display: block;\n    margin: 10px 0 20px 0;\n    max-width: 500px;\n    padding: 10px 14px;\n    font-size: 1em;\n    font-family: 'Source Code Pro', monospace;\n    box-shadow: rgba(50, 50, 93, 0.14902) 0px 1px 3px, rgba(0, 0, 0, 0.0196078) 0px 1px 0px;\n    border: 0;\n    outline: 0;\n    border-radius: 4px;\n    background: white;\n    \n    &:focus {\n      box-shadow: rgba(50, 50, 93, 0.109804) 0px 4px 6px, rgba(0, 0, 0, 0.0784314) 0px 1px 3px;\n      -webkit-transition: all 150ms ease;\n      transition: all 150ms ease;    \n    }\n  }\n"]);return go=function(){return e},e}function fo(){var e=Object(On.a)(["\n  font-size: 0.82em;\n  font-weight: 500;\n  line-height: 1.55;\n  color: #93989F;\n  margin-top: 1.4rem;\n  display: block;  \n"]);return fo=function(){return e},e}var bo=function(){console.log("[blur]")},vo=function(e){console.log("[change]",e)},yo=function(){console.log("[focus]")},ho=function(){console.log("[ready]")},ko=function(e,t){return{style:{base:{fontSize:e,color:"#424770",letterSpacing:"0.025em",fontFamily:"Source Code Pro, monospace","::placeholder":{color:"#aab7c4"},padding:t},invalid:{color:"#9e2146"}}}},Eo=In.a.label(fo()),Oo=In.a.button(go()),xo=function(e){function t(e){var n;return Object(rr.a)(this,t),(n=Object(ir.a)(this,Object(cr.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=Object(po.a)(n);n.props.stripe?n.props.stripe.createToken().then(function(e){var a={};a.stripeToken=e.token,a.amount=parseInt(t.props.chargeData.amount),a.currency=t.props.chargeData.currency,a.id=t.props.chargeData.id,p.a.post("/stripe/transferCardFunds",a).then(function(e){n.props.closeModal()})}):console.log("Stripe.js hasn't loaded yet.")},n}return Object(lr.a)(t,e),Object(or.a)(t,[{key:"render",value:function(){return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(Eo,null,"Card number",r.a.createElement(ar.CardNumberElement,Object.assign({onBlur:bo,onChange:vo,onFocus:yo,onReady:ho},ko(this.props.fontSize)))),r.a.createElement(Eo,null,"Expiration date",r.a.createElement(ar.CardExpiryElement,Object.assign({onBlur:bo,onChange:vo,onFocus:yo,onReady:ho},ko(this.props.fontSize)))),r.a.createElement(Eo,null,"CVC",r.a.createElement(ar.CardCVCElement,Object.assign({onBlur:bo,onChange:vo,onFocus:yo,onReady:ho},ko(this.props.fontSize)))),r.a.createElement(Oo,null,"Pay With Credit Card"))}}]),t}(r.a.Component),wo=Object(ar.injectStripe)(xo),jo=function(e){function t(e){var n;return Object(rr.a)(this,t),(n=Object(ir.a)(this,Object(cr.a)(t).call(this,e))).state={elementFontSize:window.innerWidth<450?"14px":"18px"},window.addEventListener("resize",function(){window.innerWidth<450&&"14px"!==n.state.elementFontSize?n.setState({elementFontSize:"14px"}):window.innerWidth>=450&&"18px"!==n.state.elementFontSize&&n.setState({elementFontSize:"18px"})}),n}return Object(lr.a)(t,e),Object(or.a)(t,[{key:"render",value:function(){var e=this.state.elementFontSize;return r.a.createElement("div",{className:"Checkout",style:{width:"100%"}},r.a.createElement(ar.Elements,null,r.a.createElement(wo,{fontSize:e,chargeData:this.props.chargeData,closeModal:this.props.closeModal})))}}]),t}(r.a.Component),_o=function(e){var t=e.stripe_pk_key,n=e.chargeData,a=e.closeModal;return r.a.createElement(ar.StripeProvider,{apiKey:t},r.a.createElement(jo,{chargeData:n,closeModal:a}))},So=["Unpaid","Pending","Paid"],Co=function(e){var t=e.booking,n=Object(a.useContext)(fn),o=n.state,i=n.dispatch,c=o,u=Object(a.useState)({}),d=Object(s.a)(u,2),m=d[0],g=d[1],f=Object(a.useState)(null),v=Object(s.a)(f,2),y=v[0],h=v[1],k=Object(a.useState)(!1),E=Object(s.a)(k,2),O=E[0],x=E[1],w=Object(a.useState)(!1),j=Object(s.a)(w,2),_=j[0],S=j[1],C=Object(a.useState)(null),D=Object(s.a)(C,2),I=(D[0],D[1]),N=Object(a.useState)(!1),R=Object(s.a)(N,2),A=(R[0],R[1],Object(a.useState)({})),T=Object(s.a)(A,2),M=T[0],B=T[1];Object(a.useEffect)(function(){},[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(er,{loading:o.bookings.loadingInvoice.toString()}),o.bookings&&o.bookings.invoices&&o.bookings.invoices.length>0&&r.a.createElement(Na,{columns:"50px 120px auto auto auto 50px 50px",columnTitles:["#","Created","Amount","Payment","Status","",""]},o.bookings.invoices.map(function(e,n){return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(ja,null,e.number||n+1),r.a.createElement(ja,null,Br(e.created)),r.a.createElement(ja,null,sr(e.grand_total||0,o.settings.companyInfo.currency)),r.a.createElement(ja,null,e.payment_method||"N/A"),r.a.createElement(aa,{options:So,selectedOption:e.status?e.status:"Unpaid",onOptionSelected:function(e){return g(Object(b.a)({},m,Object(eo.a)({},n,e)))}}),r.a.createElement(jn,{size:24,svg:no.a,onClick:function(){return h({booking:t.id,index:n})}}),r.a.createElement(Kr,{items:["Export","Delete"],colors:[Cn.grey,"#D13636"],onItemSelected:function(n){var a;a=e.id,l.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i({type:ht}),e.next=4,l.a.awrap(p.a.delete("/bookings/".concat(t.id,"/invoices/").concat(a)));case 4:e.sent,i({type:kt,payload:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),i({type:Et});case 11:case"end":return e.stop()}},null,null,[[0,8]])}}))})),r.a.createElement("br",null),r.a.createElement(Pa,{primary:!0,icon:qr.a,onClick:function(){return x(!0)}},"New Invoice"),r.a.createElement(Dn,{isOpen:null!==y,onClose:function(){return h(null)}},r.a.createElement(uo,{invoice:y,handleUpdate:function(e,n){!function(e,n){var a,r;l.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a={headers:{"Content-Type":"application/json"}},i({type:bt}),n.next=5,l.a.awrap(p.a.put("/bookings/".concat(t.id,"/invoices/").concat(e.id),{slots:JSON.stringify(e.slots),cost_items:JSON.stringify(e.costItems),value:e.value,payment_method:e.payment_method,discount:e.discount,customerId:t.customerId,sub_total:e.sub_total,grand_total:e.grand_total,status:"Pending"},a));case 5:if(r=n.sent,i({type:vt,payload:r.data.invoice}),"Credit Card"!==e.payment_method||!c.auth.user.stripe_public_key||!c.auth.user.stripe_public_key.length){n.next=12;break}B({amount:100*Number(e.sub_total.toFixed(2)),currency:c.settings.companyInfo.currency.length?c.settings.companyInfo.currency:"USD",id:e.id}),S(!0),n.next=16;break;case 12:if("Online Payment"!==e.payment_method){n.next=16;break}return n.next=15,l.a.awrap(p.a.post("/bookings/transferFunds",{amount:100*Number(e.sub_total.toFixed(2)),currency:c.settings.companyInfo.currency.length?c.settings.companyInfo.currency:"USD",id:e.id}).then(function(n){var r;return l.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(!n.data.success){o.next=6;break}return i({type:bt}),o.next=4,l.a.awrap(p.a.put("/bookings/".concat(t.id,"/invoices/").concat(e.id),{slots:JSON.stringify(e.slots),cost_items:JSON.stringify(e.costItems),value:e.value,payment_method:e.payment_method,discount:e.discount,customerId:t.customerId,sub_total:e.sub_total,grand_total:e.grand_total,status:"Paid"},a));case 4:r=o.sent,i({type:vt,payload:r.data.invoice});case 6:case"end":return o.stop()}})}));case 15:n.sent;case 16:n.next=21;break;case 18:n.prev=18,n.t0=n.catch(0),i({type:yt});case 21:case"end":return n.stop()}},null,null,[[0,18]])}(e)}})),r.a.createElement(Dn,{isOpen:O,onClose:function(){return x(!1)}},r.a.createElement(mo,{invoiceNumber:o.bookings.invoices&&o.bookings.invoices.length+1,booking:t,onEndEditing:function(e,n){!function(e,n){var a,r,o,s;l.a.async(function(u){for(;;)switch(u.prev=u.next){case 0:if(!e){u.next=30;break}return u.prev=1,a={headers:{"Content-Type":"application/json"}},r=Object(b.a)({},n),I(r),i({type:pt}),u.next=8,l.a.awrap(p.a.post("/bookings/".concat(t.id,"/invoices"),{slots:JSON.stringify(r.slots),cost_items:JSON.stringify(r.costItems),value:r.value,payment_method:r.payment_method,discount:r.discount,customerId:t.customerId,createdAt:r.createdAtAt,sub_total:r.amount,grand_total:r.grand_total,status:"Unpaid"},a));case 8:if(o=u.sent,i({type:gt,payload:o.data.invoice}),"Credit Card"!==r.payment_method||!c.auth.user.stripe_public_key||!c.auth.user.stripe_public_key.length){u.next=15;break}B({amount:100*Number(r.amount.toFixed(2)),currency:c.settings.companyInfo.currency.length?c.settings.companyInfo.currency:"USD",id:o.data.invoice.id}),S(!0),u.next=25;break;case 15:if("Online Payment"!==r.payment_method||0===c.auth.user.stripe_status){u.next=25;break}return u.next=18,l.a.awrap(p.a.post("/bookings/transferFunds",{amount:100*Number(r.amount.toFixed(2)),currency:c.settings.companyInfo.currency.length?c.settings.companyInfo.currency:"USD",id:o.data.invoice.id}));case 18:if(!u.sent.data.success){u.next=25;break}return i({type:bt}),u.next=23,l.a.awrap(p.a.put("/bookings/".concat(t.id,"/invoices/").concat(o.data.invoice.id),{slots:JSON.stringify(r.slots),cost_items:JSON.stringify(r.costItems),value:r.value,payment_method:r.payment_method,discount:r.discount,customerId:t.customerId,createdAt:r.createdAtAt,sub_total:r.amount,grand_total:r.grand_total,status:"Paid"},a));case 23:s=u.sent,i({type:vt,payload:s.data.invoice});case 25:u.next=30;break;case 27:u.prev=27,u.t0=u.catch(1),i({type:ft});case 30:x(!1);case 31:case"end":return u.stop()}},null,null,[[1,27]])}(e,n)}})),c.auth.user.stripe_public_key&&c.auth.user.stripe_public_key.length>0&&r.a.createElement(Dn,{isOpen:_,onClose:function(){return S(!1)}},r.a.createElement(Ja,null,r.a.createElement(Ka,null,r.a.createElement(Ya,null,r.a.createElement(Rn,null,"Credit Card Info"),r.a.createElement(Gn,{primary:!0,style:{marginRight:10},onClick:function(){return S(!1)}},"Close"))),r.a.createElement(Wa,null,r.a.createElement(_o,{stripe_pk_key:c.auth.user.stripe_public_key,chargeData:M,closeModal:function(){var e;return l.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return i({type:bt}),n.prev=1,n.next=4,l.a.awrap(p.a.put("/bookings/".concat(t.id,"/invoices/").concat(M.id),{status:"Paid"}));case 4:e=n.sent,i({type:vt,payload:e.data.invoice}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),i({type:yt});case 11:S(!1);case 12:case"end":return n.stop()}},null,null,[[1,8]])}})))))};function Do(){var e=Object(On.a)(["\n  width: 100%;\n  padding: 20px 20px 15px;\n  overflow: scroll;\n"]);return Do=function(){return e},e}function Io(){var e=Object(On.a)(["\n  width: 100%;\n  flex: 1 1 auto;\n  display: flex;\n"]);return Io=function(){return e},e}function No(){var e=Object(On.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0 20px 15px;\n  padding-top: 20px;\n"]);return No=function(){return e},e}function Ro(){var e=Object(On.a)(["\n  background-color: white;\n  position: sticky;\n  top: 0;\n  border-radius: 0.25em 0.25em 0 0;\n  z-index: 99;\n"]);return Ro=function(){return e},e}function Ao(){var e=Object(On.a)(["\n  background-color: ",";\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n  border-radius: 0.5em;\n  box-shadow: 0px 13px 32px rgba(0, 0, 0, 0.22);\n  display: flex;\n  flex-direction: column;\n"]);return Ao=function(){return e},e}var To="Details",Mo="Quotes",Bo="Invoices",Lo=[To,Mo,Bo];var Fo=In.a.div(Ao(),Cn.lightest),Po=In.a.div(Ro()),qo=In.a.div(No()),Vo=In.a.div(Io()),zo=In.a.div(Do()),Go=function(e){var t=e.booking,n=Object(a.useState)(To,Mo,Bo),o=Object(s.a)(n,2),i=o[0],c=o[1],u=Object(a.useState)(!1),d=Object(s.a)(u,2),m=d[0],g=d[1],f=Object(a.useContext)(fn),b=f.state,v=f.dispatch;Object(a.useEffect)(function(){b.auth.token&&b.auth.token.length>0&&(function(){var e;l.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,v({type:Ze}),n.next=4,l.a.awrap(p.a.get("/bookings/".concat(t.id,"/quotes")));case 4:e=n.sent,v({type:Xe,payload:e.data.quotes}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),v({GET_BOOKING_QUOTE_ERROR:et});case 11:case"end":return n.stop()}},null,null,[[0,8]])}(),function(){var e;l.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,v({type:ut}),n.next=4,l.a.awrap(p.a.get("/bookings/".concat(t.id,"/invoices")));case 4:e=n.sent,v({type:dt,payload:e.data.invoices}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),v({GET_BOOKING_INVOICE_ERROR:mt});case 11:case"end":return n.stop()}},null,null,[[0,8]])}())},[]);var y=function(e){var n,a,r,o;return l.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(!e){i.next=21;break}if(n={headers:{"Content-Type":"application/json"}},i.prev=2,v({type:Ae}),a={},r=e.customerId,e.customerId!==dn){i.next=12;break}return i.next=9,l.a.awrap(p.a.post("/customers",JSON.stringify({name:e.customerData.name.value,phone:e.customerData.phone.value,address:e.customerData.address.value,email:e.customerData.email.value,note:e.customerData.note.value,vatNumber:e.customerData.vatNumber.value}),n));case 9:a=i.sent,v({type:he,payload:a.data.customer}),r=a.data.customer.id;case 12:return i.next=14,l.a.awrap(p.a.put("/bookings/".concat(t.id),{eventName:e.eventName,venueId:e.venueId,spaceId:e.spaceId,customerId:r,ownerId:e.ownerId,statusId:e.statusId,slots:JSON.stringify(e.slots)},n));case 14:o=i.sent,v({type:Te,payload:o.data.booking}),i.next=21;break;case 18:i.prev=18,i.t0=i.catch(2),v({type:Me});case 21:g(!1);case 22:case"end":return i.stop()}},null,null,[[2,18]])};return t?m?r.a.createElement(Tr,{booking:t,onEndEditing:function(e){y(e)}}):r.a.createElement(Fo,null,r.a.createElement(Po,null,r.a.createElement(qo,null,r.a.createElement(Rn,null,t.eventName),(b.auth.token&&b.auth.token.length)>0&&r.a.createElement("div",null,r.a.createElement(aa,{style:{minWidth:120,marginRight:10},options:b.bookings.bookingStatus.map(function(e){return e.name}),colors:b.bookings.bookingStatus.map(function(e){return yn(e.name)}),selectedOption:t.status.name,onOptionSelected:function(e){return function(e){var n,a,r;return l.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,n={headers:{"Content-Type":"application/json"}},v({type:Ae}),a=b.bookings.bookingStatus.filter(function(t){return t.name===e}),o.next=6,l.a.awrap(p.a.put("/bookings/".concat(t.id),{eventName:t.eventName,venueId:t.venueId,spaceId:t.spaceId,customerId:t.customerId,ownerId:t.ownerId,statusId:a[0].id,slots:JSON.stringify(t.slots)},n));case 6:r=o.sent,v({type:Te,payload:r.data.booking}),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(0),v({type:Me});case 13:case"end":return o.stop()}},null,null,[[0,10]])}(e)}}),r.a.createElement(Gn,{primary:!0,onClick:function(){return g(!0)}},"Edit"))),(b.auth.token&&b.auth.token.length)>0&&r.a.createElement(Bn,{items:Lo,selectedItem:i,onOptionSelected:c,itemsSideMargin:20})),r.a.createElement(Vo,null,r.a.createElement(zo,null,function(e,t,n){switch(e){case To:return r.a.createElement(Fr,t);case Mo:return r.a.createElement(Xr,Object.assign({},t,{onQuoteConverted:function(){return n(Bo)}}));case Bo:return r.a.createElement(Co,t);default:throw new Error("".concat(e," is not a valid section name"))}}(i,{booking:t},c)))):null};n(470);var Uo=function(e,t,n){var r=e.map(function(e){return window.matchMedia(e)}),o=function(){var e=r.findIndex(function(e){return e.matches});return"undefined"!==typeof t[e]?t[e]:n},i=Object(a.useState)(o),c=Object(s.a)(i,2),l=c[0],u=c[1];return Object(a.useEffect)(function(){var e=function(){return u(o)};return r.forEach(function(t){return t.addListener(e)}),function(){return r.forEach(function(t){return t.removeListener(e)})}},[]),l};function Ho(){var e=Object(On.a)(["\n  height: 100%;\n  flex: 1 1 auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  /* padding: 8px 50px; */\n  border: 1px solid ",";\n  /* ","; */\n  background: ",";\n  cursor: pointer;\n  border-radius: ",";\n  margin-left: ",";\n  ","\n"]);return Ho=function(){return e},e}function Jo(){var e=Object(On.a)(["\n  flex: 1 0 auto;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  /* justify-content: center; */\n"]);return Jo=function(){return e},e}var Ko=In.a.div(Jo()),Yo=In.a.div(Ho(),Cn.light,function(e){return e.first?null:"border-left: none;"},function(e){return e.selected?"white":Cn.lighter},function(e){return e.first?"4px 4px 4px 4px":"0 4px 4px 0"},function(e){return e.first?0:"-10px"},function(e){return e.selected?"box-shadow: 0px 1.5px 1px rgba(0, 0, 0, 0.05);":""}),Wo=function(e){var t=e.items,n=e.colors,a=e.selectedItem,o=e.onSelect,i=e.style,c=a,l="All"===c;l&&(c=null);var s=Uo(["(max-width: ".concat(210*t.length,"px)")],[!0],!1);return r.a.createElement(Ko,{style:i},s?r.a.createElement(r.a.Fragment,null,r.a.createElement(Gn,{onClick:function(){return o("All")},softSelected:l,style:{marginRight:".5em"}},"All"),r.a.createElement(aa,{onOptionSelected:o,selectedOption:c,options:t,noSelectionText:"Select Status",colors:n})):["All"].concat(t).map(function(e,i){var c=e===a,l=null;if(i>0){var s=t.indexOf(e),u=n[s];l=r.a.createElement(Kn,{color:u,style:{marginRight:5}})}return r.a.createElement(Yo,{key:e,first:0===i,last:i===t.length,selected:c,onClick:function(){return o(e)}},c?r.a.createElement(Tn,{color:"dark",strong:!0,style:{margin:0}},l," ",e):r.a.createElement(Tn,{color:"grey",style:{margin:0}},l," ",e))}))},$o=function(e){var t=Object(a.useContext)(fn),n=t.state,o=t.dispatch,i=Object(a.useState)(!1),c=Object(s.a)(i,2),u=c[0],d=c[1],m=Object(a.useState)("All"),g=Object(s.a)(m,2),f=g[0],b=g[1],v=Object(a.useState)(null),y=Object(s.a)(v,2),h=y[0],k=y[1],E=n.bookings.bookings&&n.bookings.bookings.length>0?n.bookings.bookings.filter(function(e){return"All"===f||e.status.name===f}):[];Object(a.useEffect)(function(){!function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o({type:$}),t.next=4,l.a.awrap(p.a.get("/company"));case 4:e=t.sent,o({type:Q,payload:e.data.company}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),o({type:Z});case 11:case"end":return t.stop()}},null,null,[[0,8]])}(),function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o({type:Ye}),t.next=4,l.a.awrap(p.a.get("/statuses"));case 4:e=t.sent,o({type:We,payload:e.data.statuses}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),o({type:$e});case 11:case"end":return t.stop()}},null,null,[[0,8]])}(),function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o({type:Se}),t.next=4,l.a.awrap(p.a.get("/bookings"));case 4:e=t.sent,o({type:Ce,payload:e.data.bookings}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),o({type:De});case 11:case"end":return t.stop()}},null,null,[[0,8]])}()},[]);var O;return r.a.createElement(r.a.Fragment,null,r.a.createElement(er,{loading:E&&E.length<=0&&(n.bookings.loadBooking||n.bookings.loadBookingAction)?"true":"false"}),r.a.createElement("div",{style:{display:"flex",alignItems:"center",marginBottom:40}},n.bookings.bookingStatus&&n.bookings.bookingStatus.length>0&&r.a.createElement(Wo,{items:n.bookings.bookingStatus.map(function(e){return e.name}),colors:n.bookings.bookingStatus.map(function(e){return yn(e.name)}),selectedItem:f,onSelect:function(e){b(e)},style:{marginBottom:0,marginTop:0,height:60}}),r.a.createElement(Gn,{primary:!0,onClick:function(){return d(!u)},iconComponent:function(){return r.a.createElement(Ra,{fill:Cn.white})},style:{marginLeft:"2em"},disabled:n.bookings.loadBooking||n.bookings.loadBookingAction},"Add Booking")),E&&E.length>0&&r.a.createElement(Na,{columns:"auto auto auto auto auto auto auto",columnTitles:["Title","Venue (Space)","Customer","Owner","Status","",""]},E.map(function(e){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(ja,null,e.eventName),r.a.createElement(ja,{style:{color:"".concat((t=e,t.status&&t.status.name?yn(t.status.name):yn(""))," !important"),margin:0}},function(e){return(e.venue&&e.venue.name?e.venue.name:"")+"("+(e.space&&e.space.name?e.space.name:"")+")"}(e)),r.a.createElement(ja,null,e.customer&&e.customer.name?e.customer.name:""),r.a.createElement(ja,null,e.owner?(e.owner.lastName?e.owner.lastName:"")+" "+(e.owner.firstName?e.owner.firstName:""):"-"),r.a.createElement(aa,{options:n.bookings.bookingStatus.map(function(e){return e.name}),colors:n.bookings.bookingStatus.map(function(e){return yn(e.name)}),selectedOption:e.status&&e.status.name?e.status.name:"",onOptionSelected:function(t){!function(e,t){var a,r,i,c,s;l.a.async(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,o({type:Ae}),a={headers:{"Content-Type":"application/json"}},r=n.bookings.bookings.filter(function(t){return t.id===e}),i=n.bookings.bookingStatus.filter(function(e){return e.name===t}),c={eventName:r[0].eventName,venueId:r[0].venueId,spaceId:r[0].spaceId,statusId:i[0].id,customerId:r[0].customerId,ownerId:r[0].ownerId,slots:JSON.stringify(r[0].slots)},u.next=8,l.a.awrap(p.a.put("/bookings/".concat(e),c,a));case 8:s=u.sent,o({type:Te,payload:s.data.booking}),u.next=15;break;case 12:u.prev=12,u.t0=u.catch(0),o({type:Me});case 15:case"end":return u.stop()}},null,null,[[0,12]])}(e.id,t)}}),r.a.createElement(jn,{width:24,height:24,svg:no.a,onClick:function(){return k(e.id)}}),r.a.createElement(Kr,{items:["Archive","Delete"],colors:[Cn.grey,"#D13636"],onItemSelected:function(t){var n;n=e.id,l.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:Be}),e.prev=1,e.next=4,l.a.awrap(p.a.delete("/bookings/".concat(n)));case 4:e.sent,o({type:Le,payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o({type:Fe});case 11:case"end":return e.stop()}},null,null,[[1,8]])}}));var t})),0===E.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Fn,{color:"grey",center:!0},"No bookings matching your filter."),r.a.createElement(Fn,{center:!0,style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){return b("All")}},"Show All")),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(Pa,{style:{margin:"20px auto"}},"Show Archived")),r.a.createElement(Dn,{isOpen:null!==h,onClose:function(){return k(null)}},r.a.createElement(Go,{booking:(O=h,n.bookings.bookings&&n.bookings.bookings.find(function(e){return e.id===O}))})),r.a.createElement(Dn,{isOpen:u,onClose:function(){return d(!1)}},r.a.createElement(Tr,{booking:x(),onEndEditing:function(e){!function(e){var t,a,r,i,c,s,u,m;l.a.async(function(g){for(;;)switch(g.prev=g.next){case 0:if(d(!1),null!==e){g.next=3;break}return g.abrupt("return");case 3:if(t={headers:{"Content-Type":"application/json"}},-1!==e.id){g.next=27;break}if(g.prev=5,o({type:Ie}),a=n.bookings.bookingStatus.filter(function(e){return"Enquiry"===e.name}),r=e.customerId,i={},e.customerId!==dn){g.next=16;break}return g.next=13,l.a.awrap(p.a.post("/customers",JSON.stringify({name:e.customerData.name.value,phone:e.customerData.phone.value,address:e.customerData.address.value,email:e.customerData.email.value,note:e.customerData.note.value,vatNumber:e.customerData.vatNumber.value}),t));case 13:i=g.sent,o({type:he,payload:i.data.customer}),r=i.data.customer.id;case 16:return g.next=18,l.a.awrap(p.a.post("/bookings",{eventName:e.eventName,venueId:e.venueId,spaceId:e.spaceId,customerId:r,ownerId:e.ownerId,slots:JSON.stringify(e.slots),statusId:a[0].id},t));case 18:c=g.sent,o({type:Ne,payload:c.data.booking}),g.next=25;break;case 22:g.prev=22,g.t0=g.catch(5),o({type:Re});case 25:g.next=46;break;case 27:if(g.prev=27,o({type:Ae}),s={},u=e.customerId,e.customerId!==dn){g.next=37;break}return g.next=34,l.a.awrap(p.a.post("/customers",JSON.stringify({name:e.customerData.name.value,phone:e.customerData.phone.value,address:e.customerData.address.value,email:e.customerData.email.value,note:e.customerData.note.value,vatNumber:e.customerData.vatNumber.value}),t));case 34:s=g.sent,o({type:he,payload:s.data.customer}),u=s.data.customer.id;case 37:return g.next=39,l.a.awrap(p.a.put("/bookings/".concat(e.id),{eventName:e.eventName,venueId:e.venueId,spaceId:e.spaceId,customerId:u,ownerId:e.ownerId,statusId:e.statusId,slots:JSON.stringify(e.slots)},t));case 39:m=g.sent,o({type:Te,payload:m.data.booking}),g.next=46;break;case 43:g.prev=43,g.t1=g.catch(27),o({type:Me});case 46:case"end":return g.stop()}},null,null,[[5,22],[27,43]])}(e)}})))};function Qo(){var e=Object(On.a)(["\n                  color: #E92579;            \n                  margin: 0.2em 0 0 0;\n                  padding: 0 0.6em;\n                  font-size: 0.8em;\n                "]);return Qo=function(){return e},e}function Zo(){var e=Object(On.a)(["\n  flex: 1 0 1.5em;\n"]);return Zo=function(){return e},e}var Xo=In.a.div(Zo());function ei(e,t){switch(t.type){case"set_value":return Object(b.a)({},e,Object(eo.a)({},t.key,t.value));default:throw new Error}}var ti=function(e){var t=e.customer,n=e.onEndEditing,o=null!==t,i=Object(a.useReducer)(ei,t||{id:-1,name:"",address:"",phone:"",email:"",note:"",vatNumber:""}),c=Object(s.a)(i,2),l=c[0],u=c[1],d=Object(a.useState)(!0),m=Object(s.a)(d,2),p=m[0],g=m[1];return r.a.createElement(Ja,null,r.a.createElement(Ka,null,r.a.createElement(Ya,null,r.a.createElement(Rn,{style:{margin:0}},l.name||"New Customer"),r.a.createElement("div",null,o&&r.a.createElement(Gn,{style:{marginRight:10},onClick:function(e){return n(null,!1)}},"Cancel"),r.a.createElement(Gn,{primary:!0,style:{marginRight:10},onClick:function(){0!==l.name.length?n(l,!0):g(!1)},disabled:!p},o?"Save":"Create Customer")))),r.a.createElement(Wa,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(_a,{label:"Name",value:l.name,onChange:function(e){return function(e){0===e.length?g(!1):g(!0),u({type:"set_value",key:"name",value:e})}(e)},style:{width:"100%"},className:p?"":"error"}),!p&&r.a.createElement("p",{className:Object(xn.a)(Qo())},"Company Name is required."),r.a.createElement(la,{columns:"1fr 1fr",style:{width:"100%",marginTop:10}},r.a.createElement(_a,{label:"Phone Number",value:l.phone,onChange:function(e){return u({type:"set_value",key:"phone",value:e})},style:{width:"100%"}}),r.a.createElement(_a,{label:"Email",value:l.email,onChange:function(e){return u({type:"set_value",key:"email",value:e})}}),r.a.createElement(_a,{label:"Address",value:l.address,onChange:function(e){return u({type:"set_value",key:"address",value:e})}}),r.a.createElement(_a,{label:"VAT Number",value:l.vatNumber,onChange:function(e){return u({type:"set_value",key:"vatNumber",value:e})}})),r.a.createElement(_a,{label:"Private Notes",value:l.note,longText:!0,style:{width:"100%",marginTop:"0.8em",height:80},onChange:function(e){return u({type:"set_value",key:"note",value:e})}})),r.a.createElement(Xo,null)))};function ni(){var e=Object(On.a)(["\n  width: 100%;\n  padding: 20px 20px 15px;\n  overflow: scroll;\n"]);return ni=function(){return e},e}var ai=In.a.div(ni()),ri=function(e){var t=e.customer,n=Object(a.useState)(!1),o=Object(s.a)(n,2),i=o[0],c=o[1];if(!t)return null;return i?r.a.createElement(ti,{customer:t,onEndEditing:function(t){return n=t,c(!1),void e.onEndEditing(n);var n}}):r.a.createElement(Ja,null,r.a.createElement(Ka,null,r.a.createElement(Ya,null,r.a.createElement(Rn,{style:{margin:0}},t.name),r.a.createElement("div",null,r.a.createElement(Gn,{primary:!0,style:{marginRight:10},onClick:function(){return c(!i)}},"Edit")))),r.a.createElement(Wa,null,r.a.createElement(ai,null,r.a.createElement(la,{columns:"1fr 1fr"},r.a.createElement(Ca,{label:"Phone Number",value:t.phone||"N/A"}),r.a.createElement(Ca,{label:"Email",value:t.email||"N/A"}),r.a.createElement(Ca,{label:"Address",value:t.address||"N/A"}),r.a.createElement(Ca,{label:"VAT Number",value:t.vatNumber||"N/A"})),t.note&&r.a.createElement(la,{columns:"1fr",style:{marginTop:"1em"}},r.a.createElement(Ca,{label:"Private Notes",value:t.note||"N/A"})))))},oi=n(329),ii=n.n(oi);function ci(){var e=Object(On.a)(["\n          font-family: Circular;\n          font-size: 1.05em;\n          border: none;\n          :focus {\n            outline: none;\n          }\n        "]);return ci=function(){return e},e}function li(){var e=Object(On.a)(["\n          width: 15px;\n          height: 15px;\n          margin-top: -1px;\n          margin-right: 8px;\n        "]);return li=function(){return e},e}function si(){var e=Object(On.a)(["\n          margin-right: 1em;\n          background-color: white;\n          padding: 5px 7px;\n          border-radius: 4px;\n          height: 35px;\n          border: 1px solid ",";\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n        "]);return si=function(){return e},e}var ui=function(e){var t=e.query,n=e.onChange,o=e.onEnterKeyPress,i=e.placeholder,c=void 0===i?"Search":i,l=e.className,u=void 0===l?"":l,d=e.style,m=Object(a.useState)(!1),p=Object(s.a)(m,2),g=p[0],f=p[1];return r.a.createElement("div",{style:d,className:Object(xn.b)(u,Object(xn.a)(si(),g?Cn.accent_pink:Cn.light_grey))},r.a.createElement("img",{alt:"search",src:ii.a,className:Object(xn.a)(li())}),r.a.createElement("input",{value:t,onChange:n,placeholder:c,onFocus:function(){return f(!0)},onBlur:function(){return f(!1)},onKeyPress:function(e){return"Enter"===e.key&&o&&o()},className:Object(xn.a)(ci())}))};function di(){var e=Object(On.a)([""]);return di=function(){return e},e}function mi(){var e=Object(On.a)(["\n          display: flex;\n          flex-direction: row;\n          align-items: center;\n          justify-content: space-between;\n          margin-top: 10px;\n          margin-bottom: 40px;\n        "]);return mi=function(){return e},e}var pi=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(null),c=Object(s.a)(i,2),u=c[0],d=c[1],m=Object(a.useState)(""),g=Object(s.a)(m,2),f=g[0],b=g[1],v=Object(a.useContext)(fn),y=v.state,h=v.dispatch,k=f.length>0?y.customers.customers.filter(function(e){return e.name.toLowerCase().includes(f.toLowerCase())}):y.customers.customers;Object(a.useEffect)(function(){!function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,h({type:fe}),t.next=4,l.a.awrap(p.a.get("/customers"));case 4:e=t.sent,h({type:be,payload:e.data.customers}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),h({type:ve});case 11:case"end":return t.stop()}},null,null,[[0,8]])}()},[h]);var E=function(e,t){var n,a,r;return l.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(t||null!==e){i.next=3;break}return o(!1),i.abrupt("return");case 3:if(n={headers:{"Content-Type":"application/json"}},-1!==e.id){i.next=20;break}return o(!1),i.prev=6,h({type:ye}),delete e.id,i.next=11,l.a.awrap(p.a.post("/customers",JSON.stringify(e),n));case 11:a=i.sent,h({type:he,payload:a.data.customer}),i.next=18;break;case 15:i.prev=15,i.t0=i.catch(6),h({type:ke});case 18:i.next=31;break;case 20:return i.prev=20,h({type:Ee}),i.next=24,l.a.awrap(p.a.put("/customers/".concat(e.id),JSON.stringify(e),n));case 24:r=i.sent,h({type:Oe,payload:r.data.customer}),i.next=31;break;case 28:i.prev=28,i.t1=i.catch(20),h({type:xe});case 31:case"end":return i.stop()}},null,null,[[6,15],[20,28]])};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Object(xn.a)(mi())},r.a.createElement(er,{loading:(k&&k.length<=0&&y.customers.loadingCustomers).toString()}),r.a.createElement(ui,{query:f,placeholder:"Search Customers",onChange:function(e){return b(e.target.value)},onEnterKeyPress:function(){return 1===k.length&&d(k[0].id)}}),r.a.createElement(Gn,{primary:!0,onClick:function(){return o(!n)},iconComponent:function(){return r.a.createElement(Ra,{fill:Cn.white})},className:Object(xn.a)(di())},"Add Customer")),k&&k.length>0&&r.a.createElement(Na,{columns:"1fr 1fr 1fr 50px 50px",columnTitles:["Name","Email","Phone","",""]},k.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(ja,null,e.name),r.a.createElement(ja,null,e.email||"N/A"),r.a.createElement(ja,null,e.phone||"N/A"),r.a.createElement(jn,{width:24,height:24,svg:no.a,onClick:function(){return d(e.id)}}),r.a.createElement(Kr,{items:["Delete"],colors:["#D13636"],onItemSelected:function(t){var n;n=e.id,l.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return h({type:we}),e.prev=1,e.next=4,l.a.awrap(p.a.delete("/customers/".concat(n)));case 4:h({type:je,payload:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),h({type:_e});case 10:case"end":return e.stop()}},null,null,[[1,7]])}}))})),0===k.length&&r.a.createElement(Tn,null,"There are no customers matching your search."," ",r.a.createElement("span",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){return b("")}},"View All")),r.a.createElement(Dn,{isOpen:null!==u,onClose:function(){return d(null)}},r.a.createElement(ri,{customer:y.customers.customers.find(function(e){return e.id===u}),onEndEditing:E})),r.a.createElement(Dn,{isOpen:n,onClose:function(){return o(!1)}},r.a.createElement(ti,{onEndEditing:E})))};function gi(){var e=Object(On.a)(["\n    p {\n      display: block;\n      cursor: pointer;\n      :first-child {\n        margin-top: 0;\n      }\n      :last-child {\n        margin-bottom: 0;\n      }\n    }\n    .selected {\n      color: ",";\n      font-weight: 500;\n    }\n  "]);return gi=function(){return e},e}var fi=function(e){var t=e.items,n=e.selectedItem,a=e.onClick,o=In.a.div(gi(),Cn.accent_pink);return r.a.createElement(o,null,t.map(function(e){return r.a.createElement(Tn,{key:e,className:n===e?"selected":"",onClick:function(){return a(e)}},e)}))},bi={sidebarWidth:"14rem",collapseSidebarWidth:"4.5rem",leftPanelWidth:"16em"},vi=n(365),yi={USD:{symbol:"$",name:"US Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"USD",name_plural:"US dollars"},CAD:{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"CAD",name_plural:"Canadian dollars"},EUR:{symbol:"\u20ac",name:"Euro",symbol_native:"\u20ac",decimal_digits:2,rounding:0,code:"EUR",name_plural:"euros"},AED:{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"\u062f.\u0625.\u200f",decimal_digits:2,rounding:0,code:"AED",name_plural:"UAE dirhams"},AFN:{symbol:"Af",name:"Afghan Afghani",symbol_native:"\u060b",decimal_digits:0,rounding:0,code:"AFN",name_plural:"Afghan Afghanis"},ALL:{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",decimal_digits:0,rounding:0,code:"ALL",name_plural:"Albanian lek\xeb"},AMD:{symbol:"AMD",name:"Armenian Dram",symbol_native:"\u0564\u0580.",decimal_digits:0,rounding:0,code:"AMD",name_plural:"Armenian drams"},ARS:{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"ARS",name_plural:"Argentine pesos"},AUD:{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"AUD",name_plural:"Australian dollars"},AZN:{symbol:"man.",name:"Azerbaijani Manat",symbol_native:"\u043c\u0430\u043d.",decimal_digits:2,rounding:0,code:"AZN",name_plural:"Azerbaijani manats"},BAM:{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",decimal_digits:2,rounding:0,code:"BAM",name_plural:"Bosnia-Herzegovina convertible marks"},BDT:{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"\u09f3",decimal_digits:2,rounding:0,code:"BDT",name_plural:"Bangladeshi takas"},BGN:{symbol:"BGN",name:"Bulgarian Lev",symbol_native:"\u043b\u0432.",decimal_digits:2,rounding:0,code:"BGN",name_plural:"Bulgarian leva"},BHD:{symbol:"BD",name:"Bahraini Dinar",symbol_native:"\u062f.\u0628.\u200f",decimal_digits:3,rounding:0,code:"BHD",name_plural:"Bahraini dinars"},BIF:{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",decimal_digits:0,rounding:0,code:"BIF",name_plural:"Burundian francs"},BND:{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BND",name_plural:"Brunei dollars"},BOB:{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",decimal_digits:2,rounding:0,code:"BOB",name_plural:"Bolivian bolivianos"},BRL:{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",decimal_digits:2,rounding:0,code:"BRL",name_plural:"Brazilian reals"},BWP:{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",decimal_digits:2,rounding:0,code:"BWP",name_plural:"Botswanan pulas"},BYR:{symbol:"BYR",name:"Belarusian Ruble",symbol_native:"BYR",decimal_digits:0,rounding:0,code:"BYR",name_plural:"Belarusian rubles"},BZD:{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BZD",name_plural:"Belize dollars"},CDF:{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",decimal_digits:2,rounding:0,code:"CDF",name_plural:"Congolese francs"},CHF:{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",decimal_digits:2,rounding:.05,code:"CHF",name_plural:"Swiss francs"},CLP:{symbol:"CL$",name:"Chilean Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"CLP",name_plural:"Chilean pesos"},CNY:{symbol:"CN\xa5",name:"Chinese Yuan",symbol_native:"CN\xa5",decimal_digits:2,rounding:0,code:"CNY",name_plural:"Chinese yuan"},COP:{symbol:"CO$",name:"Colombian Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"COP",name_plural:"Colombian pesos"},CRC:{symbol:"\u20a1",name:"Costa Rican Col\xf3n",symbol_native:"\u20a1",decimal_digits:0,rounding:0,code:"CRC",name_plural:"Costa Rican col\xf3ns"},CVE:{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",decimal_digits:2,rounding:0,code:"CVE",name_plural:"Cape Verdean escudos"},CZK:{symbol:"K\u010d",name:"Czech Republic Koruna",symbol_native:"K\u010d",decimal_digits:2,rounding:0,code:"CZK",name_plural:"Czech Republic korunas"},DJF:{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",decimal_digits:0,rounding:0,code:"DJF",name_plural:"Djiboutian francs"},DKK:{symbol:"Dkr",name:"Danish Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"DKK",name_plural:"Danish kroner"},DOP:{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",decimal_digits:2,rounding:0,code:"DOP",name_plural:"Dominican pesos"},DZD:{symbol:"DA",name:"Algerian Dinar",symbol_native:"\u062f.\u062c.\u200f",decimal_digits:2,rounding:0,code:"DZD",name_plural:"Algerian dinars"},EEK:{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",decimal_digits:2,rounding:0,code:"EEK",name_plural:"Estonian kroons"},EGP:{symbol:"EGP",name:"Egyptian Pound",symbol_native:"\u062c.\u0645.\u200f",decimal_digits:2,rounding:0,code:"EGP",name_plural:"Egyptian pounds"},ERN:{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",decimal_digits:2,rounding:0,code:"ERN",name_plural:"Eritrean nakfas"},ETB:{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",decimal_digits:2,rounding:0,code:"ETB",name_plural:"Ethiopian birrs"},GBP:{symbol:"\xa3",name:"British Pound Sterling",symbol_native:"\xa3",decimal_digits:2,rounding:0,code:"GBP",name_plural:"British pounds sterling"},GEL:{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",decimal_digits:2,rounding:0,code:"GEL",name_plural:"Georgian laris"},GHS:{symbol:"GH\u20b5",name:"Ghanaian Cedi",symbol_native:"GH\u20b5",decimal_digits:2,rounding:0,code:"GHS",name_plural:"Ghanaian cedis"},GNF:{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",decimal_digits:0,rounding:0,code:"GNF",name_plural:"Guinean francs"},GTQ:{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",decimal_digits:2,rounding:0,code:"GTQ",name_plural:"Guatemalan quetzals"},HKD:{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"HKD",name_plural:"Hong Kong dollars"},HNL:{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",decimal_digits:2,rounding:0,code:"HNL",name_plural:"Honduran lempiras"},HRK:{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",decimal_digits:2,rounding:0,code:"HRK",name_plural:"Croatian kunas"},HUF:{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",decimal_digits:0,rounding:0,code:"HUF",name_plural:"Hungarian forints"},IDR:{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",decimal_digits:0,rounding:0,code:"IDR",name_plural:"Indonesian rupiahs"},ILS:{symbol:"\u20aa",name:"Israeli New Sheqel",symbol_native:"\u20aa",decimal_digits:2,rounding:0,code:"ILS",name_plural:"Israeli new sheqels"},INR:{symbol:"Rs",name:"Indian Rupee",symbol_native:"\u099f\u0995\u09be",decimal_digits:2,rounding:0,code:"INR",name_plural:"Indian rupees"},IQD:{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"\u062f.\u0639.\u200f",decimal_digits:0,rounding:0,code:"IQD",name_plural:"Iraqi dinars"},IRR:{symbol:"IRR",name:"Iranian Rial",symbol_native:"\ufdfc",decimal_digits:0,rounding:0,code:"IRR",name_plural:"Iranian rials"},ISK:{symbol:"Ikr",name:"Icelandic Kr\xf3na",symbol_native:"kr",decimal_digits:0,rounding:0,code:"ISK",name_plural:"Icelandic kr\xf3nur"},JMD:{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"JMD",name_plural:"Jamaican dollars"},JOD:{symbol:"JD",name:"Jordanian Dinar",symbol_native:"\u062f.\u0623.\u200f",decimal_digits:3,rounding:0,code:"JOD",name_plural:"Jordanian dinars"},JPY:{symbol:"\xa5",name:"Japanese Yen",symbol_native:"\uffe5",decimal_digits:0,rounding:0,code:"JPY",name_plural:"Japanese yen"},KES:{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenyan shillings"},KHR:{symbol:"KHR",name:"Cambodian Riel",symbol_native:"\u17db",decimal_digits:2,rounding:0,code:"KHR",name_plural:"Cambodian riels"},KMF:{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",decimal_digits:0,rounding:0,code:"KMF",name_plural:"Comorian francs"},KRW:{symbol:"\u20a9",name:"South Korean Won",symbol_native:"\u20a9",decimal_digits:0,rounding:0,code:"KRW",name_plural:"South Korean won"},KWD:{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"\u062f.\u0643.\u200f",decimal_digits:3,rounding:0,code:"KWD",name_plural:"Kuwaiti dinars"},KZT:{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:"\u0442\u04a3\u0433.",decimal_digits:2,rounding:0,code:"KZT",name_plural:"Kazakhstani tenges"},LBP:{symbol:"LB\xa3",name:"Lebanese Pound",symbol_native:"\u0644.\u0644.\u200f",decimal_digits:0,rounding:0,code:"LBP",name_plural:"Lebanese pounds"},LKR:{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",decimal_digits:2,rounding:0,code:"LKR",name_plural:"Sri Lankan rupees"},LTL:{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",decimal_digits:2,rounding:0,code:"LTL",name_plural:"Lithuanian litai"},LVL:{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",decimal_digits:2,rounding:0,code:"LVL",name_plural:"Latvian lati"},LYD:{symbol:"LD",name:"Libyan Dinar",symbol_native:"\u062f.\u0644.\u200f",decimal_digits:3,rounding:0,code:"LYD",name_plural:"Libyan dinars"},MAD:{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"\u062f.\u0645.\u200f",decimal_digits:2,rounding:0,code:"MAD",name_plural:"Moroccan dirhams"},MDL:{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",decimal_digits:2,rounding:0,code:"MDL",name_plural:"Moldovan lei"},MGA:{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",decimal_digits:0,rounding:0,code:"MGA",name_plural:"Malagasy Ariaries"},MKD:{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",decimal_digits:2,rounding:0,code:"MKD",name_plural:"Macedonian denari"},MMK:{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",decimal_digits:0,rounding:0,code:"MMK",name_plural:"Myanma kyats"},MOP:{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",decimal_digits:2,rounding:0,code:"MOP",name_plural:"Macanese patacas"},MUR:{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",decimal_digits:0,rounding:0,code:"MUR",name_plural:"Mauritian rupees"},MXN:{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"MXN",name_plural:"Mexican pesos"},MYR:{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",decimal_digits:2,rounding:0,code:"MYR",name_plural:"Malaysian ringgits"},MZN:{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",decimal_digits:2,rounding:0,code:"MZN",name_plural:"Mozambican meticals"},NAD:{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",decimal_digits:2,rounding:0,code:"NAD",name_plural:"Namibian dollars"},NGN:{symbol:"\u20a6",name:"Nigerian Naira",symbol_native:"\u20a6",decimal_digits:2,rounding:0,code:"NGN",name_plural:"Nigerian nairas"},NIO:{symbol:"C$",name:"Nicaraguan C\xf3rdoba",symbol_native:"C$",decimal_digits:2,rounding:0,code:"NIO",name_plural:"Nicaraguan c\xf3rdobas"},NOK:{symbol:"Nkr",name:"Norwegian Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"NOK",name_plural:"Norwegian kroner"},NPR:{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"\u0928\u0947\u0930\u0942",decimal_digits:2,rounding:0,code:"NPR",name_plural:"Nepalese rupees"},NZD:{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"NZD",name_plural:"New Zealand dollars"},OMR:{symbol:"OMR",name:"Omani Rial",symbol_native:"\u0631.\u0639.\u200f",decimal_digits:3,rounding:0,code:"OMR",name_plural:"Omani rials"},PAB:{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",decimal_digits:2,rounding:0,code:"PAB",name_plural:"Panamanian balboas"},PEN:{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",decimal_digits:2,rounding:0,code:"PEN",name_plural:"Peruvian nuevos soles"},PHP:{symbol:"\u20b1",name:"Philippine Peso",symbol_native:"\u20b1",decimal_digits:2,rounding:0,code:"PHP",name_plural:"Philippine pesos"},PKR:{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"\u20a8",decimal_digits:0,rounding:0,code:"PKR",name_plural:"Pakistani rupees"},PLN:{symbol:"z\u0142",name:"Polish Zloty",symbol_native:"z\u0142",decimal_digits:2,rounding:0,code:"PLN",name_plural:"Polish zlotys"},PYG:{symbol:"\u20b2",name:"Paraguayan Guarani",symbol_native:"\u20b2",decimal_digits:0,rounding:0,code:"PYG",name_plural:"Paraguayan guaranis"},QAR:{symbol:"QR",name:"Qatari Rial",symbol_native:"\u0631.\u0642.\u200f",decimal_digits:2,rounding:0,code:"QAR",name_plural:"Qatari rials"},RON:{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",decimal_digits:2,rounding:0,code:"RON",name_plural:"Romanian lei"},RSD:{symbol:"din.",name:"Serbian Dinar",symbol_native:"\u0434\u0438\u043d.",decimal_digits:0,rounding:0,code:"RSD",name_plural:"Serbian dinars"},RUB:{symbol:"RUB",name:"Russian Ruble",symbol_native:"\u0440\u0443\u0431.",decimal_digits:2,rounding:0,code:"RUB",name_plural:"Russian rubles"},RWF:{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",decimal_digits:0,rounding:0,code:"RWF",name_plural:"Rwandan francs"},SAR:{symbol:"SR",name:"Saudi Riyal",symbol_native:"\u0631.\u0633.\u200f",decimal_digits:2,rounding:0,code:"SAR",name_plural:"Saudi riyals"},SDG:{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",decimal_digits:2,rounding:0,code:"SDG",name_plural:"Sudanese pounds"},SEK:{symbol:"Skr",name:"Swedish Krona",symbol_native:"kr",decimal_digits:2,rounding:0,code:"SEK",name_plural:"Swedish kronor"},SGD:{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"SGD",name_plural:"Singapore dollars"},SOS:{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",decimal_digits:0,rounding:0,code:"SOS",name_plural:"Somali shillings"},SYP:{symbol:"SY\xa3",name:"Syrian Pound",symbol_native:"\u0644.\u0633.\u200f",decimal_digits:0,rounding:0,code:"SYP",name_plural:"Syrian pounds"},THB:{symbol:"\u0e3f",name:"Thai Baht",symbol_native:"\u0e3f",decimal_digits:2,rounding:0,code:"THB",name_plural:"Thai baht"},TND:{symbol:"DT",name:"Tunisian Dinar",symbol_native:"\u062f.\u062a.\u200f",decimal_digits:3,rounding:0,code:"TND",name_plural:"Tunisian dinars"},TOP:{symbol:"T$",name:"Tongan Pa\u02bbanga",symbol_native:"T$",decimal_digits:2,rounding:0,code:"TOP",name_plural:"Tongan pa\u02bbanga"},TRY:{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",decimal_digits:2,rounding:0,code:"TRY",name_plural:"Turkish Lira"},TTD:{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"TTD",name_plural:"Trinidad and Tobago dollars"},TWD:{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",decimal_digits:2,rounding:0,code:"TWD",name_plural:"New Taiwan dollars"},TZS:{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",decimal_digits:0,rounding:0,code:"TZS",name_plural:"Tanzanian shillings"},UAH:{symbol:"\u20b4",name:"Ukrainian Hryvnia",symbol_native:"\u20b4",decimal_digits:2,rounding:0,code:"UAH",name_plural:"Ukrainian hryvnias"},UGX:{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",decimal_digits:0,rounding:0,code:"UGX",name_plural:"Ugandan shillings"},UYU:{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"UYU",name_plural:"Uruguayan pesos"},UZS:{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",decimal_digits:0,rounding:0,code:"UZS",name_plural:"Uzbekistan som"},VEF:{symbol:"Bs.F.",name:"Venezuelan Bol\xedvar",symbol_native:"Bs.F.",decimal_digits:2,rounding:0,code:"VEF",name_plural:"Venezuelan bol\xedvars"},VND:{symbol:"\u20ab",name:"Vietnamese Dong",symbol_native:"\u20ab",decimal_digits:0,rounding:0,code:"VND",name_plural:"Vietnamese dong"},XAF:{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",decimal_digits:0,rounding:0,code:"XAF",name_plural:"CFA francs BEAC"},XOF:{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",decimal_digits:0,rounding:0,code:"XOF",name_plural:"CFA francs BCEAO"},YER:{symbol:"YR",name:"Yemeni Rial",symbol_native:"\u0631.\u064a.\u200f",decimal_digits:0,rounding:0,code:"YER",name_plural:"Yemeni rials"},ZAR:{symbol:"R",name:"South African Rand",symbol_native:"R",decimal_digits:2,rounding:0,code:"ZAR",name_plural:"South African rand"},ZMK:{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",decimal_digits:0,rounding:0,code:"ZMK",name_plural:"Zambian kwachas"}};function hi(){var e=Object(On.a)(["\n              color: #E92579;            \n              margin: 0.2em 0 0 0;\n              padding: 0 0.6em;\n              font-size: 0.8em;\n            "]);return hi=function(){return e},e}function ki(){var e=Object(On.a)(["\n              color: #E92579;            \n              margin: 0.2em 0 0 0;\n              padding: 0 0.6em;\n              font-size: 0.8em;\n            "]);return ki=function(){return e},e}function Ei(){var e=Object(On.a)(["\n  background-color: #93989F;\n  padding: 0 1em;\n  border-radius: 0.25em;\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n  height: 34px;\n  display: flex;\n  align-items: center;\n"]);return Ei=function(){return e},e}function Oi(){var e=Object(On.a)(["\n  display: flex;\n  align-items: center;\n\n  input {\n    border-top-right-radius: 0;\n    border-bottom-right-radius: 0;\n  }\n"]);return Oi=function(){return e},e}function xi(){var e=Object(On.a)(["\n  visibility: ",";\n"]);return xi=function(){return e},e}function wi(){var e=Object(On.a)(['\n  position: relative;\n  width: 200px;\n  height: 200px;\n  display: flex;\n  align-items: center;\n  text-align: center;\n  background-color: white;\n  border-radius: 0.25em;\n  border: 1px solid #e6e8e9;\n  color: #93989F;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 100% auto;\n  background-image: url("','");\n  cursor: pointer;\n  &:hover {\n    p {\n      visibility: visible !important;\n      cursor: pointer;\n    }\n  }\n\n']);return wi=function(){return e},e}var ji=In.a.div(wi(),function(e){return e.backgroundImage}),_i=In.a.p(xi(),function(e){return e.isVisible?"visible":"hidden"}),Si=In.a.div(Oi()),Ci=In.a.div(Ei()),Di=function(e){e.state,e.dispatch;var t=Object(a.useState)({name:"",vatId:"",street:"",city:"",postCode:"",phone:"",currency:"",vatRate:"",logoImg:"",subdomain:""}),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(!0),u=Object(s.a)(c,2),d=u[0],m=u[1],g=Object(a.useState)(!1),f=Object(s.a)(g,2),v=f[0],y=f[1],h=Object(a.useState)(!1),k=Object(s.a)(h,2),E=k[0],O=k[1],x=Object(a.useState)({validate:!0,msg:""}),w=Object(s.a)(x,2),j=w[0],_=w[1],S=Object(a.useState)(""),C=Object(s.a)(S,2),D=C[0],I=C[1];Object(a.useEffect)(function(){!function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,O(!0),t.next=4,l.a.awrap(p.a.get("/company"));case 4:null!=(e=t.sent).data.company&&(i(Object(b.a)({},e.data.company)),I(e.data.company.subdomain)),O(!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),O(!1);case 12:case"end":return t.stop()}},null,null,[[0,9]])}()},[]);var N=function(e,t){"subdomain"===e&&(0===t.length?_({validate:!1,msg:"Subdomain Required."}):_({validate:!0,msg:""}));var n=Object(b.a)({},o);n[e]=t,i(Object(b.a)({},n))};return r.a.createElement("div",null,r.a.createElement(er,{loading:E.toString()}),r.a.createElement(Fn,{color:"grey"},"This information below will be used to generate invoices."),r.a.createElement(_a,{label:"Company Name",value:o.name,onChange:function(e){!function(e){0===e.length?m(!1):m(!0),i(Object(b.a)({},o,{name:e}))}(e)},style:{width:"100%",marginTop:24},className:d?"":"error"}),!d&&r.a.createElement("p",{className:Object(xn.a)(ki())},"Company Name is required."),r.a.createElement(_a,{label:"VAT ID",value:o.vatId,onChange:function(e){N("vatId",e)},style:{width:"100%",marginTop:14}}),r.a.createElement(la,{columns:"1fr 1fr",style:{width:"100%",marginTop:14}},r.a.createElement(_a,{label:"Street",value:o.street,onChange:function(e){N("street",e)},style:{width:"100%"}}),r.a.createElement(_a,{label:"City",value:o.city,onChange:function(e){N("city",e)},style:{width:"100%"}}),r.a.createElement(_a,{label:"Post Code",value:o.postCode,onChange:function(e){N("postCode",e)},style:{width:"100%"}}),r.a.createElement(_a,{label:"Phone Number",value:o.phone,onChange:function(e){N("phone",e)},style:{width:"100%"}})),r.a.createElement(Ia,null),r.a.createElement(la,{columns:"1fr 1fr",style:{width:"100%",marginTop:14}},r.a.createElement(Sa,{label:"Currency",searchEnabled:!0,options:Object.keys(yi),optionsForSearch:Object.keys(yi).map(function(e){return{value:e,label:e}}),selectedOption:o.currency.toUpperCase(),displayTransformer:function(e){return"".concat(yi[e].code," (").concat(yi[e].symbol,")")},onOptionSelected:function(e){N("currency",e)},style:{width:"100%"}}),r.a.createElement(_a,{label:"Default VAT Rate (%)",value:o.vatRate,onChange:function(e){N("vatRate",e)},style:{width:"100%"}})),r.a.createElement(Ia,null),r.a.createElement(la,{columns:"1fr",style:{width:"100%",marginTop:14}},r.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},r.a.createElement(va,null,"Company Logo"),r.a.createElement(vi.a,{onDrop:function(e){var t,n;return l.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return(t=new FormData).append("file",e[0]),y(!0),a.next=5,l.a.awrap(p.a.post("/upload/image",t,{headers:{"Content-Type":"multipart/form-data"}}));case 5:n=a.sent,y(!1),i(Object(b.a)({},o,{logoImg:n.data.fileNames[0]}));case 8:case"end":return a.stop()}})},accept:"image/png, image/gif, image/jpg, image/jpeg",multiple:!1},function(e){var t=e.getRootProps,n=e.getInputProps,a=e.isDragActive;return r.a.createElement(ji,Object.assign({},t(),{backgroundImage:o.logoImg?wr.a.API_URL+o.logoImg:""}),r.a.createElement("input",n()),r.a.createElement(_i,{isVisible:!(o.logoImg&&o.logoImg.length>0)},a?"Drop it like it's hot!":"Click me or drag a file to upload!"),v&&r.a.createElement(er,{loading:"true"}))}))),r.a.createElement(la,{columns:"1fr",style:{width:"100%",marginTop:14}},r.a.createElement(Gn,{primary:!0,onClick:function(){var e,t,n;return l.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,e={headers:{"Content-Type":"application/json"}},delete(t=Object(b.a)({},o)).subdomain,n={},!o.id){a.next=11;break}return a.next=8,l.a.awrap(p.a.put("/companies/".concat(o.id),JSON.stringify(t),e));case 8:n=a.sent,a.next=15;break;case 11:return a.next=13,l.a.awrap(p.a.post("/companies",JSON.stringify(t),e));case 13:n=a.sent,i(Object(b.a)({},o,{id:n.data.company.id}));case 15:a.next=19;break;case 17:a.prev=17,a.t0=a.catch(0);case 19:case"end":return a.stop()}},null,null,[[0,17]])},style:{maxWidth:"100px"},disabled:!d},"Save")),r.a.createElement(Ia,null),r.a.createElement(va,null,"Subdomain"),r.a.createElement(Si,null,r.a.createElement(_a,{value:o.subdomain,onChange:function(e){N("subdomain",e)},style:{width:"100%"},className:j.validate?"":"error"}),r.a.createElement(Ci,null,".heyagenda.com")),!j.validate&&r.a.createElement("p",{className:Object(xn.a)(hi())},j.msg),r.a.createElement(Gn,{primary:!0,onClick:function(){var e;return l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o.subdomainCount>=5)){t.next=3;break}return _({validate:!1,msg:"Sorry, but your new subdomain is not allowed. You may have reached your limit of five changes."}),t.abrupt("return");case 3:return t.prev=3,t.next=6,l.a.awrap(p.a.put("/companies/savesubdomain/".concat(o.id),{subdomain:o.subdomain,subdomainCount:o.subdomainCount+1},{headers:{"Content-Type":"application/json"}}));case 6:(e=t.sent).data.success?(I(e.data.company.subdomain),i(Object(b.a)({},o,{subdomainCount:e.data.company.subdomainCount}))):_({validate:!1,msg:e.data.error}),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(3);case 12:case"end":return t.stop()}},null,null,[[3,10]])},disabled:!o.subdomain.length>0||D===o.subdomain,style:{marginTop:14,marginBottom:20}},"Change subdomain"))};function Ii(){var e=Object(On.a)(["\n          position: absolute;\n          left: ",";\n          top: ","em;\n          width: ","em;\n          height: ","em;\n          border-radius: 50%;\n          transition: left 0.1s;\n          background: ",";\n        "]);return Ii=function(){return e},e}function Ni(){var e=Object(On.a)(["\n        display: inline-block;\n        padding: 0.2em;\n        background: ",";\n        width: ","em;\n        height: ","em;\n        border-radius: ","em;\n        position: relative;\n        transition: background 0.1s;\n        cursor: pointer;\n      "]);return Ni=function(){return e},e}var Ri=function(e){var t=e.onChange,n=e.enabled,a=void 0===n||n,o=e.style;return r.a.createElement("div",{style:o,onClick:t,className:Object(xn.a)(Ni(),a?Cn.accent_pink:Cn.grey,2.5,1.6,1.6)},r.a.createElement("div",{className:Object(xn.a)(Ii(),a?2.5-(1.6-.4)-.2+"em":"0.2em",.2,1.6-.4,1.6-.4,a?"white":"rgba(255,255,255,.75)")}))},Ai=n(331),Ti=n.n(Ai),Mi=n(103);function Bi(){var e=Object(On.a)(["\n                  color: #E92579;\n                  font-size: 0.8em;\n                  line-height: 28px;\n                  padding: 0 0.6em;\n                  margin: 0.2em 0 0 0;\n                "]);return Bi=function(){return e},e}function Li(){var e=Object(On.a)(["\n                  pointer-events: ",";\n                "]);return Li=function(){return e},e}function Fi(){var e=Object(On.a)(["\n              display: flex;\n              align-items: center;\n              margin-top: 1em;\n              border-radius: 4px;\n              width: 100%;              \n              p {\n                margin: 0;\n                padding: 0;\n              }\n              input {\n                flex: 1;\n              }\n            "]);return Fi=function(){return e},e}function Pi(){var e=Object(On.a)(["\n            display: flex;\n            flex-direction: column;\n            width: 100%;        \n            pointer-events: ",";\n          "]);return Pi=function(){return e},e}function qi(){var e=Object(On.a)(["\n            border: 1px solid ",";\n            padding: 0.2em 0.5em;\n            margin-top: 1em;\n            border-radius: 4px;\n            p {\n              margin: 0;\n              padding: 0;\n            }\n          "]);return qi=function(){return e},e}var Vi=function(e){var t=e.status,n=e.index,a=t.id,o=t.name,i=t.color;return r.a.createElement(Mi.b,{draggableId:a,index:n},function(e){return r.a.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,{className:Object(xn.a)(qi(),Cn.light)}),r.a.createElement(Tn,null,o," ",i&&r.a.createElement(Kn,{color:i,style:{marginLeft:4}})),r.a.createElement("div",Object.assign({style:{display:"none"}},e.dragHandleProps)))})},zi=function(e){var t=e.status,n=e.index,o=e.onDelete,i=e.onToggle,c=e.onChangeName,l=e.draggable,u=e.changeSelectedIndex,d=e.selectedStatusIndex,m=t.id,p=t.name,g=t.active,f=Object(a.useState)(""),b=Object(s.a)(f,2),v=b[0],y=b[1],h=Object(a.useState)(!0),k=Object(s.a)(h,2),E=k[0],O=k[1],x=Object(a.useContext)(fn),w=x.state,j=x.dispatch;Object(a.useEffect)(function(){y(p)},[p]);return r.a.createElement(Mi.b,{draggableId:m,index:n},function(e){return r.a.createElement("div",{className:Object(xn.a)(Pi(),d===n||w.settings.enableBookingSection?"inherit":"none")},r.a.createElement("div",Object.assign({ref:e.innerRef},e.draggableProps,{className:Object(xn.a)(Fi())}),r.a.createElement(ga,{onChange:function(e){var t;0===(t=e.target.value).length?O(!1):O(!0),y(t)},value:v,style:{marginRight:"1em"},placeholder:"Name for your custom status",onBlur:function(e){e.target.value,y(p),p.length>0?(O(!0),j({type:pe,payload:!0}),u(null)):O(!1)},autoFocus:-1===m,className:E?"":"error",onKeyPress:function(e){!function(e){"Enter"===e.key&&v.length>0&&(c(v,n),j({type:pe,payload:!0}))}(e)},onFocus:function(e){j({type:pe,payload:!1}),u(n)}}),r.a.createElement(Ri,{enabled:g,onChange:i,style:{marginRight:"0.5em"}}),r.a.createElement(jn,{size:20,svg:Ta.a,onClick:o,style:{marginRight:"0.5em"}}),r.a.createElement(jn,Object.assign({size:20,svg:Ti.a,style:{cursor:"grab",marginRight:"0.5em"}},e.dragHandleProps,{className:Object(xn.a)(Li(),E&&l?"inherit":"none")}))),!E&&r.a.createElement("p",{className:Object(xn.a)(Bi())},"Required"))})},Gi=function(e){var t=e.state,n=e.dispatch,o=Object(a.useState)(null),i=Object(s.a)(o,2),c=i[0],u=i[1];Object(a.useEffect)(function(){!function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:X}),t.next=4,l.a.awrap(p.a.get("/statuses"));case 4:e=t.sent,n({type:ee,payload:e.data.statuses}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:te});case 11:case"end":return t.stop()}},null,null,[[0,8]])}()},[]);var d=function(e,a){var r,o,i,c,s,u,d,m,g,f,b;return l.a.async(function(v){for(;;)switch(v.prev=v.next){case 0:if(r={headers:{"Content-Type":"application/json"}},-1!==t.bookingStatuses[a].id){v.next=19;break}return v.prev=2,n({type:ne}),o=t.bookingStatuses[a].active,i=null,c=a,"Enquiry"===t.bookingStatuses[a-1].name||"Proposal"===t.bookingStatuses[a-1].name?(i=t.bookingStatuses[a-1].name,c=0):null!=t.bookingStatuses[a-1].parentId&&(i=t.bookingStatuses[a-1].parentId,c=t.bookingStatuses[a-1].order+1),v.next=10,l.a.awrap(p.a.post("./statuses",JSON.stringify({name:e,active:o,parentId:i,order:c}),r));case 10:s=v.sent,n({type:ae,payload:s.data.status}),v.next=17;break;case 14:v.prev=14,v.t0=v.catch(2),n({type:re});case 17:v.next=31;break;case 19:return v.prev=19,n({type:oe}),u=t.bookingStatuses[a],d=u.id,m=u.active,g=u.order,f=u.parentId,v.next=24,l.a.awrap(p.a.put("./statuses/".concat(d),JSON.stringify({id:d,name:e,active:m,parentId:f,order:g}),r));case 24:b=v.sent,n({type:ie,payload:b.data.status}),v.next=31;break;case 28:v.prev=28,v.t1=v.catch(19),n({type:ce});case 31:case"end":return v.stop()}},null,null,[[2,14],[19,28]])},m=function(e){u(e)},g=function(){n({type:de}),u(t.bookingStatuses.length)};return r.a.createElement(r.a.Fragment,null,t.bookingStatusesLoading?r.a.createElement(er,{loading:t.bookingStatusesLoading.toString()}):r.a.createElement(r.a.Fragment,null,r.a.createElement(er,{loading:t.bookingStatusActionLoading.toString()}),r.a.createElement(Mi.a,{onDragEnd:function(e){var a,r,o,i,c,s,u,d,m,g;return l.a.async(function(f){for(;;)switch(f.prev=f.next){case 0:if(e.destination&&0!==e.destination.index){f.next=2;break}return f.abrupt("return");case 2:if(e.destination.index!==e.source.index){f.next=4;break}return f.abrupt("return");case 4:return a=0,e.destination.index>=1&&(a=e.destination.index-1),r=t.bookingStatuses[e.source.index],"default"===t.bookingStatuses[a].type?r.parentId=t.bookingStatuses[a].name:r.parentId=t.bookingStatuses[a].parentId,r.order=e.destination.index,n({type:oe}),n({type:"reorder_status",from:e.source.index,to:e.destination.index}),o=r.id,i=r.name,c=r.active,s=r.order,u=r.parentId,d={headers:{"Content-Type":"application/json"}},f.next=15,l.a.awrap(p.a.put("./statuses/".concat(o),JSON.stringify({id:o,name:i,active:c,parentId:u,order:s}),d));case 15:m=f.sent,g=(g=en(t.bookingStatuses,e.source.index,e.destination.index)).map(function(e){return e.id===m.data.status.id?m.data.status:e}),n({type:ge,payload:g});case 19:case"end":return f.stop()}})}},r.a.createElement(Mi.c,{droppableId:"list"},function(e){return r.a.createElement("div",Object.assign({ref:e.innerRef},e.droppableProps),r.a.createElement(Fn,{color:"grey"},"Add new custom booking statuses you can use in your organization. You can\u2019t edit or remove the default ones."),r.a.createElement("div",{style:{marginTop:10}},r.a.createElement(ua,null,"Status"),t.bookingStatuses.map(function(e,a){return"default"===e.type?r.a.createElement(Vi,{key:e.id,index:a,status:e}):r.a.createElement(zi,{key:e.id,index:a,status:e,onToggle:function(){return function(e){var a,r,o,i,c,s,u,d;return l.a.async(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,a={headers:{"Content-Type":"application/json"}},n({type:oe}),r=t.bookingStatuses[e],o=r.id,i=r.name,c=r.active,s=r.order,u=r.parentId,m.next=6,l.a.awrap(p.a.put("./statuses/".concat(o),JSON.stringify({id:o,name:i,active:!c,parentId:u,order:s}),a));case 6:d=m.sent,n({type:ie,payload:d.data.status}),m.next=13;break;case 10:m.prev=10,m.t0=m.catch(0),n({type:ce});case 13:case"end":return m.stop()}},null,null,[[0,10]])}(a)},onDelete:function(){!function(e){var a;l.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(-1!==t.bookingStatuses[e].id){r.next=5;break}n({type:me}),u(null),r.next=16;break;case 5:return r.prev=5,n({type:le}),a=t.bookingStatuses[e].id,r.next=10,l.a.awrap(p.a.delete("/statuses/".concat(a)));case 10:n({type:se,payload:a}),r.next=16;break;case 13:r.prev=13,r.t0=r.catch(5),n({type:ue});case 16:case"end":return r.stop()}},null,null,[[5,13]])}(a)},onChangeName:d,draggable:t.enableBookingSection,changeSelectedIndex:m,selectedStatusIndex:c})}),e.placeholder),r.a.createElement(Gn,{primary:!0,onClick:g,iconComponent:function(){return r.a.createElement(Ra,{fill:Cn.white})},style:{marginTop:"2em"},disabled:!t.enableBookingSection},"Add Status"))}))))},Ui=n(336),Hi=n.n(Ui),Ji=function(e){var t=e.side,n=void 0===t?24:t,a=e.fill,o=void 0===a?"#E92579":a;return r.a.createElement("svg",{width:n.toString(),height:n.toString(),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},r.a.createElement("path",{fill:o,d:"M384 250v12c0 6.6-5.4 12-12 12h-98v98c0 6.6-5.4 12-12 12h-12c-6.6 0-12-5.4-12-12v-98h-98c-6.6 0-12-5.4-12-12v-12c0-6.6 5.4-12 12-12h98v-98c0-6.6 5.4-12 12-12h12c6.6 0 12 5.4 12 12v98h98c6.6 0 12 5.4 12 12zm120 6c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-32 0c0-119.9-97.3-216-216-216-119.9 0-216 97.3-216 216 0 119.9 97.3 216 216 216 119.9 0 216-97.3 216-216z"}))};n(506);function Ki(){var e=Object(On.a)(["\n  margin-left: auto;\n"]);return Ki=function(){return e},e}function Yi(){var e=Object(On.a)(["\n  margin: 0;\n  line-height: 34px;\n"]);return Yi=function(){return e},e}function Wi(){var e=Object(On.a)(["\n  display: block;\n  width: 14px;\n  height: 14px;\n  background-color:",";\n  border-radius: 2px;\n  margin: 0 auto;\n"]);return Wi=function(){return e},e}function $i(){var e=Object(On.a)(["\n  border-bottom: 1px solid #E6E8E9;  \n  margin-bottom: 1em;\n  width: 100%;\n"]);return $i=function(){return e},e}function Qi(){var e=Object(On.a)(["  \n  margin-right: 1em;\n"]);return Qi=function(){return e},e}function Zi(){var e=Object(On.a)(["\n  display: flex;\n  width: 30%;\n  padding-right: 1em;\n"]);return Zi=function(){return e},e}function Xi(){var e=Object(On.a)(["\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  margin-bottom: 1em;\n  align-items: center;\n  &:last-child {\n    margin-bottom: 0;\n  }\n"]);return Xi=function(){return e},e}function ec(){var e=Object(On.a)(["\n  display: flex;\n  padding: 1em;\n  background-color: rgb(241, 243, 245);\n  margin-bottom: 1em;\n  flex-direction: column;\n"]);return ec=function(){return e},e}var tc=In.a.div(ec()),nc=In.a.div(Xi()),ac=In.a.div(Zi()),rc=Object(In.a)(Gn)(Qi()),oc=In.a.div($i()),ic=In.a.span(Wi(),function(e){return e.color}),cc=Object(In.a)(Fn)(Yi()),lc=Object(In.a)(jn)(Ki()),sc=function(){var e=Object(a.useState)(!0),t=Object(s.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(!1),c=Object(s.a)(i,2),u=(c[0],c[1]),d=Object(a.useState)(-1),m=Object(s.a)(d,2),g=m[0],b=m[1],v=Object(a.useState)([{color:pn[0],content:[[{condition_key:mn[0].condition_key.value,condition_type:mn[0].condition_types[0].value,condition_value:mn[0].condition_values[0].value}]]}]),y=Object(s.a)(v,2),h=y[0],k=y[1];Object(a.useEffect)(function(){!function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(p.a.get("/bookingcolor"));case 3:(e=t.sent).data.bookingColor&&(b(e.data.bookingColor.id),k(JSON.parse(e.data.bookingColor.color))),o(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),o(!1);case 11:case"end":return t.stop()}},null,null,[[0,8]])}()},[]);var E=function(e){var t,n;return l.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,t={headers:{"Content-Type":"application/json"}},u(!0),-1!==g){a.next=10;break}return a.next=6,l.a.awrap(p.a.post("/bookingcolor",{color:JSON.stringify(e)},t));case 6:n=a.sent,b(n.data.bookingColor.id),a.next=13;break;case 10:return a.next=12,l.a.awrap(p.a.put("/bookingcolor/".concat(g),{color:JSON.stringify(e)},t));case 12:n=a.sent;case 13:u(!1),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(0),u(!1);case 19:case"end":return a.stop()}},null,null,[[0,16]])},O=function(e,t,n,a){var r=Object(f.a)(h);r[t].content[n][a].condition_key!==e&&(r[t].content[n][a].condition_key=e,r[t].content[n][a].condition_type=function(e){var t=mn.filter(function(t){return t.condition_key.value===e});return t.length>0?t[0].condition_types[0].value:""}(e),r[t].content[n][a].condition_value="payment_status"===e?function(e){var t=mn.filter(function(t){return t.condition_key.value===e});return t.length>0?t[0].condition_values[0].value:""}(e):"",k(Object(f.a)(r)),E(r))},x=function(e){var t=mn.filter(function(t){return t.condition_key.value===e});return t.length>0?t[0].condition_types.map(function(e){return e.value}):[]},w=function(e){var t=mn.filter(function(t){return t.condition_key.value===e});return t.length>0?t[0].condition_values.map(function(e){return e.value}):[]},j=Hi()(function(e,t,n,a){E(h)},1e3),_=Object(s.a)(j,1)[0];return r.a.createElement("div",null,r.a.createElement(er,{loading:n.toString()}),r.a.createElement(Fn,{color:"grey"},"Add a custom colour to your booking Calendar"),h.map(function(e,t){return r.a.createElement(tc,{key:t},r.a.createElement(nc,null,r.a.createElement(cc,{color:"grey"},"Use"),r.a.createElement(Sa,{label:"",options:pn,displayTransformer:function(e){return r.a.createElement(ic,{key:e,color:e})},style:{marginLeft:"0.3em",marginRight:"0.3em"},selectedOption:e.color,onOptionSelected:function(e){return function(e,t){var n=Object(f.a)(h);h[t].color!==e&&(n[t].color=e,k(Object(f.a)(n)),E(n))}(e,t)}}),r.a.createElement(cc,{color:"grey"},"when...")),e.content.map(function(n,a){return r.a.createElement(r.a.Fragment,{key:"itemTwo"+a},a>0&&r.a.createElement(cc,null,"...or When"),n.map(function(e,n){return r.a.createElement(nc,{key:"item"+n},r.a.createElement(ac,null,r.a.createElement(Sa,{label:"",options:mn.map(function(e){return e.condition_key.value}),style:{width:"100%"},selectedOption:e.condition_key,displayTransformer:function(e){return function(e){var t=mn.filter(function(t){return t.condition_key.value==e});return t.length>0?t[0].condition_key.label:""}(e)},onOptionSelected:function(e){O(e,t,a,n)}})),r.a.createElement(ac,null,r.a.createElement(Sa,{label:"",options:x(e.condition_key),style:{width:"100%"},selectedOption:e.condition_type,displayTransformer:function(t){return function(e,t){var n=mn.filter(function(t){return t.condition_key.value===e});if(n.length>0){var a=n[0].condition_types.filter(function(e){return e.value===t});return a.length>0?a[0].label:""}return""}(e.condition_key,t)},onOptionSelected:function(e){!function(e,t,n,a){var r=Object(f.a)(h);r[t].content[n][a].condition_type=e,k(Object(f.a)(r)),E(r)}(e,t,a,n)}})),r.a.createElement(ac,null,"title"===e.condition_key&&r.a.createElement(_a,{label:"",value:e.condition_value,style:{width:"100%"},onChange:function(e){!function(e,t,n,a){var r=Object(f.a)(h);r[t].content[n][a].condition_value!==e&&(r[t].content[n][a].condition_value=e,k(Object(f.a)(r)))}(e,t,a,n),_(e,t,a,n)}}),("payment_status"===e.condition_key||"slot_type"===e.condition_key)&&r.a.createElement(Sa,{label:"",options:w(e.condition_key),displayTransformer:function(t){return function(e,t){var n=mn.filter(function(t){return t.condition_key.value===e});if(n.length>0){var a=n[0].condition_values.filter(function(e){return e.value===t});return a.length>0?a[0].label:""}return""}(e.condition_key,t)},selectedOption:e.condition_value,style:{width:"100%"},onOptionSelected:function(e){return function(e,t,n,a){var r=Object(f.a)(h);r[t].content[n][a].condition_value!==e&&(r[t].content[n][a].condition_value=e,k(Object(f.a)(r)),E(r))}(e,t,a,n)}})),r.a.createElement(lc,{size:20,svg:Ta.a,onClick:function(){return function(e,t,n){var a=Object(f.a)(h);a[e].content[t].splice(n,1),0===a[e].content[t].length&&a[e].content.splice(t,1),0===a[e].content.length&&a.splice(e,1),k(Object(f.a)(a)),E(a)}(t,a,n)}}))}),r.a.createElement(nc,null,r.a.createElement(rc,{outline:!0,onClick:function(){return function(e,t){var n=Object(f.a)(h);n[e].content[t].push({condition_key:mn[0].condition_key.value,condition_type:mn[0].condition_types[0].value,condition_value:mn[0].condition_values[0].value}),k(Object(f.a)(n)),E(n)}(t,a)},iconComponent:function(){return r.a.createElement(Ji,{fill:Cn.grey,side:16})}},"\xa0And"),a===e.content.length-1&&r.a.createElement(rc,{outline:!0,onClick:function(){return function(e,t){var n=Object(f.a)(h);n[e].content.push([{condition_key:mn[0].condition_key.value,condition_type:mn[0].condition_types[0].value,condition_value:mn[0].condition_values[0].value}]),k(Object(f.a)(n)),E(n)}(t)},iconComponent:function(){return r.a.createElement(Ji,{fill:Cn.grey,side:16})}},"\xa0Or")),a<e.content.length-1&&r.a.createElement(oc,null))}))}),r.a.createElement(nc,null,r.a.createElement(Gn,{primary:!0,onClick:function(){var e=[].concat(Object(f.a)(h),[{color:pn[0],content:[[{condition_key:mn[0].condition_key.value,condition_type:mn[0].condition_types[0].value,condition_value:mn[0].condition_values[0].value}]]}]);k(Object(f.a)(e)),E(e)},iconComponent:function(){return r.a.createElement(Ra,{fill:Cn.white})}},"Add a condition")))};function uc(){var e=Object(On.a)(["\n                      :hover {\n                        opacity: 0.7;\n                      }\n                      :active {\n                        opacity: 0.9;\n                      }\n                      cursor: pointer;\n                    "]);return uc=function(){return e},e}function dc(){var e=Object(On.a)(["\n                  width: 70%;\n                  ","\n                "]);return dc=function(){return e},e}function mc(){var e=Object(On.a)(["\n                display: flex;\n                justify-content: space-between;\n              "]);return mc=function(){return e},e}function pc(){var e=Object(On.a)(["\n                      color: #E92579;\n                      font-size: 0.8em;\n                      line-height: 28px;\n                      margin: 0 0 0 10px !important;\n                    "]);return pc=function(){return e},e}function gc(){var e=Object(On.a)(["\n                display: flex;                \n                "]);return gc=function(){return e},e}function fc(){var e=Object(On.a)(["\n                display: flex;\n                justify-content: space-between;\n              "]);return fc=function(){return e},e}function bc(){var e=Object(On.a)(["\n            button {\n              display: none;\n            }\n          "]);return bc=function(){return e},e}function vc(){var e=Object(On.a)(["\n        width: 100%;\n        background-color: ",";\n        margin-right: 1em;\n        padding: 5px 10px;\n        border-bottom: 1px solid ",";\n        p {\n          margin: 0;\n          height: 28px;\n        }\n        input {\n          height: 28px;\n        }\n        pointer-events: ",";\n        opacity: ",";\n        ","\n        :hover button {\n          display: inline-block;\n        }\n        button {\n          background: none;\n          color: inherit;\n          border: none;\n          cursor: pointer;\n          font-size: 0.8em;\n          /* text-decoration: underline; */\n          outline: none;\n        }\n      "]);return vc=function(){return e},e}function yc(){var e=Object(On.a)(["\n        display: flex;\n        justify-content: space-between;\n        margin-top: 0.8 em;\n      "]);return yc=function(){return e},e}function hc(){var e=Object(On.a)(["\n      width: 40%;\n      min-width: 350px;\n      margin-right: 2em;\n      position: relative;      \n    "]);return hc=function(){return e},e}function kc(){var e=Object(On.a)(["\n        display: flex;\n        position: relative;\n        /* background-color: green; */\n      "]);return kc=function(){return e},e}var Ec=function(e){var t=e.children,n=void 0===t?null:t,o=Object(a.useContext)(fn).state;return r.a.createElement("div",{className:Object(xn.a)(kc())},r.a.createElement(er,{loading:o.settings.loading.toString()}),!o.settings.loading&&n)},Oc=function(e){var t=e.title,n=void 0===t?"":t,a=e.buttonTitle,o=void 0===a?"":a,i=e.message,c=void 0===i?null:i,l=e.onButtonClick,s=e.children,u=void 0===s?null:s,d=e.loading,m=void 0!==d&&d;return r.a.createElement("div",{className:Object(xn.a)(hc())},r.a.createElement("div",{className:Object(xn.a)(yc())},n&&r.a.createElement(Rn,null,n),o&&r.a.createElement(Gn,{primary:!0,onClick:l,disabled:m},o)),c&&r.a.createElement(Tn,null,c),u)},xc=function(e){var t=e.title,n=void 0===t?"":t,o=e.newMode,i=void 0!==o&&o,c=e.insertPlaceholder,l=void 0===c?"":c,u=e.onAddValue,d=void 0===u?null:u,m=e.onEditValue,p=void 0===m?null:m,g=e.onDelete,f=void 0===g?null:g,b=e.onCancel,v=void 0===b?null:b,y=e.onClick,h=void 0===y?null:y,k=e.selected,E=void 0!==k&&k,O=e.clickable,x=void 0!==O&&O,w=e.accentColor,j=void 0===w?null:w,_=e.loading,S=void 0!==_&&_,C=Object(a.useState)(n),D=Object(s.a)(C,2),I=D[0],N=D[1],R=Object(a.useState)(i),A=Object(s.a)(R,2),T=A[0],M=A[1],B=Object(a.useState)(!0),L=Object(s.a)(B,2),F=L[0],P=L[1];return r.a.createElement("div",{className:Object(xn.a)(vc(),E?Cn.accent_pink+"10":"white",Cn.lighter,S?"none":"initial",S?"0.7":"1",!i&&!T&&Object(xn.a)(bc()))},T?r.a.createElement("div",{className:Object(xn.a)(fc())},r.a.createElement("div",{className:Object(xn.a)(gc())},r.a.createElement(_a,{autoFocus:!0,placeholder:l,value:I,onChange:function(e){!function(e){N(e),0===e.length?P(!1):P(!0)}(e)},className:F?"":"error"}),!F&&r.a.createElement("p",{className:Object(xn.a)(pc())},"Requiried")),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){i?v():(M(!1),N(n))},style:{color:"gray"}},"cancel"),r.a.createElement("button",{onClick:function(){i?0===I.length?P(!1):d(I):(p(I),M(!1))},style:{color:"green"}},"save"))):r.a.createElement("div",{className:Object(xn.a)(mc())},r.a.createElement(Tn,{color:"dark",onClick:h,className:Object(xn.a)(dc(),x&&Object(xn.a)(uc()))},j&&r.a.createElement(Kn,{color:j})," ",n),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return f()},style:{color:"red"}},"remove"),r.a.createElement("button",{onClick:function(){return M(!0)}},"edit"))))},wc=function(e){var t=e.state,n=e.dispatch,o=Object(a.useState)(!1),i=Object(s.a)(o,2),c=i[0],u=i[1],d=Object(a.useState)(!1),m=Object(s.a)(d,2),g=m[0],f=m[1],b=Object(a.useState)(null),v=Object(s.a)(b,2),y=v[0],h=v[1],k=null!==y&&function(e){var n=t.venues.filter(function(t){return t.id===e});return n.length>0?n[0]:[]}(y);Object(a.useEffect)(function(){!function(){var e,t;l.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:_}),a.next=4,l.a.awrap(p.a.get("/venues"));case 4:e=a.sent,(t=e.data.venues).map(function(e){return e.spaces||(e.spaces=[]),e}),n({type:S,payload:t}),a.next=14;break;case 10:a.prev=10,a.t0=a.catch(0),console.log("Get Venus Setting failed."),n({type:C});case 14:case"end":return a.stop()}},null,null,[[0,10]])}()},[]);return r.a.createElement(Ec,null,r.a.createElement(Oc,{title:"Venues",buttonTitle:"Add Venue",message:0===t.venues.length&&!c&&"Add a venue to get started",onButtonClick:function(){h(null),u(!0)},loading:t.venueActionLoading},r.a.createElement(er,{loading:t.venueActionLoading.toString()}),c&&r.a.createElement(xc,{newMode:!0,insertPlaceholder:"Venue Name",onAddValue:function(e){!function(e){var t,a;l.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:D}),r.prev=1,t={headers:{"Content-Type":"application/json"}},r.next=5,l.a.awrap(p.a.post("/venues",JSON.stringify({name:e}),t));case 5:a=r.sent,n({type:I,payload:a.data.venue}),u(!1),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),n({type:N});case 13:case"end":return r.stop()}},null,null,[[1,10]])}(e)},onCancel:function(){u(!1)},loading:t.venueActionLoading}),t.venues.map(function(e){return r.a.createElement(xc,{selected:y===e.id,clickable:!0,loading:t.venueActionLoading,key:e.id,title:e.name,onEditValue:function(t){!function(e,t){var a;l.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:M}),r.prev=1,a={headers:{"Content-Type":"application/json"}},r.next=5,l.a.awrap(p.a.put("/venues/".concat(e),JSON.stringify({id:e,name:t}),a));case 5:n({type:B,payload:{id:e,name:t}}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n({type:L});case 11:case"end":return r.stop()}},null,null,[[1,8]])}(e.id,t)},onDelete:function(){var t;t=e.id,l.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return h(null),n({type:R}),e.prev=2,e.next=5,l.a.awrap(p.a.delete("/venues/".concat(t)));case 5:n({type:A,payload:t}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),n({type:T});case 11:case"end":return e.stop()}},null,null,[[2,8]])},onClick:function(){h(e.id),function(e){var t;l.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:F}),a.prev=1,a.next=4,l.a.awrap(p.a.get("/spaces/venue/".concat(e)));case 4:t=a.sent,n({type:P,payload:t.data.spaces}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),n({type:q});case 11:case"end":return a.stop()}},null,null,[[1,8]])}(e.id)}})})),r.a.createElement(Oc,{title:k?k.name:"Spaces",buttonTitle:null!==y&&"Add Space",message:null===y?"Select a venue to view its spaces":0!==t.selectedVenueSpaces.length||g?void 0:"Add a Space to get started",onButtonClick:function(){return f(!0)},loading:t.spaceActionLoading},t.spacesLoading?r.a.createElement(er,{loading:t.spacesLoading.toString()}):r.a.createElement(r.a.Fragment,null,r.a.createElement(er,{loading:t.spaceActionLoading.toString()}),g&&r.a.createElement(xc,{newMode:!0,insertPlaceholder:"Space Name",onAddValue:function(e){!function(e,t){var a,r;l.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:return n({type:V}),o.prev=1,a={headers:{"Content-Type":"application/json"}},o.next=5,l.a.awrap(p.a.post("/spaces",JSON.stringify({VenueId:e,name:t}),a));case 5:r=o.sent,n({type:z,payload:r.data.space}),f(!1),o.next=14;break;case 10:o.prev=10,o.t0=o.catch(1),n({type:G}),f(!1);case 14:case"end":return o.stop()}},null,null,[[1,10]])}(y,e)},onCancel:function(){f(!1)},loading:t.spaceActionLoading}),t.selectedVenueSpaces.map(function(e,a){return r.a.createElement(xc,{key:e.id,title:e.name,accentColor:e.accentColor,onEditValue:function(t){!function(e,t){var a;l.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return n({type:U}),r.prev=1,a={headers:{"Content-Type":"application/json"}},r.next=5,l.a.awrap(p.a.put("/spaces/".concat(e),JSON.stringify({id:e,name:t}),a));case 5:n({type:H,payload:{id:e,name:t}}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),n({type:J});case 11:case"end":return r.stop()}},null,null,[[1,8]])}(e.id,t)},onDelete:function(){var t;t=e.id,l.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:K}),e.prev=1,e.next=4,l.a.awrap(p.a.delete("/spaces/".concat(t)));case 4:n({type:Y,payload:t}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n({type:W});case 10:case"end":return e.stop()}},null,null,[[1,7]])},loading:t.spaceActionLoading})}))))};function jc(){var e=Object(On.a)(["\n\t\tdisplay: flex;\n\t\tjustify-content: flex-start;\n\t\tmargin-top: 1em;\n\t"]);return jc=function(){return e},e}var _c=function(){var e=In.a.div(jc()),t=Object(a.useContext)(fn),n=t.state,o=t.dispatch,i=Object(a.useState)({public_key:{value:"",validate:!0}}),c=Object(s.a)(i,2),u=c[0],d=c[1];Object(a.useEffect)(function(){d({public_key:{value:n.auth.user.stripe_public_key?n.auth.user.stripe_public_key:"",validate:!(!n.auth.user.stripe_public_key||0===n.auth.user.stripe_public_key.length)}})},[n.auth.user.stripe_public_key]);return r.a.createElement("div",null,r.a.createElement(er,{loading:(n.auth.loading||n.auth.loadingPayment).toString()}),0===n.auth.user.stripe_status?r.a.createElement(Tn,null,"If you have a Stripe Account, please connect your Stripe Account to the Server. After Stripe Account connection, You can pay your invoice to the server with Online Payment Methond."):r.a.createElement(Tn,null,"Your Stripe Account has been already connected to the Server. You can pay your invoice to the Server with Online Payment Method."),r.a.createElement(e,null,r.a.createElement(Gn,{primary:!0,onClick:function(){var e;return l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(0===n.auth.user.stripe_status){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,o({type:xt}),t.next=7,l.a.awrap(p.a.post("/bookings/getCreateStripeAccountLink"));case 7:e=t.sent,window.location.href=e.data.url,o({type:wt,public_key:u.public_key.value}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),o({type:jt});case 15:case"end":return t.stop()}},null,null,[[2,12]])},disabled:0!==n.auth.user.stripe_status},"Connect Your Stripe")))},Sc=n(101);function Cc(){var e=Object(On.a)(["\n  margin-left: 0.3em;\n  color: white;  \n"]);return Cc=function(){return e},e}function Dc(){var e=Object(On.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"]);return Dc=function(){return e},e}function Ic(){var e=Object(On.a)(["\n  margin-top: 3em;\n"]);return Ic=function(){return e},e}function Nc(){var e=Object(On.a)(["\n  margin-left: 1em;\n"]);return Nc=function(){return e},e}function Rc(){var e=Object(On.a)(["\n  border-color: #E92579;\n  background: #E92579;\n  color: white;\n  justify-content: center;\n  font-size: 1em;\n  text-align: center;\n  border: 1px solid #E6E8E9;\n  border-radius: 0.25em;\n  height: 34px;\n  padding: 0 0.7em;\n  align-items: center;\n  display: flex;\n"]);return Rc=function(){return e},e}function Ac(){var e=Object(On.a)(["\n  position: relative;  \n  display: flex;\n  align-items: center;\n"]);return Ac=function(){return e},e}var Tc=In.a.div(Ac()),Mc=In.a.div(Rc()),Bc=In.a.div(Nc()),Lc=In.a.div(Ic()),Fc=In.a.div(Dc()),Pc=Object(In.a)(ra.a)(Cc()),qc=function(){var e=Object(a.useContext)(fn).state,t=Object(a.useState)(!1),n=Object(s.a)(t,2),o=n[0],i=n[1];return r.a.createElement("div",null,r.a.createElement(Na,null,r.a.createElement(Tc,null,r.a.createElement(Mc,null,r.a.createElement(ra.a,{className:"fa-icons",icon:oa.b})),r.a.createElement(Bc,null,r.a.createElement(wa,{color:Cn.dark,style:{fontSize:"1em",margin:"0"}},"Setup Instructions"),r.a.createElement(wa,null,"Find instructions on how to setup your website booking widget."))),r.a.createElement(Lc,null,r.a.createElement(Tc,{style:{marginBottom:"1em"}},r.a.createElement(wa,{style:{minWidth:"100px"}},"Widget ID"),r.a.createElement(ga,{value:e.auth.user.uuid,disabled:!0,style:{flex:1}}),r.a.createElement(Sc.CopyToClipboard,{text:e.auth.user.uuid},r.a.createElement(Gn,{primary:!0,style:{marginLeft:"1em"}},"Copy",r.a.createElement(Pc,{className:"fa-icons",icon:oa.c})))),r.a.createElement(Tc,null,r.a.createElement(wa,{style:{minWidth:"100px"}},"Widget"),r.a.createElement(Gn,{primary:!0,onClick:function(){return i(!0)}},r.a.createElement(ra.a,{className:"fa-icons",icon:oa.d,style:{marginRight:"0.3em"}}),"Booking Widget Setup Instruction"))),r.a.createElement(Dn,{isOpen:o,onClose:function(){return i(!1)}},r.a.createElement(Ja,null,r.a.createElement(Ka,null,r.a.createElement(Ya,null,r.a.createElement(Rn,null,"Booking Widget Setup Instruction"))),r.a.createElement(Wa,null,r.a.createElement(wa,{style:{width:"100%",marginBottom:"1em"}},"1. Copy & Paste the following code below in your page."),r.a.createElement(Fc,null,r.a.createElement(Tc,null,r.a.createElement(wa,{style:{color:Cn.dark}},"You can add it in the HTML head section.")),r.a.createElement(Tc,null,r.a.createElement(ga,{value:'<script src="https://calendarwidget.herokuapp.com/calendarwidget.js"><\/script>',disabled:!0,style:{flex:1}}),r.a.createElement(Sc.CopyToClipboard,{text:'<script src="https://calendarwidget.herokuapp.com/calendarwidget.js"><\/script>'},r.a.createElement(Gn,{primary:!0,style:{marginLeft:"1em"}},"Copy",r.a.createElement(Pc,{className:"fa-icons",icon:oa.c}))))),r.a.createElement(wa,{style:{width:"100%",marginTop:"2em",marginBottom:"1em"}},"2. Add following Markup & Script code."),r.a.createElement(Fc,null,r.a.createElement(Tc,null,r.a.createElement(wa,{style:{color:Cn.dark}},"Add following Markup code within the body of the page, where you want to display your calendar.")),r.a.createElement(Tc,{style:{marginBottom:"1em"}},r.a.createElement(ga,{value:'<div id="calendar-widget" style="width: 100%; height: 100vh"></div>',disabled:!0,style:{flex:1}}),r.a.createElement(Sc.CopyToClipboard,{text:'<div id="calendar-widget" style="width: 100%; height: 100vh"></div>'},r.a.createElement(Gn,{primary:!0,style:{marginLeft:"1em"}},"Copy",r.a.createElement(Pc,{className:"fa-icons",icon:oa.c})))),r.a.createElement(Tc,null,r.a.createElement(wa,{style:{color:Cn.dark}},"Add following script code to create Calendar.")),r.a.createElement(Tc,{style:{marginBottom:"1em"}},r.a.createElement(ga,{value:'<script>calendarWidget("'.concat(e.auth.user.uuid,'")<\/script>'),disabled:!0,style:{flex:1}}),r.a.createElement(Sc.CopyToClipboard,{text:'<script>calendarWidget("'.concat(e.auth.user.uuid,'")<\/script>')},r.a.createElement(Gn,{primary:!0,style:{marginLeft:"1em"}},"Copy",r.a.createElement(Pc,{className:"fa-icons",icon:oa.c}))))))))))},Vc=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("iframe",{src:"https://heyagenda.kampsite.co/",width:"100%",height:"100%",style:{border:"none"}}))},zc=function(e){var t=Object(a.useState)("Venues and Spaces"),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(a.useContext)(fn),l=c.state,u=c.dispatch,d=l.settings;return r.a.createElement(la,{fullheight:!0,columns:"".concat(bi.leftPanelWidth," 1fr")},r.a.createElement(fi,{selectedItem:o,items:["Venues and Spaces","Booking Status","Company Settings","Online Payments","Custom Booking Colour","Get Booking Widget","Suggestion"],onClick:function(e){i(e)}}),function(){switch(o){case"Company Settings":return r.a.createElement(Di,{state:d,dispatch:u});case"Booking Status":return r.a.createElement(Gi,{state:d,dispatch:u});case"Venues and Spaces":return r.a.createElement(wc,{state:d,dispatch:u});case"Online Payments":return r.a.createElement(_c,{state:d,dispatch:u});case"Custom Booking Colour":return r.a.createElement(sc,null);case"Get Booking Widget":return r.a.createElement(qc,null);case"Suggestion":return r.a.createElement(Vc,null);default:throw new Error("unhandled section")}}())};function Gc(){var e=Object(On.a)(["\n          margin-right: 1em;\n          p {\n            margin: 0;\n            :first-of-type {\n              margin-bottom: 0.05em;\n            }\n          }\n\n          div:last-child {\n            margin-left: auto;\n          }\n        "]);return Gc=function(){return e},e}function Uc(){var e=Object(On.a)(["\n        background: white;\n        padding: 0.5em 1em;\n        border-radius: 0.5em;\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n\n        width: 100%;\n\n        margin-left: auto;\n        margin-right: auto;\n        margin-bottom: 1em;\n      "]);return Uc=function(){return e},e}var Hc=function(e){var t=e.onSelectBooking,n=e.booking,a=n.eventName,o=n.customer,i=n.received;return r.a.createElement("div",{className:Object(xn.a)(Uc())},r.a.createElement("div",{className:Object(xn.a)(Gc())},r.a.createElement(Tn,{color:"dark"},a),r.a.createElement(Fn,{color:"grey"},o.name),r.a.createElement(Fn,{color:"light_grey"},Br(i))),r.a.createElement(Gn,{primary:!0,onClick:function(){t()}},"New Invoice"))},Jc=function(e){var t=e.onSelectBooking,n=Object(a.useContext)(fn).state,o=Object(a.useState)(""),i=Object(s.a)(o,2),c=i[0],l=i[1],u=n.bookings.bookings,d=Object(a.useState)([]),m=Object(s.a)(d,2),p=m[0],g=m[1];return Object(a.useEffect)(function(){g(Object(f.a)(u.filter(function(e){return e.eventName.toLowerCase().includes(c.toLowerCase())})))},[u,c]),r.a.createElement(Ja,null,r.a.createElement(Ka,null,r.a.createElement(Ya,null,r.a.createElement(Rn,{style:{margin:0}},"Select a Booking to associate to the invoice"))),r.a.createElement(Wa,null,r.a.createElement(ui,{query:c,placeholder:"Search Bookings",onChange:function(e){return l(e.target.value)},style:{marginBottom:30}}),p.map(function(e){if(e.customer)return r.a.createElement(Hc,{key:e.id,booking:e,onSelectBooking:function(){return t(e.id)}})})))};function Kc(){var e=Object(On.a)(["\n            display: flex;\n            align-items: center;\n            width: 100%;\n          "]);return Kc=function(){return e},e}var Yc=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(!1),c=Object(s.a)(i,2),u=c[0],d=c[1],m=Object(a.useState)(null),g=Object(s.a)(m,2),v=g[0],y=g[1],h=Object(a.useState)(!1),k=Object(s.a)(h,2),E=k[0],O=k[1],x=Object(a.useState)("All"),w=Object(s.a)(x,2),j=w[0],_=w[1],S=Object(a.useContext)(fn),C=S.state,D=S.dispatch,I=Object(a.useState)(""),N=Object(s.a)(I,2),R=N[0],A=N[1],T=Object(a.useState)(!0),M=Object(s.a)(T,2),B=M[0],L=M[1],F=Object(a.useState)(!1),P=Object(s.a)(F,2),q=P[0],V=P[1],z=Object(a.useState)({}),G=Object(s.a)(z,2),U=G[0],H=G[1];Object(a.useEffect)(function(){L(!0),p.a.all([p.a.get("/customers"),p.a.get("/statuses"),p.a.get("/bookings"),p.a.get("/bookings/invoices/all")]).then(p.a.spread(function(e,t,n,a){D({type:be,payload:e.data.customers}),D({type:We,payload:t.data.statuses}),D({type:Ce,payload:n.data.bookings}),D({type:dt,payload:a.data.invoices}),L(!1)})).catch(function(e){return console.log(e)})},[]);var J=function(e,t,n){var a,r;return l.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(!t){o.next=21;break}return o.prev=1,a={headers:{"Content-Type":"application/json"}},D({type:bt}),o.next=6,l.a.awrap(p.a.put("/bookings/".concat(e.BookingId,"/invoices/").concat(e.id),{slots:JSON.stringify(e.slots),cost_items:JSON.stringify(e.costItems),value:e.value,payment_method:e.payment_method,discount:e.discount,customerId:e.customerId?e.customerId:e.booking.customerId,sub_total:e.amount,grand_total:e.grand_total,status:n||e.status},a));case 6:if(r=o.sent,D({type:vt,payload:r.data.invoice}),"Credit Card"!==e.payment_method||!C.auth.user.stripe_public_key||!C.auth.user.stripe_public_key.length){o.next=13;break}H({amount:100*Number(e.sub_total.toFixed(2)),currency:C.settings.companyInfo.currency.length?C.settings.companyInfo.currency:"USD",id:e.id,bookingId:e.BookingId}),V(!0),o.next=16;break;case 13:if("Online Payment"!==e.payment_method){o.next=16;break}return o.next=16,l.a.awrap(p.a.post("/bookings/transferFunds",{amount:100*Number(e.sub_total.toFixed(2)),currency:C.settings.companyInfo.currency.length?C.settings.companyInfo.currency:"USD",id:e.id}).then(function(t){var n;return l.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(!t.data.success){r.next=6;break}return D({type:bt}),r.next=4,l.a.awrap(p.a.put("/bookings/".concat(e.BookingId,"/invoices/").concat(e.id),{slots:JSON.stringify(e.slots),cost_items:JSON.stringify(e.costItems),value:e.value,payment_method:e.payment_method,discount:e.discount,customerId:e.customerId?e.customerId:e.booking.customerId,sub_total:e.sub_total,grand_total:e.grand_total,status:"Paid"},a));case 4:n=r.sent,D({type:vt,payload:n.data.invoice});case 6:case"end":return r.stop()}})}));case 16:o.next=21;break;case 18:o.prev=18,o.t0=o.catch(1),D({type:yt});case 21:O(!1);case 22:case"end":return o.stop()}},null,null,[[1,18]])},K=Object(a.useState)([]),Y=Object(s.a)(K,2),W=Y[0],$=Y[1];Object(a.useEffect)(function(){var e=C.bookings.invoices.filter(function(e){return null!==e}).flat().filter(function(e){var t=e.customerId&&C.customers.customers&&C.customers.customers.find(function(t){return t.id===e.customerId})&&C.customers.customers.find(function(t){return t.id===e.customerId}).name||"N/A",n=e.BookingId&&C.bookings.bookings&&C.bookings.bookings.find(function(t){return t.id===e.BookingId})&&C.bookings.bookings.find(function(t){return t.id===e.BookingId}).eventName||"N/A";return(e.status===j||"All"===j)&&(!R||e.number&&e.number.toString()===R||t.toLowerCase().includes(R.toLowerCase())||n.toLowerCase().includes(R.toLowerCase())||e.booking&&e.booking.title.toLowerCase().includes(R.toLowerCase()))}).sort(function(e,t){return e.created>t.created?-1:1});$(Object(f.a)(e))},[C.bookings.invoices,R,j]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(er,{loading:(B||C.bookings.loadingInvoice).toString()}),r.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:40}},r.a.createElement("div",{className:Object(xn.a)(Kc())},r.a.createElement(ui,{query:R,placeholder:"Search Invoices",onChange:function(e){return A(e.target.value)}}),r.a.createElement(Wo,{items:ao,colors:ro,selectedItem:j,onSelect:_,style:{marginBottom:0,marginTop:0,maxWidth:350,height:40}})),r.a.createElement(Gn,{primary:!0,iconComponent:function(){return r.a.createElement(Ra,{fill:Cn.white})},style:{marginLeft:"2em"},onClick:function(){return d(!0)}},"Add Invoice")),!B&&W&&W.length>0&&r.a.createElement(Na,{columns:"50px auto auto auto auto 150px 50px 50px",columnTitles:["#","Created","Customer","Booking","Amount","Status","",""]},W.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(ja,null,e.number||t+1),r.a.createElement(ja,null,Br(e.created)),r.a.createElement(ja,null,e.customerId&&C.customers.customers&&C.customers.customers.find(function(t){return t.id===e.customerId})&&C.customers.customers.find(function(t){return t.id===e.customerId}).name||"N/A"),r.a.createElement(ja,null,function(e){var t=C.bookings.bookings.filter(function(t){return t.id===parseInt(e)});return t.length>0?t[0].eventName:""}(e.BookingId)),r.a.createElement(ja,null,sr(e.grand_total||0,C.settings.companyInfo.currency)),r.a.createElement(aa,{options:ao,colors:ro,selectedOption:e.status,onOptionSelected:function(n){D(Object(b.a)({type:"update_invoice_status"},e.coordinates,{index:t,status:n})),J(e,!0,n)}}),r.a.createElement(jn,{width:24,height:24,svg:no.a,onClick:function(){o({booking:e.BookingId,index:t})}}),r.a.createElement(Kr,{items:["Delete"],colors:["#D13636"],onItemSelected:function(n){!function(e){l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,D({type:ht}),t.next=4,l.a.awrap(p.a.delete("/bookings/".concat(e.BookingId,"/invoices/").concat(e.id)));case 4:D({type:kt,payload:e.id}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),D({type:Et});case 10:case"end":return t.stop()}},null,null,[[0,7]])}(e),D(Object(b.a)({type:"delete_invoice"},e.coordinates,{invoice:n.id,index:t}))}}))})),0===W.length&&r.a.createElement(Tn,null,"There are no matching invoices."," ",r.a.createElement("span",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){_("All"),A("")}},"View All")),r.a.createElement(Dn,{isOpen:null!==n,onClose:function(){return o(null)}},r.a.createElement(uo,{invoice:n,handleUpdate:J})),r.a.createElement(Dn,{isOpen:u,onClose:function(){return d(!1)},width:"30em"},r.a.createElement(Jc,{onSelectBooking:function(e){y(e),d(!1),O(!0)}})),r.a.createElement(Dn,{isOpen:E,onClose:function(){return O(!1)}},r.a.createElement(mo,{invoiceNumber:W.length+1,booking:C.bookings.bookings.find(function(e){return e.id===v}),onEndEditing:function(e,t){var n,a,r,o;return l.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={headers:{"Content-Type":"application/json"}},a=Object(b.a)({},t),D({type:pt}),e.next=6,l.a.awrap(p.a.post("/bookings/".concat(a.booking.id,"/invoices"),{slots:JSON.stringify(a.slots),cost_items:JSON.stringify(a.costItems),value:a.value,payment_method:a.payment_method,discount:a.discount,customerId:a.booking.customerId,createdAt:a.createdAtAt,sub_total:a.amount,grand_total:a.grand_total,status:a.status},n));case 6:if(r=e.sent,D({type:gt,payload:r.data.invoice}),!("Credit Card"===t.payment_method&&C.auth.user.stripe_public_key&&C.auth.user.stripe_public_key.length>0)){e.next=13;break}H({amount:100*Number(a.amount.toFixed(2)),currency:C.settings.companyInfo.currency.length?C.settings.companyInfo.currency:"USD",id:r.data.invoice.id,bookingId:a.booking.id}),V(!0),e.next=23;break;case 13:if("Online Payment"!==a.payment_method||0===C.auth.user.stripe_status){e.next=23;break}return e.next=16,l.a.awrap(p.a.post("/bookings/transferFunds",{amount:100*Number(a.amount.toFixed(2)),currency:C.settings.companyInfo.currency.length?C.settings.companyInfo.currency:"USD",id:r.data.invoice.id,bookingId:a.booking.id}));case 16:if(!e.sent.data.success){e.next=23;break}return D({type:bt}),e.next=21,l.a.awrap(p.a.put("/bookings/".concat(a.booking.id,"/invoices/").concat(r.data.invoice.id),{slots:JSON.stringify(a.slots),cost_items:JSON.stringify(a.costItems),value:a.value,payment_method:a.payment_method,discount:a.discount,customerId:a.booking.customerId,createdAt:a.createdAtAt,sub_total:a.amount,grand_total:a.grand_total,status:"Paid"},n));case 21:o=e.sent,D({type:vt,payload:o.data.invoice});case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),D({type:ft});case 28:O(!1);case 29:case"end":return e.stop()}},null,null,[[0,25]])}})),C.auth.user.stripe_public_key&&C.auth.user.stripe_public_key.length>0&&r.a.createElement(Dn,{isOpen:q,onClose:function(){return V(!1)}},r.a.createElement(Ja,null,r.a.createElement(Ka,null,r.a.createElement(Ya,null,r.a.createElement(Rn,null,"Credit Card Info"),r.a.createElement(Gn,{primary:!0,style:{marginRight:10},onClick:function(){return V(!1)}},"Close"))),r.a.createElement(Wa,null,r.a.createElement(_o,{stripe_pk_key:C.auth.user.stripe_public_key,chargeData:U,closeModal:function(){var e;return l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return D({type:bt}),t.prev=1,t.next=4,l.a.awrap(p.a.put("/bookings/".concat(U.bookingId,"/invoices/").concat(U.id),{status:"Paid"}));case 4:e=t.sent,D({type:vt,payload:e.data.invoice}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),D({type:yt});case 11:V(!1);case 12:case"end":return t.stop()}},null,null,[[1,8]])}})))))},Wc=n(337),$c=n.n(Wc),Qc=n(215),Zc=(n(636),n(637),n(351)),Xc=n.n(Zc),el=n(352),tl=n.n(el);function nl(){var e=Object(On.a)(["\n  > div {\n    margin: 0 0.3em;\n    :first-child {\n      margin-left: 0;\n    }\n    :last-child {\n      margin-right: 0;\n    }\n  }\n"]);return nl=function(){return e},e}var al=In.a.div(nl()),rl=n(143),ol=n.n(rl),il=n(144),cl=n.n(il);function ll(){var e=Object(On.a)(["\n  font-size: 0.8rem;\n  color: ",";\n  margin: 1rem 0 0.5rem;\n  opacity: 0.7;\n"]);return ll=function(){return e},e}function sl(){var e=Object(On.a)(["\n  position: absolute;\n  right: 0;\n  top: calc(100% + 4px);\n  display: ",";\n  background-color: white;\n  color: ","\n  box-shadow: 0px 1.5px 1px rgba(0,0,0,0.05);\n  padding: 5px 10px;\n  border: 1px solid #E6E8E9;\n  border-radius: 0.25em;\n  z-index: 14;\n\n  ul {\n    margin: 0;\n    padding: 0;\n\n    li {\n      display: flex;\n      align-items: center;\n      list-style: none;\n      color: ",";\n      white-space: nowrap;\n      font-size: 0.9rem;\n      font-weight: normal;\n      cursor: pointer;\n      margin: 0.3rem 0;\n      &:hover {\n        opacity: 0.7;\n      }\n    }\n\n    .divide-line {\n      border-bottom: 1px solid #E6E8E9;\n      margin: 0.8rem 0;\n    }\n  }\n"]);return sl=function(){return e},e}function ul(){var e=Object(On.a)(["\n  p {\n    display: flex;\n  }\n"]);return ul=function(){return e},e}function dl(){var e=Object(On.a)(["\n  display: flex;\n  position: relative;\n"]);return dl=function(){return e},e}var ml=In.a.div(dl()),pl=Object(In.a)(Gn)(ul()),gl=In.a.div(sl(),function(e){return e.isOpen?"flex":"none"},Cn.grey,Cn.grey),fl=In.a.p(ll(),Cn.grey),bl=Object(d.g)(function(e){var t=e.history,n=e.views,o=e.showCreateViewModalFunc,c=(e.setCurView,Object(a.useContext)(fn)),l=c.state,u=c.dispatch,d=Object(a.useState)(!1),m=Object(s.a)(d,2),p=m[0],g=m[1],f=Object(a.useRef)(null);Object(a.useEffect)(function(){var e=function(e){f.current&&(i.a.findDOMNode(f.current).contains(e.target)||p&&g(!1))};return document.addEventListener("click",e,!1),function(){document.removeEventListener("click",e,!1)}},[f,p]);var b=function(e){e!==l.calendarViews.curView&&u({type:zt,payload:e})};return r.a.createElement(ml,{ref:f},r.a.createElement(pl,{onClick:function(){return g(!p)}},"spaces"===l.calendarViews.curView?"Spaces":l.calendarViews.calendarViewData.views[l.calendarViews.curView].title,r.a.createElement("img",{src:Hn.a,alt:"Show options",style:{transform:p?"scaleY(-1)":"",marginLeft:5}})),r.a.createElement(gl,{isOpen:p},r.a.createElement("ul",null,(l.auth.token&&l.auth.token.length)>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{onClick:function(){return t.push("/settings")}},r.a.createElement(Ji,{side:16,fill:Cn.grey}),"\xa0\xa0Add another space"),r.a.createElement("div",{className:"divide-line"})),r.a.createElement(fl,null,"Views"),r.a.createElement("li",{onClick:function(){g(!1),b("spaces")}},"All Spaces"),n.map(function(e,t){return r.a.createElement("li",{key:t,onClick:function(){g(!1),b(t)}},e.title)}),(l.auth.token&&l.auth.token.length)>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"divide-line"}),r.a.createElement("li",{onClick:function(){g(!1),o(!0)}},r.a.createElement(ra.a,{className:"fa-icons",icon:oa.f}),"\xa0\xa0Manage Views")))))}),vl=n(353),yl=n.n(vl);function hl(){var e=Object(On.a)(["\n  color: #E92579;            \n  margin: 0.2em 0 0 0;\n  padding: 0 0.6em;\n  font-size: 0.8em;\n"]);return hl=function(){return e},e}function kl(){var e=Object(On.a)(["\n  margin-left: auto;\n  margin-top: 8px;\n"]);return kl=function(){return e},e}function El(){var e=Object(On.a)(["\n  display: flex;\n  width: 40%;\n  margin-right: 1rem;\n  flex-direction: column;\n\n  &.error {\n    .dropdown-heading {\n      border: 1px solid #E92579 !important;\n    }\n  }\n"]);return El=function(){return e},e}function Ol(){var e=Object(On.a)(["\n  display: flex;\n  width: 100%;\n  margin-bottom: 1rem;\n\n  .multi-select {    \n    width: 100%;\n    .select-panel {\n      >label.select-item {\n        display: none !important;        \n      }\n    }\n    .dropdown-heading {      \n      border: 1px solid #e6e8e9 !important;\n    }\n    .dropdown-content {\n      border: 1px solid #e6e8e9 !important;\n    }\n  }\n"]);return Ol=function(){return e},e}var xl=In.a.div(Ol()),wl=In.a.div(El()),jl=Object(In.a)(jn)(kl()),_l=In.a.p(hl()),Sl=function(e){var t=e.hideModal,n=Object(a.useContext)(fn),o=n.state,i=n.dispatch,c=Object(a.useState)([]),u=Object(s.a)(c,2),d=u[0],m=u[1];Object(a.useEffect)(function(){m(o.calendarViews.calendarViewData.views)},[o.calendarViews.calendarViewData,o.calendarViews.allSpaces]);var g=function(e){var t="";return e.forEach(function(n,a){t+=function(e){var t=o.calendarViews.allSpaces.filter(function(t){return t.id===e});return t.length>0?t[0].name:""}(n),a<e.length-1&&(t+=", ")}),t};return r.a.createElement(Ja,null,r.a.createElement(er,null),r.a.createElement(Ka,null,r.a.createElement(Ya,null,r.a.createElement(Rn,{style:{margin:0}},"Custom Views"),r.a.createElement("div",null,r.a.createElement(Gn,{primary:!0,onClick:function(){var e,n,a,r;return l.a.async(function(c){for(;;)switch(c.prev=c.next){case 0:if(e=!0,d.forEach(function(t){0!==t.title.length&&0!==t.spaces.length||(e=!1)}),e){c.next=4;break}return c.abrupt("return");case 4:if(n={headers:{"Content-Type":"application/json"}},-1!==o.calendarViews.calendarViewData.id){c.next=19;break}return c.prev=6,c.next=9,l.a.awrap(p.a.post("/calendarview",{views:JSON.stringify(d)},n));case 9:a=c.sent,i({type:Tt,payload:a.data.calendarView}),t(),c.next=17;break;case 14:c.prev=14,c.t0=c.catch(6),i({type:Mt});case 17:c.next=30;break;case 19:return c.prev=19,c.next=22,l.a.awrap(p.a.put("/calendarview/".concat(o.calendarViews.calendarViewData.id),{views:JSON.stringify(d)},n));case 22:r=c.sent,i({type:Lt,payload:r.data.calendarView}),t(),c.next=30;break;case 27:c.prev=27,c.t1=c.catch(19),i({type:Ft});case 30:case"end":return c.stop()}},null,null,[[6,14],[19,27]])}},"Save")))),r.a.createElement(Wa,null,r.a.createElement(Fn,null,"Create custom calendar views of your spaces below, give your view a name and list the spaces associated with that name. This is so you can find your spaces fast. (E.g Top Floor Spaces, Bar Spaces or Outdoor Spaces)"),d.map(function(e,t){return r.a.createElement(xl,{key:t},r.a.createElement(wl,null,r.a.createElement(_a,{value:e.title,label:"",onChange:function(e){!function(e,t){var n=Object(f.a)(d);n[t].title=e,m(Object(f.a)(n))}(e,t)},style:{width:"100%"},className:0===e.title.length?"error":""}),0===e.title.length&&r.a.createElement(_l,null,"Don't forget the name!")),r.a.createElement(wl,{className:0===e.spaces.length?"error":""},r.a.createElement(yl.a,{options:o.calendarViews.allSpaces.map(function(e){return{value:e.id,label:e.name}}),selected:e.spaces,label:"",onSelectedChanged:function(e){return function(e,t){var n=Object(f.a)(d);n[t].spaces=Object(f.a)(e),m(Object(f.a)(n))}(e,t)},disableSearch:!0,overrideStrings:{allItemsAreSelected:g(e.spaces),selectSomeItems:"Select Spaces"}}),0===e.spaces.length&&r.a.createElement(_l,null,"Please select at least one space for view")),r.a.createElement(jl,{size:20,svg:Ta.a,onClick:function(){return function(e){m(Object(f.a)(d.filter(function(t,n){return n!==e})))}(t)}}))}),r.a.createElement(Gn,{primary:!0,onClick:function(){m([].concat(Object(f.a)(d),[{title:"View "+d.length,spaces:o.calendarViews.allSpaces.length>0?[{id:o.calendarViews.allSpaces[0].id,name:o.calendarViews.allSpaces[0].name}]:[]}])),!o.calendarViews.calendarViewData.id||o.calendarViews.calendarViewData.id},style:{marginTop:"1rem"}},0===d.length?"Create your first view":"Add another view")))},Cl=function(e,t){e({type:$t,payload:t})};function Dl(){var e=Object(On.a)(["\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1em;\n  text-align: center;\n  border: 1px solid #E6E8E9;\n  border-radius: 0.25em;\n  height: 34px;\n  padding: 0 0.7em;\n  width: auto;\n  flex: 0 0 auto;\n  background: #ffffff;\n  color: #93989F;\n  box-shadow: 0px 1.5px 1px rgba(0,0,0,0.05);\n  cursor: pointer;\n  outline: none;  \n  user-select: none;  \n  animation: 1s 0.3s linear infinite;  \n  animation-timing-function: ease-in-out;\n"]);return Dl=function(){return e},e}function Il(){var e=Object(On.a)(["\n  position: relative;\n  margin-left: 1em;\n  @media (max-width: 1020px) {\n    display: none;\n  }\n\n  .react-datepicker-wrapper {\n    position: absolute;\n    left: 0;    \n    top: 0;\n    width: 100%;\n    height: 100%;\n    opacity: 0;\n\n    .react-datepicker__input-container {\n      input {\n        cursor: pointer;\n      }      \n    }\n  }\n\n  .react-datepicker-popper {\n    z-index: 15;\n  }\n"]);return Il=function(){return e},e}var Nl=In.a.div(Il()),Rl=In.a.div(Dl()),Al=function(e){var t=Object(a.useContext)(fn),n=t.state,o=t.dispatch,i=Object(a.useState)(!1),c=Object(s.a)(i,2),l=c[0],u=c[1];return r.a.createElement(Nl,e,r.a.createElement(Rl,null,e.title,r.a.createElement("img",{src:Hn.a,alt:"Show options",style:{transform:l?"scaleY(-1)":"",marginLeft:5}})),r.a.createElement(Va.a,{selected:n.calendarSettings.selectedDate,onChange:function(e){return Cl(o,Object(b.a)({},n.calendarSettings,{selectedDate:e}))},onClickOutside:function(){return u(!1)},onInputClick:function(){return u(!l)},onSelect:function(){return u(!1)},open:l}))};function Tl(){var e=Object(On.a)(["\n  display: flex;\n  align-items: center;\n"]);return Tl=function(){return e},e}var Ml=In.a.div(Tl());function Bl(e,t){switch(t){case"day":return h()(e).format("dddd, Do of MMMM YYYY");case"week":var n=h()(e).startOf("week"),a=h()(e).endOf("week");return n.year()!==a.year()?n.format("Do of MMMM YYYY")+" - "+a.format("Do of MMMM YYYY"):n.format("Do of MMMM ")+" - "+a.format("Do of MMMM");case"month":return h()(e).format("MMMM YYYY");default:return h()(e).format("dddd, MMMM D, YYYY")}}var Ll=Object(d.g)(function(e){var t=e.date,n=e.view,o=e.views,i=e.onNavigate,c=(e.history,Object(a.useContext)(fn)),l=c.state,u=c.dispatch,d=Object(a.useState)(!1),m=Object(s.a)(d,2),p=m[0],g=m[1];return r.a.createElement(Ml,{style:{justifyContent:"space-between",marginBottom:22}},r.a.createElement(Ml,null,r.a.createElement(jn,{svg:l.calendarSettings.viewExpand?cl.a:ol.a,width:22,height:22,onClick:function(){return Cl(u,Object(b.a)({},l.calendarSettings,{viewExpand:!l.calendarSettings.viewExpand}))},style:{marginRight:14}}),r.a.createElement(Gn,{style:{margin:"0 1em 0 0"},onClick:function(){return Cl(u,Object(b.a)({},l.calendarSettings,{selectedDate:new Date,viewMode:"day"}))}},"Today"),r.a.createElement(jn,{svg:tl.a,width:20,height:20,onClick:function(){return i("PREV")},style:{marginRight:7}}),r.a.createElement(jn,{svg:Xc.a,width:20,height:20,onClick:function(){return i("NEXT")}}),r.a.createElement(Al,{title:Bl(t,n)})),r.a.createElement(Ml,null,r.a.createElement(al,null,o.map(function(e){return r.a.createElement(Gn,{key:e,onClick:function(){return Cl(u,Object(b.a)({},l.calendarSettings,{viewMode:e}))},selected:e===n,style:{textTransform:"capitalize"}},e)}))),r.a.createElement(bl,{views:l.calendarViews.calendarViewData.views?l.calendarViews.calendarViewData.views:[],showCreateViewModalFunc:function(e){return g(e)}}),p&&r.a.createElement(Dn,{isOpen:p,onClose:function(){return g(!1)}},r.a.createElement(Sl,{hideModal:function(){g(!1)}})))}),Fl=function(e){var t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()};function Pl(){var e=Object(On.a)(["\n    display: inline-block;\n\n    font-style: normal;\n    font-weight: 500;\n    font-size: 22px;\n    line-height: 28px;\n    margin-top: 11px;\n    margin-bottom: 14px;\n\n    background-color: ",";\n    border-radius: 20px;\n    min-width: 40px;\n    min-height: 40px;\n    line-height: 40px;\n\n    color: ",";\n  "]);return Pl=function(){return e},e}function ql(){var e=Object(On.a)(["\n    font-style: normal;\n    font-weight: normal;\n    font-size: 13px;\n    line-height: 16px;\n    margin-top: 14px;\n    text-align: center;\n    letter-spacing: 0.02em;\n    color: ",";\n  "]);return ql=function(){return e},e}var Vl=function(e){var t=e.date,n=Fl(t),a=h()(t).format("ddd"),o=h()(t).format("D"),i=In.a.div(ql(),n?Cn.accent_pink:Cn.grey),c=In.a.div(Pl(),n?Cn.accent_pink:"clear",n?"white":Cn.grey);return r.a.createElement(r.a.Fragment,null,r.a.createElement(i,null,a),r.a.createElement(c,null,o))};function zl(){var e=Object(On.a)(['\n        .rbc-event {\n          ::before {\n            content: "";\n            position: absolute;\n            top: 0;\n            left: 0;\n            height: 100%;\n            width: 100%;\n            background-color: white;\n            z-index: -2;\n            border-radius: 2px;\n          }\n          ::after {\n            content: "";\n            position: absolute;\n            top: 0;\n            left: 0;\n            height: 100%;\n            width: 100%;\n            background-color: ',"15;\n            z-index: -1;\n            border-radius: 2px;\n          }\n          z-index: 0;\n          border: 1px solid "," ;\n          background-color: ","15 !important;\n\n          color: black;\n          border-radius: 2px;\n          left: 5px !important;\n          right: 5px !important;\n          width: calc(100% - 10px) !important;\n        }\n        .rbc-selected {\n          background-color: ","60 !important;\n        }\n        :active {\n          opacity: 0.8;\n        }\n      "]);return zl=function(){return e},e}function Gl(){var e=Object(On.a)(["\n            font-style: normal;\n            font-weight: normal;\n            font-size: 12px;\n            line-height: 13px;\n            margin-top: 4px;\n            color: ",";\n          "]);return Gl=function(){return e},e}function Ul(){var e=Object(On.a)(["\n            font-style: normal;\n            font-weight: 500;\n            font-size: 12px;\n            line-height: 14px;\n            margin-top: 4px;\n            margin-bottom: 0;\n            color: ",";\n          "]);return Ul=function(){return e},e}function Hl(){var e=Object(On.a)(["\n            font-style: normal;\n            font-weight: 500;\n            font-size: 12px;\n            line-height: 14px;\n            color: black;\n            margin-top: 4px;\n            margin-bottom: 0;\n            color: ",";\n          "]);return Hl=function(){return e},e}var Jl=Qc.a.momentLocalizer(h.a),Kl=function(e){var t=e.event;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:Object(xn.b)("event-title",Object(xn.a)(Hl(),Cn.dark))},t.title),r.a.createElement("p",{className:Object(xn.b)("event-subtitle",Object(xn.a)(Ul(),t.accent))},r.a.createElement(ra.a,{className:"fa-icons",icon:oa.g}),"\xa0\xa0\xa0",t.subtitle),r.a.createElement("p",{className:Object(xn.b)("event-time",Object(xn.a)(Gl(),Cn.grey))},Mr(t.start,t.end)))},Yl=function(e){var t=e.event,n=e.children;return r.a.createElement("div",{onClick:e.onClick,className:Object(xn.a)(zl(),t.accent,t.accent,t.accent,t.accent)},n)},Wl=function(e){var t=new Date;t.setHours(8),t.setMinutes(30);var n=Object(a.useContext)(fn),o=n.state,i=n.dispatch,c=function(e){var t=o.calendarViews.allSpaces.filter(function(t){return t.id===e});return t.length>0?t[0].name:""},l=Object(a.useState)([]),u=Object(s.a)(l,2),d=u[0],m=u[1];return Object(a.useEffect)(function(){if("spaces"===o.calendarViews.curView)m(Object(f.a)(o.calendarViews.allSpaces.map(function(e){return{id:e.id,title:e.name}})));else if(o.calendarViews.calendarViewData&&o.calendarViews.calendarViewData.views&&o.calendarViews.curView>=0){var e=o.calendarViews.calendarViewData.views[o.calendarViews.curView].spaces.map(function(e){return{id:e,title:c(e)}});m(Object(f.a)(e))}},[o.calendarViews.curView,o.calendarViews.calendarViewData,o.calendarViews.allSpaces]),r.a.createElement(Qc.a,Object.assign({scrollToTime:t,views:["day","week","month"],selectable:!1,localizer:Jl,date:o.calendarSettings.selectedDate,defaultView:"week",view:o.calendarSettings.viewMode,step:15,timeslots:4,components:{event:Kl,eventWrapper:Yl,toolbar:Ll,week:{header:Vl}},events:e.events||[],resources:d,onNavigate:function(e){Cl(i,Object(b.a)({},o.calendarSettings,{selectedDate:e}))}},e))};function $l(){var e=Object(On.a)(["\n    height: 2.5em;\n    background: ",";\n    display: flex;\n    direction: row;\n    justify-content: space-between;\n    align-items: center;\n    padding: 0 1.2rem;\n    p {\n      margin: 0;\n    }\n  "]);return $l=function(){return e},e}function Ql(){var e=Object(On.a)(["\n    color: #sss;\n    padding: 0 1.2rem 0.7rem;\n    margin: 0;\n  "]);return Ql=function(){return e},e}function Zl(){var e=Object(On.a)(["\n    font-size: 1.2em;\n    font-weight: 500;\n    color: ",";\n    padding: 0.8rem 1.2rem 0.2rem;\n    margin: 0;\n  "]);return Zl=function(){return e},e}function Xl(){var e=Object(On.a)(["\n    background: white;\n    border: 1px solid #ddd;\n    border-radius: 8px;\n    margin-bottom: 1em;\n    overflow: hidden;\n    :first-child {\n      margin-top: 1em;\n    }\n    cursor: pointer;\n  "]);return Xl=function(){return e},e}var es=function(e){var t=e.booking,n=e.onClick,a=In.a.div(Xl()),o=In.a.p(Zl(),Cn.dark),i=Object(In.a)(Fn)(Ql()),c=In.a.div($l(),Cn.lighter);return r.a.createElement(a,{onClick:n},r.a.createElement(o,null,t.title),r.a.createElement(i,{strong:!0},"".concat(t.eventName)),r.a.createElement(c,null,r.a.createElement(Fn,{color:"grey"},function(e){var t=e.map(function(e){switch(e.kind){case"single-day":return e.date;case"multi-day":return e.dateRange;default:throw Error()}}).flat().sort(function(e,t){return e>t?1:-1}),n=[],a=[],r=null;function o(){if(a.length>0){var e=a.map(function(e){return h()(e).format("D")});n.push(e.join("-")+" "+h()(a[0]).format("MMM"))}}var i=!0,c=!1,l=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var d=s.value;"function"===typeof d.getMonth&&r!=="".concat(d.getMonth(),"-").concat(d.getYear())&&(o(),a=[],r="".concat(d.getMonth(),"-").concat(d.getYear())),a.push(d)}}catch(m){c=!0,l=m}finally{try{i||null==u.return||u.return()}finally{if(c)throw l}}return o(),n.join(", ")}(t.slots))))};function ts(){var e=Object(On.a)([""]);return ts=function(){return e},e}function ns(){var e=Object(On.a)(["\n    border-bottom: 1px solid ",";\n    position: sticky;\n    top: 0;\n    background: ",";\n    p {\n      display: inline-block;\n      margin: 0 1em 0 0;\n      cursor: pointer;\n      padding: 0 0 0.5em;\n    }\n    .selected {\n      color: ",";\n      font-weight: 500;\n      border-bottom: 2px solid ",";\n    }\n  "]);return ns=function(){return e},e}function as(){var e=Object(On.a)(["\n    display: flex;\n    flex-direction: column;\n  "]);return as=function(){return e},e}var rs=function(e){var t=e.onSelect,n=Object(a.useState)("week"),o=Object(s.a)(n,2),i=o[0],c=o[1],l=Object(a.useContext)(fn).state,u=Object(a.useState)([]),d=Object(s.a)(u,2),m=d[0],p=d[1];Object(a.useEffect)(function(){if("week"===i){var e=l.bookings.bookings&&l.bookings.bookings.filter(function(e){return O(e,h()().startOf("week").toDate(),h()().endOf("week").toDate())});p(Object(f.a)(e))}else{if("upcoming"!==i)throw new Error;var t=l.bookings.bookings.filter(function(e){return O(e,h()().add(1,"weeks").startOf("isoWeek").toDate(),h()().add(2,"weeks").endOf("isoWeek").toDate())});p(Object(f.a)(t))}},[l.bookings.bookings,i]);var g=In.a.div(as()),b=In.a.div(ns(),Cn.light,Cn.lightest,Cn.accent_pink,Cn.accent_pink),v=In.a.div(ts());return r.a.createElement(g,null,r.a.createElement(b,null,r.a.createElement(Tn,{className:"week"===i&&"selected",onClick:function(){return c("week")}},"This Week")," ",r.a.createElement(Tn,{className:"upcoming"===i&&"selected",onClick:function(){return c("upcoming")}},"Upcoming")),r.a.createElement(v,null,m&&m.map(function(e){return r.a.createElement(es,{key:e.id,booking:e,onClick:function(){return t(e)}})}),m&&0===m.length&&r.a.createElement(Fn,{style:{marginTop:10},color:"grey"},"upcoming"===i?"No bookings here. Add a booking in the coming weeks and it will show up here.":"No bookings here. Try adding one from the Bookings section.")))};function os(){var e=Object(On.a)(["\n                  color: #E92579;            \n                  margin: 0.2em 0 0 0;\n                  padding: 0 0.6em;\n                  font-size: 0.8em;\n                "]);return os=function(){return e},e}function is(){var e=Object(On.a)(["\n  display: flex;  \n  width: 100%;\n"]);return is=function(){return e},e}var cs=In.a.div(is()),ls=function(e){var t=e.startDate,n=e.endDate,o=Object(a.useContext)(fn),i=(o.state,o.dispatch,Object(a.useState)({value:"",validate:!0,errMsg:""})),c=Object(s.a)(i,2),l=c[0],u=c[1],d=Object(a.useState)(!1),m=Object(s.a)(d,2),g=m[0],f=m[1];Object(a.useEffect)(function(){u({value:"",validate:!0,errMsg:""})},[]);return r.a.createElement(Ja,null,r.a.createElement(er,{loading:g.toString()}),r.a.createElement(Ka,null,r.a.createElement(Ya,null,r.a.createElement(Rn,null,"New Booking"))),r.a.createElement(Wa,null,r.a.createElement(Rn,null,"To start, please enter your email address."),r.a.createElement(wa,null,"You'll be the holder of this new booking"),r.a.createElement(Ia,null),r.a.createElement(cs,null,r.a.createElement(_a,{labe:"Email",value:l.value,style:{flex:1},onChange:function(e){return function(e){e.length>0?u({value:e,validate:!0,errMsg:""}):u({value:e,validate:!1,errMsg:"Email is required."})}(e)},className:l.validate?"":"error"}),r.a.createElement(Gn,{primary:!0,style:{marginLeft:"1em",minWidth:"80px"},onClick:function(){0!==l.value.length?l.validate&&(f(!0),p.a.post("/users/loginWithEmailSubdomain",{email:l.value,subdomain:gn()}).then(function(e){f(!1),e.data.success?window.location.replace(wr.a.BASE_URL+"login/?returnUrl=https://"+gn()+".heyagenda.com/login?start="+t.valueOf()+"end="+n.valueOf()):u(Object(b.a)({},l,{validate:!1,errMsg:e.data.error}))}).catch(function(e){f(!1),u(Object(b.a)({},l,{validate:!1,errMsg:e.response.data.error}))})):u(Object(b.a)({},l,{validate:!1,errMsg:"Email is required."}))},disabled:!l.validate},"Next")),r.a.createElement(cs,null,!l.validate&&r.a.createElement("p",{className:Object(xn.a)(os())},l.errMsg))))};function ss(e,t){var n=[];return e.slots.length&&e.slots.forEach(function(a,r){var o=function(e,t){var n="";t&&t.length>0&&Object.keys(e).length>0&&t.forEach(function(t){t.content.forEach(function(a){var r=!1;a.map(function(t){"title"===t.condition_key&&t.condition_value.length>0?"contains"===t.condition_type?e.eventName.toLowerCase().indexOf(t.condition_value.toLowerCase())>=0&&(r=!0):"not_contains"===t.condition_type&&e.eventName.toLowerCase().indexOf(t.condition_value.toLowerCase())<0&&(r=!0):"payment_status"===t.condition_key&&("equal"===t.condition_type?e.status.name.toLowerCase()===t.condition_value.toLowerCase()&&(r=!0):"not_equal"===t.condition_type&&e.status.name.toLowerCase()!==t.condition_value.toLowerCase()&&(r=!0))}),r&&(n=t.color)})});return n}(e,t);switch(a.kind){case"multi-day":a.dateRange.forEach(function(t,i){n.push({id:"".concat(e.id,"_").concat(r,"_").concat(i),bookingID:e.id,title:e.title,subtitle:e.eventName,start:k(t,a.startHour,a.startMinute),end:k(t,a.endHour,a.endMinute),accent:o.length>0?o:"#4a9454",resourceId:e.space?e.space.id:null})});break;case"single-day":n.push({id:"".concat(e.id,"_").concat(r),bookingID:e.id,title:e.title,subtitle:e.eventName,start:k(a.date,a.startHour,a.startMinute),end:k(a.date,a.endHour,a.endMinute),accent:o.length>0?o:"#6389ea",resourceId:e.space?e.space.id:null})}}),n}var us=Object(d.g)(function(e){var t=Object(a.useState)(null),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(!1),u=Object(s.a)(c,2),d=u[0],m=u[1],g=Object(a.useState)(null),f=Object(s.a)(g,2),v=f[0],y=f[1],k=Object(a.useState)(!1),E=Object(s.a)(k,2),O=E[0],w=E[1],j=Object(a.useState)(gn()),D=Object(s.a)(j,2),I=D[0],N=(D[1],Object(a.useContext)(fn)),R=N.state,A=N.dispatch,T=Object(a.useState)([]),M=Object(s.a)(T,2),B=M[0],L=M[1],F=Object(a.useState)(!0),P=Object(s.a)(F,2),q=(P[0],P[1]);$c()(function(){if("day"===R.calendarSettings.viewMode){var e=document.getElementsByClassName("rbc-current-time-indicator")[0];if(e)if(e.hasChildNodes())document.getElementsByClassName("current-time-indicator-value")[0].innerText=h()().format("h:mm");else{var t=document.createElement("div");t.className="current-time-indicator-value",t.innerText=h()().format("h:mm"),e.appendChild(t)}}},1e3),Object(a.useEffect)(function(){localStorage.setItem("calendarsetting",JSON.stringify(R.calendarSettings))},[R.calendarSettings]);var V=Object(a.useCallback)(function(t){var n=function(e){return"d"===e?"day":"w"===e?"week":"m"===e?"month":""};if("/calendar"===e.history.location.pathname){var a=JSON.parse(localStorage.getItem("calendarsetting"));if(a.selectedDate=new Date(a.selectedDate),""===n(t.key))return;if("day"===a.viewMode&&"d"===t.key)return;if("week"===a.viewMode&&"w"===t.key)return;if("month"===a.viewMode&&"m"===t.key)return;Cl(A,Object(b.a)({},a,{viewMode:n(t.key)}))}},[]);Object(a.useEffect)(function(){if(q(!0),R.auth.token&&R.auth.token.length>0){if(function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(p.a.get("/calendarsetting"));case 3:e=t.sent,A({type:$t,payload:Object(b.a)({},e.data.calendarSetting,{selectedDate:new Date(e.data.calendarSetting.selectedDate),loading:!1})}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),A({type:Ut});case 10:case"end":return t.stop()}},null,null,[[0,7]])}(),function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,A({type:Se}),t.next=4,l.a.awrap(p.a.get("/bookings"));case 4:e=t.sent,console.log("bookings"),A({type:Ce,payload:e.data.bookings}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),A({type:De});case 12:case"end":return t.stop()}},null,null,[[0,9]])}(),R.customers.customers&&R.customers.customers.length||function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,A({type:fe}),t.next=4,l.a.awrap(p.a.get("/customers"));case 4:e=t.sent,console.log("customers"),A({type:be,payload:e.data.customers}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),A({type:ve});case 12:case"end":return t.stop()}},null,null,[[0,9]])}(),!R.settings.venues&&R.settings.venues.length>0&&function(){var e,t;l.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,A({type:_}),n.next=4,l.a.awrap(p.a.get("/venues"));case 4:e=n.sent,console.log("venues"),(t=e.data.venues).map(function(e){return e.spaces||(e.spaces=[]),e}),A({type:S,payload:t}),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(0),console.log("Get Venus Setting failed."),A({type:C});case 15:case"end":return n.stop()}},null,null,[[0,11]])}(),R.settings.companyInfo.id||function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(p.a.get("/company"));case 3:e=t.sent,A({type:Q,payload:Object(b.a)({},e.data.company)}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),A({type:Z});case 10:case"end":return t.stop()}},null,null,[[0,7]])}(),R.bookings.bookingStatus&&R.bookings.bookingStatus.length>0||function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,A({type:Ye}),t.next=4,l.a.awrap(p.a.get("/statuses"));case 4:e=t.sent,console.log("statues"),A({type:We,payload:e.data.statuses}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),A({type:$e});case 12:case"end":return t.stop()}},null,null,[[0,9]])}(),function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return A({type:St}),t.prev=1,t.next=4,l.a.awrap(p.a.get("/bookingcolor"));case 4:e=t.sent,console.log("bookingcolor"),e.data.bookingColor?A({type:Ct,payload:JSON.parse(e.data.bookingColor.color)}):A({type:Dt}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),A({type:Dt});case 12:case"end":return t.stop()}},null,null,[[1,9]])}(),function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(p.a.get("/calendarview"));case 3:e=t.sent,A({type:Nt,payload:e.data.calendarView?e.data.calendarView:{}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),A({type:Rt});case 10:case"end":return t.stop()}},null,null,[[0,7]])}(),function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(p.a.get("/userspaces"));case 3:e=t.sent,A({type:qt,payload:e.data.spaces}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),A({type:Vt});case 10:case"end":return t.stop()}},null,null,[[0,7]])}(),window.location.href.indexOf("start=")>0){var e=function(){var e=window.location.href.substring(window.location.href.indexOf("start=")+"start=".length,window.location.href.indexOf("end=")),t=window.location.href.substring(window.location.href.indexOf("end=")+"end=".length,window.location.href.length);return{start:new Date(parseInt(e)),end:new Date(parseInt(t))}}();y({startDate:e.start,endDate:e.end}),m(!0)}}else!function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(p.a.get("/companies/subdomain/".concat(I)));case 3:(e=t.sent).data.success?(A({type:Q,payload:Object(b.a)({},e.data.company)}),function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,A({type:Se}),t.next=4,l.a.awrap(p.a.get("/bookings/subdomain/".concat(I)));case 4:e=t.sent,A({type:Ce,payload:e.data.bookings}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),A({type:De});case 11:case"end":return t.stop()}},null,null,[[0,8]])}(),function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(p.a.get("spaces/subdomain/".concat(I)));case 3:e=t.sent,A({type:qt,payload:e.data.spaces}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),A({type:Vt});case 10:case"end":return t.stop()}},null,null,[[0,7]])}(),function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(p.a.get("/calendarview/subdomain/".concat(I)));case 3:e=t.sent,A({type:Nt,payload:e.data.calendarView?e.data.calendarView:{}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),A({type:Rt});case 10:case"end":return t.stop()}},null,null,[[0,7]])}(),function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,A({type:Ye}),t.next=4,l.a.awrap(p.a.get("/statuses/subdomain/".concat(I)));case 4:e=t.sent,A({type:We,payload:e.data.statuses}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),A({type:$e});case 11:case"end":return t.stop()}},null,null,[[0,8]])}(),function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return A({type:St}),t.prev=1,t.next=4,l.a.awrap(p.a.get("/bookingcolor/subdomain/".concat(I)));case 4:(e=t.sent).data.bookingColor?A({type:Ct,payload:JSON.parse(e.data.bookingColor.color)}):A({type:Dt}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),A({type:Dt});case 11:case"end":return t.stop()}},null,null,[[1,8]])}()):window.location.replace(wr.a.BASE_URL),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),window.location.replace(wr.a.BASE_URL);case 10:case"end":return t.stop()}},null,null,[[0,7]])}();return document.addEventListener("keydown",V,!1),function(){document.removeEventListener("keydown",V,!1);var e=JSON.parse(localStorage.getItem("calendarsetting"));e.selectedDate=new Date(e.selectedDate),function(e,t){var n={headers:{"Content-Type":"application/json"}};try{t.id?p.a.put("/calendarsetting/".concat(t.id),{viewExpand:t.viewExpand,viewMode:t.viewMode,selectedDate:t.selectedDate},n).then(function(n){e({type:$t,payload:Object(b.a)({},t,{loading:!1})})}):p.a.post("/calendarsetting",{viewExpand:t.viewExpand,viewMode:t.viewMode,selectedDate:t.selectedDate},n).then(function(n){e({type:$t,payload:Object(b.a)({},t,{id:n.data.calendarSetting.id,loading:!1})})})}catch(a){e({type:Jt})}}(A,e)}},[]),Object(a.useEffect)(function(){R.customBookingColor.bookingColors&&R.bookings.bookings&&L(R.bookings.bookings&&R.bookings.bookings.map(function(e){return ss(e,R.customBookingColor.bookingColors)}).flat())},[R.bookings.bookings,R.customBookingColor.bookingColors]),Object(a.useEffect)(function(){d||O||null!==o?document.removeEventListener("keydown",V,!1):document.addEventListener("keydown",V,!1)},[d,O,null!==o]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(er,{loading:B&&B.length<=0&&(R.bookings.loadBooking||R.bookings.loadBookingAction)?"true":"false"}),r.a.createElement(la,{fullheight:!0,columns:"".concat(!R.calendarSettings.viewExpand&&bi.leftPanelWidth," 1fr"),style:{height:"100%"}},!R.calendarSettings.viewExpand&&r.a.createElement("div",{style:{overflow:"scroll"}},r.a.createElement(rs,{onSelect:function(e){return i(e.id)}})),r.a.createElement(Dn,{isOpen:null!==o,onClose:function(){return i(null)}},r.a.createElement(Go,{booking:R.bookings.bookings&&R.bookings.bookings.find(function(e){return e.id===o})})),r.a.createElement(Dn,{isOpen:d,onClose:function(){return m(!1)}},r.a.createElement(Tr,Object.assign({booking:x(),onEndEditing:function(e){e&&function(e){var t,n,a,r,o,i,c,s;l.a.async(function(u){for(;;)switch(u.prev=u.next){case 0:if(m(!1),null!==e){u.next=3;break}return u.abrupt("return");case 3:if(t={headers:{"Content-Type":"application/json"}},-1!==e.id){u.next=27;break}if(u.prev=5,A({type:Ie}),n=R.bookings.bookingStatus.filter(function(e){return"Enquiry"===e.name}),a={},r=e.customerId,e.customerId!==dn){u.next=16;break}return u.next=13,l.a.awrap(p.a.post("/customers",JSON.stringify({name:e.customerData.name.value,phone:e.customerData.phone.value,address:e.customerData.address.value,email:e.customerData.email.value,note:e.customerData.note.value,vatNumber:e.customerData.vatNumber.value}),t));case 13:a=u.sent,A({type:he,payload:a.data.customer}),r=a.data.customer.id;case 16:return u.next=18,l.a.awrap(p.a.post("/bookings",{eventName:e.eventName,venueId:e.venueId,spaceId:e.spaceId,customerId:r,ownerId:e.ownerId,slots:JSON.stringify(e.slots),statusId:n[0].id},t));case 18:o=u.sent,A({type:Ne,payload:o.data.booking}),u.next=25;break;case 22:u.prev=22,u.t0=u.catch(5),A({type:Re});case 25:u.next=46;break;case 27:if(u.prev=27,A({type:Ae}),i={},c=e.customerId,e.customerId!==dn){u.next=37;break}return u.next=34,l.a.awrap(p.a.post("/customers",JSON.stringify({name:e.customerData.name.value,phone:e.customerData.phone.value,address:e.customerData.address.value,email:e.customerData.email.value,note:e.customerData.note.value,vatNumber:e.customerData.vatNumber.value}),t));case 34:i=u.sent,A({type:he,payload:i.data.customer}),c=i.data.customer.id;case 37:return u.next=39,l.a.awrap(p.a.put("/bookings/".concat(e.id),{eventName:e.eventName,venueId:e.venueId,spaceId:e.spaceId,customerId:c,ownerId:e.ownerId,statusId:e.statusId,slots:JSON.stringify(e.slots)},t));case 39:s=u.sent,A({type:Te,payload:s.data.booking}),u.next=46;break;case 43:u.prev=43,u.t1=u.catch(27),A({type:Me});case 46:case"end":return u.stop()}},null,null,[[5,22],[27,43]])}(e),m(!1)}},v))),O&&r.a.createElement(Dn,{isOpen:O,onClose:function(){w(!1),y(null)}},r.a.createElement(ls,{startDate:v.startDate,endDate:v.endDate})),r.a.createElement(Wl,{selectable:!0,events:B,onSelectEvent:function(e){A({type:Ot,payload:""}),i(e.bookingID)},onSelectSlot:function(e){var t=e.start,n=e.end;R.auth.token&&R.auth.token.length>0?(m(!0),y({startDate:t,endDate:n})):(y({startDate:t,endDate:n}),w(!0))}})))}),ds=function(e){var t=Object(a.useContext)(fn).dispatch;return Object(a.useEffect)(function(){var n=e.location.search.substring(6);if(n){var a={stripe_auth_code:n};p.a.post("/bookings/setStripeAccountInfo",a).then(function(e){console.log(e),t({type:_t,payload:1}),window.location.href=wr.a.STRIPE_CONNECT_CALLBACK_URL})}},[]),r.a.createElement("div",{className:"job-search-card under-construction"},r.a.createElement("div",{className:"text-center"}))};function ms(){var e=Object(On.a)(["\n  font-size: 3.4em;\n  text-align: ",";\n  color: ",";\n  margin: 0.2em 0 0.3em;\n  font-weight: 700;\n  line-height: 1.3;\n  text-decoration: none;\n  a {\n    text-decoration: none;\n  }\n  @media (max-width: 640px) {\n    font-size: 2.6em;\n  }\n"]);return ms=function(){return e},e}var ps=In.a.h1(ms(),function(e){return e.center?"center":"left"},function(e){return e.color?Cn[e.color]:Cn.white}),gs=n(145),fs=function(e){var t=h()(),n=[];if("Last 7 days"===e){for(var a=8;a>0;)n.push(t.format("ddd D")),t.subtract(1,"day"),a--;n.reverse()}else if("Last 30 days"===e){for(var r=31;r>0;)n.push(t.format("ddd D")),t.subtract(1,"day"),r--;n.reverse()}else if("Next 7 days"===e)for(var o=0;o<8;)n.push(t.format("ddd D")),t.add(1,"day"),o++;else if("Next 30 days"===e)for(var i=0;i<31;)n.push(t.format("ddd D")),t.add(1,"day"),i++;return n},bs=function(e,t){var n,a,r=[],o={id:-1,name:"",count:0},i=new h.a;"Last 7 days"===t?(a=i.endOf("day").valueOf(),n=i.subtract(8,"day").startOf("day").valueOf()):"Last 30 days"===t?(a=i.endOf("day").valueOf(),n=i.subtract(31,"day").startOf("day").valueOf()):"Next 7 days"===t?(n=i.startOf("day").valueOf(),a=i.add(8,"day").endOf("day").valueOf()):"Next 30 days"===t&&(n=i.startOf("day").valueOf(),a=i.add(31,"day").endOf("day").valueOf()),e.map(function(e){var t=0;e.slots&&e.slots.length>0&&e.slots.map(function(e){"single-day"===e.kind?n<=k(e.date,e.startHour,e.startMinute).valueOf()&&k(e.date,e.endHour,e.endMinute).valueOf()<=a&&(t++,r.push({startDate:k(e.date,e.startHour,e.startMinute).valueOf(),endDate:k(e.date,e.endHour,e.endMinute).valueOf()})):"multi-day"===e.kind&&n<=k(e.dateRange[0],e.startHour,e.startMinute).valueOf()&&k(e.dateRange[1],e.endHour,e.endMinute).valueOf()<=a&&(t++,r.push({startDate:k(e.dateRange[0],e.startHour,e.startMinute).valueOf(),endDate:k(e.dateRange[1],e.endHour,e.endMinute).valueOf()}))}),o.count<t&&(o.count=t,o.id=e.id,o.name=e.eventName)});for(var c=n,l={};c<=a;)l[c]=0,c=h()(c).add(1,"day").startOf().valueOf();return r.forEach(function(e){for(var t=h()(e.startDate).startOf("day"),n=h()(e.endDate).startOf("day");t.valueOf()<=n.valueOf();)l[t.valueOf()]+=1,t.add(1,"day")}),l};function vs(){var e=Object(On.a)(["\n  &:before {\n    display: block;\n    content: '';\n    border: 1px solid #eef0f2 ;\n    position: absolute;\n    height: 8px;\n    width: 8px;\n    transform: rotate(45deg);\n    background-color: white;\n    box-shadow: 0px 1.5px 1px rgba(0,0,0,0.05);\n    right: 13.5px;\n    top: calc(100% + 8px);\n  }\n"]);return vs=function(){return e},e}function ys(){var e=Object(On.a)(["\n  position: absolute;\n  width: 290px;\n  right: 0;\n  top: calc(100% + 14px);\n  display: flex;\n  flex-direction: column;\n  padding: 1em;\n  background-color: white;\n  box-shadow: 0 5px 15px 5px rgba(164, 173, 186, 0.2);\n  border-radius: 3px;\n  border-color: #f7f7f8;\n"]);return ys=function(){return e},e}function hs(){var e=Object(On.a)(["\n  width: 38px;\n  height: 28px;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border-radius: 3px;\n  margin-top: 4px;\n\n  &:hover {\n    background-color: ","\n  }\n\n  svg {\n    width: 19px;\n  }\n"]);return hs=function(){return e},e}function ks(){var e=Object(On.a)(["\n  position: relative;\n  height: 28px;\n"]);return ks=function(){return e},e}var Es=In.a.div(ks()),Os=In.a.div(hs(),Cn.light_grey),xs=In.a.div(ys()),ws=In.a.span(vs()),js=function(e){var t=e.panelKind,n=e.timePeriodOptions,o=e.selectedDate,c=Object(a.useContext)(fn),l=(c.state,c.dispatch),u=Object(a.useState)(!1),d=Object(s.a)(u,2),m=d[0],p=d[1],g=Object(a.useState)(o),f=Object(s.a)(g,2),b=f[0],v=f[1];Object(a.useEffect)(function(){v(o)},[o]);var y=Object(a.useRef)(null);Object(a.useEffect)(function(){var e=function(e){y.current&&(i.a.findDOMNode(y.current).contains(e.target)||m&&(p(!1),v(o)))};return document.addEventListener("click",e,!1),function(){document.removeEventListener("click",e,!1)}},[y,m]);return r.a.createElement(Es,{ref:y},r.a.createElement(Os,{onClick:function(){return p(!m)}},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22 6"},r.a.createElement("circle",{cx:"3",cy:"3",r:"3",fill:Cn.dark}),r.a.createElement("circle",{cx:"11",cy:"3",r:"3",fill:Cn.dark}),r.a.createElement("circle",{cx:"19",cy:"3",r:"3",fill:Cn.dark}))),m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ws,null),r.a.createElement(xs,null,b,r.a.createElement(Sa,{label:"Time Period",options:n,selectedOption:b,onOptionSelected:function(e){return function(e){v(e)}(e)},style:{width:"100%"}}),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"1em"}},r.a.createElement(Gn,{outline:!0,style:{width:"124px"},onClick:function(){return p(!1)}},"Cancel"),r.a.createElement(Gn,{primary:!0,style:{width:"124px"},onClick:function(){p(!1),setTimeout(function(){"Dashboard Recent Bookings"===t?l({type:Qt,payload:b}):"Upcoming Bookings"===t&&l({type:Zt,payload:b})},1)}},"Apply Changes")))))};function _s(){var e=Object(On.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return _s=function(){return e},e}function Ss(){var e=Object(On.a)(["\n  display: flex;  \n  width: 100%;\n  justify-content: space-between;\n"]);return Ss=function(){return e},e}var Cs=In.a.div(Ss()),Ds=In.a.div(_s()),Is=function(e){var t=e.title,n=e.selectedDate,a=e.timePeriods;return r.a.createElement(Cs,null,r.a.createElement(Ds,null,r.a.createElement(Rn,{style:{marginBottom:"0"}},t),r.a.createElement(Fn,{style:{color:"".concat(Cn.grey),marginTop:"0",marginBottom:"0"}},n)),r.a.createElement(js,{panelKind:t,timePeriodOptions:a,selectedDate:n}))};function Ns(){var e=Object(On.a)(["\n  color: ",";\n  font-size: 3em;\n  font-weight: 500;\n"]);return Ns=function(){return e},e}function Rs(){var e=Object(On.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 1em;\n  background-color: white;\n  box-shadow: 0 5px 15px 5px rgba(164, 173, 186, 0.25);\n  border-radius: 3px;\n"]);return Rs=function(){return e},e}var As=In.a.div(Rs()),Ts=Object(In.a)(ps)(Ns(),Cn.dark),Ms=function(){var e=Object(a.useContext)(fn),t=e.state,n=(e.dispatch,Object(a.useState)({labels:Object(f.a)(fs(t.dashboard.recentBookingsPeriod)),datasets:[{label:"Bookings",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"rgba(75,192,192,1)",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(255,255,255,255)",pointHoverBorderColor:"rgba(75,192,192,1)",pointHoverBorderWidth:2,pointRadius:4,pointHitRadius:10,data:[0,0,0,0,0,0,0,0]}]})),o=Object(s.a)(n,2),i=o[0],c=o[1];return Object(a.useEffect)(function(){var e=bs(t.bookings.bookings,t.dashboard.recentBookingsPeriod);c(Object(b.a)({},i,{labels:Object(f.a)(fs(t.dashboard.recentBookingsPeriod)),datasets:[Object(b.a)({},i.datasets[0],{data:Object(f.a)(Object.keys(e).map(function(t){return e[t]}))})]}))},[t.dashboard.recentBookingsPeriod,t.bookings.bookings]),r.a.createElement(As,null,r.a.createElement(Is,{title:"Dashboard Recent Bookings",selectedDate:t.dashboard.recentBookingsPeriod,timePeriods:["Last 7 days","Last 30 days"]}),r.a.createElement(Ts,null,i.datasets[0].data.reduce(function(e,t){return e+t},0)," booked"),r.a.createElement(gs.b,{data:i,options:{legend:{position:"bottom",display:!1},scales:{yAxes:[{ticks:{min:0,callback:function(e,t,n){if(Math.floor(e)===e)return e}}}]}}}))};function Bs(){var e=Object(On.a)(["\n  color: ",";\n  font-size: 3em;\n  font-weight: 500;\n"]);return Bs=function(){return e},e}function Ls(){var e=Object(On.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 1em;\n  background-color: white;\n  box-shadow: 0 5px 15px 5px rgba(164, 173, 186, 0.25);\n  border-radius: 3px;\n"]);return Ls=function(){return e},e}var Fs=In.a.div(Ls()),Ps=Object(In.a)(ps)(Bs(),Cn.dark),qs=function(){var e=Object(a.useContext)(fn),t=e.state,n=(e.dispatch,Object(a.useState)({labels:Object(f.a)(fs(t.dashboard.upcomingBookingsPeriod)),datasets:[{label:"Bookings",backgroundColor:"rgba(43, 114, 189, 0.6)",borderColor:"rgb(43, 114, 189)",borderWidth:1,hoverBackgroundColor:"rgba(43, 114, 189,0.8)",hoverBorderColor:"rgb(43, 114, 189);",data:[0,0,0,0,0,0,0,0]}]})),o=Object(s.a)(n,2),i=o[0],c=o[1];return Object(a.useEffect)(function(){var e=bs(t.bookings.bookings,t.dashboard.upcomingBookingPeriod);c(Object(b.a)({},i,{labels:Object(f.a)(fs(t.dashboard.upcomingBookingPeriod)),datasets:[Object(b.a)({},i.datasets[0],{data:Object(f.a)(Object.keys(e).map(function(t){return e[t]}))})]}))},[t.dashboard.upcomingBookingPeriod,t.bookings.bookings]),r.a.createElement(Fs,null,r.a.createElement(Is,{title:"Upcoming Bookings",selectedDate:t.dashboard.upcomingBookingPeriod,timePeriods:["Next 7 days","Next 30 days"]}),r.a.createElement(Ps,null,i.datasets[0].data.reduce(function(e,t){return e+t},0)," booked"),r.a.createElement(gs.a,{data:i,options:{legend:{position:"bottom",display:!1},scales:{yAxes:[{ticks:{min:0,callback:function(e,t,n){if(Math.floor(e)===e)return e}}}]}}}))};function Vs(){var e=Object(On.a)(["\n  width: 35%;\n  text-align: right;\n  margin-top: 0.6em;\n"]);return Vs=function(){return e},e}function zs(){var e=Object(On.a)(["\n  width: 30%;\n  margin-top: 0.6em;\n"]);return zs=function(){return e},e}function Gs(){var e=Object(On.a)(["\n  display: flex;\n  width: 100%;\n  border-bottom: 1px solid #E6E8E9;\n"]);return Gs=function(){return e},e}function Us(){var e=Object(On.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 1em;\n  background-color: white;\n  box-shadow: 0 5px 15px 5px rgba(164, 173, 186, 0.25);\n  border-radius: 3px;\n  margin-bottom: 2em;\n"]);return Us=function(){return e},e}In.a.div(Us()),In.a.div(Gs()),Object(In.a)(Fn)(zs()),Object(In.a)(Fn)(Vs());function Hs(){var e=Object(On.a)(["\n  width: 35%;\n  text-align: right;\n  margin-top: 0.6em;\n"]);return Hs=function(){return e},e}function Js(){var e=Object(On.a)(["\n  width: 30%;\n  margin-top: 0.6em;\n"]);return Js=function(){return e},e}function Ks(){var e=Object(On.a)(["\n  display: flex;\n  width: 100%;\n  border-bottom: 1px solid #E6E8E9;\n"]);return Ks=function(){return e},e}function Ys(){var e=Object(On.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  padding: 1em;\n  background-color: white;\n  box-shadow: 0 5px 15px 5px rgba(164, 173, 186, 0.25);\n  border-radius: 3px;\n  margin-bottom: 2em;\n"]);return Ys=function(){return e},e}In.a.div(Ys()),In.a.div(Ks()),Object(In.a)(Fn)(Js()),Object(In.a)(Fn)(Hs());function Ws(){var e=Object(On.a)(["\n  display: flex;\n  width: 100%;\n  border-bottom: 1px solid gray;  \n"]);return Ws=function(){return e},e}function $s(){var e=Object(On.a)(["\n  color: ",";\n  margin-top: 0;\n  margin-bottom: 0;  \n"]);return $s=function(){return e},e}function Qs(){var e=Object(On.a)(["\n  margin-right: 2em;\n  margin-bottom: 0;\n  color: ",";\n"]);return Qs=function(){return e},e}function Zs(){var e=Object(On.a)(["\n  width: 100%;\n  display: flex;\n"]);return Zs=function(){return e},e}function Xs(){var e=Object(On.a)(["\n  color: ",";\n  font-size: 3em;\n  font-weight: 500;\n"]);return Xs=function(){return e},e}Object(In.a)(ps)(Xs(),Cn.dark),In.a.div(Zs()),Object(In.a)(Fn)(Qs(),Cn.grey),Object(In.a)(Fn)($s(),Cn.dark),In.a.div(Ws());var eu=function(){var e=Object(a.useContext)(fn),t=(e.state,e.dispatch),n=Object(a.useState)({id:-1,name:"",count:0}),o=Object(s.a)(n,2);o[0],o[1];return Object(a.useEffect)(function(){!function(){var e;l.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t({type:Se}),n.next=4,l.a.awrap(p.a.get("/bookings"));case 4:e=n.sent,t({type:Ce,payload:e.data.bookings}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),t({type:De});case 11:case"end":return n.stop()}},null,null,[[0,8]])}()},[]),r.a.createElement(la,{columns:"1fr 1fr",style:{width:"100%"}},r.a.createElement(Ms,null),r.a.createElement(qs,null))},tu=function(){return r.a.createElement(d.d,null,r.a.createElement(hn,{path:"/calendar",exact:!0,component:us}),r.a.createElement(hn,{path:"/bookings",exact:!0,component:$o}),r.a.createElement(hn,{path:"/customers",exact:!0,component:pi}),r.a.createElement(hn,{path:"/invoices",exact:!0,component:Yc}),r.a.createElement(hn,{path:"/settings",exact:!0,component:zc}),r.a.createElement(hn,{path:"/create-stripe-account",exact:!0,component:ds}),r.a.createElement(hn,{path:"/dashboard",exact:!0,component:eu}))},nu=n(355),au=n(356),ru=n.n(au);function ou(){var e=Object(On.a)(["\n    width: 100%;\n    height: 100%;\n    min-height: 100vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  "]);return ou=function(){return e},e}var iu=Object(d.g)(function(e){var t=In.a.div(ou()),n=Object(a.useContext)(fn).dispatch;return Object(a.useEffect)(function(){var t="?access_token=",a=window.location.href,r=a.indexOf(t);if(r>=0){var o="",i="";if(window.location.href.indexOf("start=")>0?(o=a.substring(r+t.length,a.length),i=a.substring(window.location.href.indexOf("start="),window.location.href.indexOf(t))):o=a.substring(r+t.length,a.length),o.length>0){var c=ru.a.decode(o),s={outseta_id:c.nameid,email:c.unique_name,firstName:c.family_name,lastName:c.given_name};!function(){var t,a,r;l.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:return t={headers:{"Content-Type":"application/json"}},o.prev=1,o.next=4,l.a.awrap(p.a.post("/auth/login",JSON.stringify(s),t));case 4:if((a=o.sent).data.success&&n({type:"get_login_success",payload:Object(b.a)({},a.data)}),!a.data.user.is_new){o.next=15;break}return o.next=9,l.a.awrap(Object(nu.loadUserflow)());case 9:(r=o.sent).init("ytb6m37wn5drnj2zkxptyvke6i"),r.identify(a.data.user.id,{name:"".concat(a.data.user.firstName," ").concat(a.data.user.lastName),email:a.data.user.email,signedUpAt:a.data.user.createdAt}),r.startFlow("d496295e-ae0c-4c03-83c8-9794fcac74ed"),o.next=16;break;case 15:i.length>0?e.history.push("/calendar?"+i):e.history.push("/calendar");case 16:o.next=22;break;case 18:o.prev=18,o.t0=o.catch(1),n({type:"get_login_error",payload:Object(b.a)({},s)}),window.location.replace(wr.a.BASE_URL);case 22:case"end":return o.stop()}},null,null,[[1,18]])}()}else window.location.replace(wr.a.BASE_URL)}else window.location.replace(wr.a.BASE_URL)},[]),r.a.createElement(t,null,r.a.createElement(er,{loading:"true"}))}),cu=function(){return r.a.createElement(a.Fragment,null,r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/login",component:iu}),r.a.createElement(d.b,{component:tu})))},lu="\n  position: relative;\n  // z-index: 1;\n  > div {\n    width: 78em;\n    max-width: 100%;\n    margin: 0 auto;\n    padding: 1em 1.4em;\n  }\n  > div > img {\n    max-width: 100%;\n  }\n",su=n(357),uu=n.n(su),du=n(358),mu=n.n(du),pu=n(359),gu=n.n(pu),fu=n(360),bu=n.n(fu),vu=n(361),yu=n.n(vu),hu=n(362),ku=n.n(hu),Eu=n(363),Ou=n.n(Eu),xu=n(364),wu=n.n(xu);function ju(){var e=Object(On.a)(["\n  display: flex;\n  flex-direction: column;  \n  height: 100% !important;\n  justify-content: ",";\n"]);return ju=function(){return e},e}function _u(){var e=Object(On.a)(["\n  display: grid;\n  grid-template-columns: 2.5em 1fr;\n  align-items: center;\n  margin-bottom: 1em;\n  cursor: pointer;\n  min-height: 32px;\n  p {\n    margin: 0;\n    color: ",";\n    line-height: 2;\n  }\n  @media (max-width: 900px) {\n    p {\n      display: none;\n    }\n    grid-template-columns: 1fr;\n  }\n  ","\n  ","\n"]);return _u=function(){return e},e}function Su(){var e=Object(On.a)(["\n  ",";\n  position: sticky;\n  float: left;\n  top: 0;\n  width: ",";\n  padding-top: 0.3em;\n  padding-bottom: 0.3em;\n  background: ",";\n  min-height: 100vh;\n  color: white;\n  display: grid;\n  > div {\n    width: 100%;\n  }\n  @media (max-width: 900px) {\n    width: auto;\n  }\n"]);return Su=function(){return e},e}var Cu=In.a.div(Su(),lu,function(e){return e.collapsed?bi.collapseSidebarWidth:bi.sidebarWidth},Cn.ultra_dark),Du=In.a.div(_u(),function(e){return e.selected?"white":""},function(e){return e.selected&&"\n    @media (max-width: 900px) {\n      img {\n        filter: brightness(2);\n      }\n    }\n  "},function(e){return!e.selected&&"\n    @media (max-width: 900px) {\n      img {\n        opacity: .8;\n      }\n    }\n  "}),Iu=In.a.div(ju(),function(e){return e.logined?"space-between":"flex-end"}),Nu=[{title:"Calendar",svg:uu.a,href:"/calendar"},{title:"Bookings",svg:mu.a,href:"/bookings"},{title:"Customers",svg:bu.a,href:"/customers"},{title:"Invoices",svg:gu.a,href:"/invoices"}],Ru=[{title:"Settings",svg:yu.a,href:"/settings"}],Au=Object(d.g)(function(e){var t=e.history,n=Object(a.useContext)(fn),o=n.state,i=n.dispatch,c=Object(a.useState)(!1),l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(a.useState)(!1),p=Object(s.a)(m,2),g=p[0],f=p[1];return Object(a.useEffect)(function(){f(o.auth.token&&o.auth.token.length)},[o.auth.token]),r.a.createElement(Cu,{collapsed:u},r.a.createElement(Iu,{logined:g},g?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(Du,{key:"sidebar-collapsed"},r.a.createElement("img",{style:{width:"32px"},alt:"collapse",src:u?ol.a:cl.a,onClick:function(){return d(!u)}})),r.a.createElement(Du,{key:"dashboard",selected:"/dashboard"===window.location.pathname,onClick:function(){return t.push("/dashboard")}},r.a.createElement(ra.a,{className:"fa-icons",icon:oa.a,style:{width:"21px",height:"21px",marginLeft:"4px",color:"#E92579"}}),!u&&r.a.createElement(Tn,null,"Dashboard")),Nu.map(function(e){return r.a.createElement(Du,{key:e.title,selected:window.location.pathname===e.href,onClick:function(){return t.push(e.href)}},r.a.createElement("img",{alt:e.title,src:e.svg}),!u&&r.a.createElement(Tn,null,e.title))})),r.a.createElement("div",null,Ru.map(function(e){return r.a.createElement(Du,{key:e.title,selected:window.location.pathname===e.href,onClick:function(){return e.href&&t.push(e.href)}},r.a.createElement("img",{alt:e.title,src:e.svg}),!u&&r.a.createElement(Tn,null,e.title))}),r.a.createElement(Du,{key:"logout",onClick:function(){an(""),i({type:"set_logout"}),setTimeout(function(){window.location.replace(wr.a.BASE_URL)},100)}},r.a.createElement("img",{alt:"Log Out",src:ku.a}),!u&&r.a.createElement(Tn,null,"Log Out")))):r.a.createElement("div",null,r.a.createElement(Du,{key:"register",onClick:function(){an(""),window.location.replace(wr.a.BASE_URL+"register")}},r.a.createElement("img",{alt:"Log In",src:wu.a,style:{width:"24px",height:"24px"}}),!u&&r.a.createElement(Tn,null,"Register")),r.a.createElement(Du,{key:"login",onClick:function(){an(""),window.location.replace(wr.a.BASE_URL+"login")}},r.a.createElement("img",{alt:"Log In",src:Ou.a,style:{width:"24px",height:"24px"}}),!u&&r.a.createElement(Tn,null,"Log In")))))});function Tu(){var e=Object(On.a)(["\n  min-height: 100vh;\n  height: 100vh;\n  max-width: 100vw;\n  /* overflow: hidden; */\n  display: flex;\n  flex-direction: column;\n"]);return Tu=function(){return e},e}var Mu=In.a.div(Tu()),Bu=function(e){return r.a.createElement(Mu,e,e.children)};function Lu(){var e=Object(On.a)(["\n  ",';\n\n  position: relative;\n\n  overflow-x: hidden;\n  overflow-y: scroll;\n\n  :before {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    z-index: -1;\n    background: ',";\n    ","\n    ","\n  }\n\n  > svg {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n  }\n\n  display: flex;\n  min-height: ",";\n\n  ","\n  :last-child {\n    flex: 1 1 auto;\n  }\n\n  > div {\n    ","\n  }\n  > div {\n    ","\n  }\n"]);return Lu=function(){return e},e}var Fu=In.a.div(Lu(),lu,function(e){return e.bgColor?Cn[e.bgColor]:"transparent"},function(e){return e.skew&&"\n      transform: skewY(".concat(e.skew,");\n    ")},function(e){return e.mask&&"\n      mask: url(/masks/".concat(e.mask,".svg);\n    ")},function(e){return e.height},function(e){return e.center?"\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n    h1, h2, h3, h4, p, a {\n      margin-right: auto;\n      margin-left: auto;\n      text-align: center;\n    }\n  ":""},function(e){return e.small&&"\n      width: 58em;\n    "},function(e){return e.fullWidth&&"\n      width: 100%;\n    "}),Pu=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fu,e,r.a.createElement("div",{style:{width:e.width}},e.children)))};p.a.defaults.baseURL=wr.a.API_URL,localStorage.token&&an(localStorage.token);var qu=function(e){var t=Object(a.useReducer)(vn,bn),n=Object(s.a)(t,2),o=n[0],i=n[1];return Object(a.useEffect)(function(){localStorage.token&&an(localStorage.token),localStorage.token&&function(){var e;l.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(p.a.get("/auth/me"));case 3:e=t.sent,i({type:"user_load_success",payload:e.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i({type:"auth_error"});case 10:case"end":return t.stop()}},null,null,[[0,7]])}()},[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(fn.Provider,{value:{state:o,dispatch:i}},r.a.createElement(u.a,null,r.a.createElement(Au,null),r.a.createElement(Bu,null,r.a.createElement(Pu,{bgColor:"lightest",fullWidth:!0},r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/",exact:!0,component:us}),r.a.createElement(d.b,{component:cu})))))))};En.a.setAppElement("#root"),i.a.render(r.a.createElement(qu,null),document.getElementById("root"))}},[[367,1,2]]]);
//# sourceMappingURL=main.d32519b4.chunk.js.map